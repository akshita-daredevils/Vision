var VP=Object.defineProperty;var FP=(t,e,n)=>e in t?VP(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var z=(t,e,n)=>FP(t,typeof e!="symbol"?e+"":e,n);function jP(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function UP(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var DE={exports:{}},qh={},OE={exports:{}},se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jl=Symbol.for("react.element"),zP=Symbol.for("react.portal"),BP=Symbol.for("react.fragment"),WP=Symbol.for("react.strict_mode"),HP=Symbol.for("react.profiler"),$P=Symbol.for("react.provider"),qP=Symbol.for("react.context"),YP=Symbol.for("react.forward_ref"),GP=Symbol.for("react.suspense"),KP=Symbol.for("react.memo"),QP=Symbol.for("react.lazy"),cv=Symbol.iterator;function XP(t){return t===null||typeof t!="object"?null:(t=cv&&t[cv]||t["@@iterator"],typeof t=="function"?t:null)}var ME={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},LE=Object.assign,VE={};function jo(t,e,n){this.props=t,this.context=e,this.refs=VE,this.updater=n||ME}jo.prototype.isReactComponent={};jo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};jo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function FE(){}FE.prototype=jo.prototype;function Km(t,e,n){this.props=t,this.context=e,this.refs=VE,this.updater=n||ME}var Qm=Km.prototype=new FE;Qm.constructor=Km;LE(Qm,jo.prototype);Qm.isPureReactComponent=!0;var uv=Array.isArray,jE=Object.prototype.hasOwnProperty,Xm={current:null},UE={key:!0,ref:!0,__self:!0,__source:!0};function zE(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)jE.call(e,r)&&!UE.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Jl,type:t,key:i,ref:o,props:s,_owner:Xm.current}}function JP(t,e){return{$$typeof:Jl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Jm(t){return typeof t=="object"&&t!==null&&t.$$typeof===Jl}function ZP(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var hv=/\/+/g;function af(t,e){return typeof t=="object"&&t!==null&&t.key!=null?ZP(""+t.key):e.toString(36)}function gu(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Jl:case zP:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+af(o,0):r,uv(s)?(n="",t!=null&&(n=t.replace(hv,"$&/")+"/"),gu(s,e,n,"",function(c){return c})):s!=null&&(Jm(s)&&(s=JP(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(hv,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",uv(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+af(i,a);o+=gu(i,e,n,l,s)}else if(l=XP(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+af(i,a++),o+=gu(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Cc(t,e,n){if(t==null)return t;var r=[],s=0;return gu(t,r,"","",function(i){return e.call(n,i,s++)}),r}function eA(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Mt={current:null},yu={transition:null},tA={ReactCurrentDispatcher:Mt,ReactCurrentBatchConfig:yu,ReactCurrentOwner:Xm};function BE(){throw Error("act(...) is not supported in production builds of React.")}se.Children={map:Cc,forEach:function(t,e,n){Cc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Cc(t,function(){e++}),e},toArray:function(t){return Cc(t,function(e){return e})||[]},only:function(t){if(!Jm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};se.Component=jo;se.Fragment=BP;se.Profiler=HP;se.PureComponent=Km;se.StrictMode=WP;se.Suspense=GP;se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tA;se.act=BE;se.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=LE({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Xm.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)jE.call(e,l)&&!UE.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Jl,type:t.type,key:s,ref:i,props:r,_owner:o}};se.createContext=function(t){return t={$$typeof:qP,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:$P,_context:t},t.Consumer=t};se.createElement=zE;se.createFactory=function(t){var e=zE.bind(null,t);return e.type=t,e};se.createRef=function(){return{current:null}};se.forwardRef=function(t){return{$$typeof:YP,render:t}};se.isValidElement=Jm;se.lazy=function(t){return{$$typeof:QP,_payload:{_status:-1,_result:t},_init:eA}};se.memo=function(t,e){return{$$typeof:KP,type:t,compare:e===void 0?null:e}};se.startTransition=function(t){var e=yu.transition;yu.transition={};try{t()}finally{yu.transition=e}};se.unstable_act=BE;se.useCallback=function(t,e){return Mt.current.useCallback(t,e)};se.useContext=function(t){return Mt.current.useContext(t)};se.useDebugValue=function(){};se.useDeferredValue=function(t){return Mt.current.useDeferredValue(t)};se.useEffect=function(t,e){return Mt.current.useEffect(t,e)};se.useId=function(){return Mt.current.useId()};se.useImperativeHandle=function(t,e,n){return Mt.current.useImperativeHandle(t,e,n)};se.useInsertionEffect=function(t,e){return Mt.current.useInsertionEffect(t,e)};se.useLayoutEffect=function(t,e){return Mt.current.useLayoutEffect(t,e)};se.useMemo=function(t,e){return Mt.current.useMemo(t,e)};se.useReducer=function(t,e,n){return Mt.current.useReducer(t,e,n)};se.useRef=function(t){return Mt.current.useRef(t)};se.useState=function(t){return Mt.current.useState(t)};se.useSyncExternalStore=function(t,e,n){return Mt.current.useSyncExternalStore(t,e,n)};se.useTransition=function(){return Mt.current.useTransition()};se.version="18.3.1";OE.exports=se;var M=OE.exports;const WE=UP(M),nA=jP({__proto__:null,default:WE},[M]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rA=M,sA=Symbol.for("react.element"),iA=Symbol.for("react.fragment"),oA=Object.prototype.hasOwnProperty,aA=rA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,lA={key:!0,ref:!0,__self:!0,__source:!0};function HE(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)oA.call(e,r)&&!lA.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:sA,type:t,key:i,ref:o,props:s,_owner:aA.current}}qh.Fragment=iA;qh.jsx=HE;qh.jsxs=HE;DE.exports=qh;var E=DE.exports,lp={},$E={exports:{}},nn={},qE={exports:{}},YE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(F,Y){var G=F.length;F.push(Y);e:for(;0<G;){var J=G-1>>>1,ue=F[J];if(0<s(ue,Y))F[J]=Y,F[G]=ue,G=J;else break e}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var Y=F[0],G=F.pop();if(G!==Y){F[0]=G;e:for(var J=0,ue=F.length,Yt=ue>>>1;J<Yt;){var Ke=2*(J+1)-1,Gt=F[Ke],tt=Ke+1,Dr=F[tt];if(0>s(Gt,G))tt<ue&&0>s(Dr,Gt)?(F[J]=Dr,F[tt]=G,J=tt):(F[J]=Gt,F[Ke]=G,J=Ke);else if(tt<ue&&0>s(Dr,G))F[J]=Dr,F[tt]=G,J=tt;else break e}}return Y}function s(F,Y){var G=F.sortIndex-Y.sortIndex;return G!==0?G:F.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,d=null,f=3,m=!1,v=!1,w=!1,T=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(F){for(var Y=n(c);Y!==null;){if(Y.callback===null)r(c);else if(Y.startTime<=F)r(c),Y.sortIndex=Y.expirationTime,e(l,Y);else break;Y=n(c)}}function R(F){if(w=!1,b(F),!v)if(n(l)!==null)v=!0,we(D);else{var Y=n(c);Y!==null&&We(R,Y.startTime-F)}}function D(F,Y){v=!1,w&&(w=!1,_(y),y=-1),m=!0;var G=f;try{for(b(Y),d=n(l);d!==null&&(!(d.expirationTime>Y)||F&&!A());){var J=d.callback;if(typeof J=="function"){d.callback=null,f=d.priorityLevel;var ue=J(d.expirationTime<=Y);Y=t.unstable_now(),typeof ue=="function"?d.callback=ue:d===n(l)&&r(l),b(Y)}else r(l);d=n(l)}if(d!==null)var Yt=!0;else{var Ke=n(c);Ke!==null&&We(R,Ke.startTime-Y),Yt=!1}return Yt}finally{d=null,f=G,m=!1}}var L=!1,I=null,y=-1,k=5,P=-1;function A(){return!(t.unstable_now()-P<k)}function N(){if(I!==null){var F=t.unstable_now();P=F;var Y=!0;try{Y=I(!0,F)}finally{Y?C():(L=!1,I=null)}}else L=!1}var C;if(typeof x=="function")C=function(){x(N)};else if(typeof MessageChannel<"u"){var le=new MessageChannel,re=le.port2;le.port1.onmessage=N,C=function(){re.postMessage(null)}}else C=function(){T(N,0)};function we(F){I=F,L||(L=!0,C())}function We(F,Y){y=T(function(){F(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){v||m||(v=!0,we(D))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(F){switch(f){case 1:case 2:case 3:var Y=3;break;default:Y=f}var G=f;f=Y;try{return F()}finally{f=G}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,Y){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var G=f;f=F;try{return Y()}finally{f=G}},t.unstable_scheduleCallback=function(F,Y,G){var J=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?J+G:J):G=J,F){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=G+ue,F={id:h++,callback:Y,priorityLevel:F,startTime:G,expirationTime:ue,sortIndex:-1},G>J?(F.sortIndex=G,e(c,F),n(l)===null&&F===n(c)&&(w?(_(y),y=-1):w=!0,We(R,G-J))):(F.sortIndex=ue,e(l,F),v||m||(v=!0,we(D))),F},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(F){var Y=f;return function(){var G=f;f=Y;try{return F.apply(this,arguments)}finally{f=G}}}})(YE);qE.exports=YE;var cA=qE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uA=M,tn=cA;function B(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var GE=new Set,ml={};function bi(t,e){xo(t,e),xo(t+"Capture",e)}function xo(t,e){for(ml[t]=e,t=0;t<e.length;t++)GE.add(e[t])}var xr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),cp=Object.prototype.hasOwnProperty,hA=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,dv={},fv={};function dA(t){return cp.call(fv,t)?!0:cp.call(dv,t)?!1:hA.test(t)?fv[t]=!0:(dv[t]=!0,!1)}function fA(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function pA(t,e,n,r){if(e===null||typeof e>"u"||fA(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Lt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var yt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){yt[t]=new Lt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];yt[e]=new Lt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){yt[t]=new Lt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){yt[t]=new Lt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){yt[t]=new Lt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){yt[t]=new Lt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){yt[t]=new Lt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){yt[t]=new Lt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){yt[t]=new Lt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Zm=/[\-:]([a-z])/g;function eg(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Zm,eg);yt[e]=new Lt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Zm,eg);yt[e]=new Lt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Zm,eg);yt[e]=new Lt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){yt[t]=new Lt(t,1,!1,t.toLowerCase(),null,!1,!1)});yt.xlinkHref=new Lt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){yt[t]=new Lt(t,1,!1,t.toLowerCase(),null,!0,!0)});function tg(t,e,n,r){var s=yt.hasOwnProperty(e)?yt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(pA(e,n,s,r)&&(n=null),r||s===null?dA(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Cr=uA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Rc=Symbol.for("react.element"),qi=Symbol.for("react.portal"),Yi=Symbol.for("react.fragment"),ng=Symbol.for("react.strict_mode"),up=Symbol.for("react.profiler"),KE=Symbol.for("react.provider"),QE=Symbol.for("react.context"),rg=Symbol.for("react.forward_ref"),hp=Symbol.for("react.suspense"),dp=Symbol.for("react.suspense_list"),sg=Symbol.for("react.memo"),Hr=Symbol.for("react.lazy"),XE=Symbol.for("react.offscreen"),pv=Symbol.iterator;function ga(t){return t===null||typeof t!="object"?null:(t=pv&&t[pv]||t["@@iterator"],typeof t=="function"?t:null)}var Oe=Object.assign,lf;function Oa(t){if(lf===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);lf=e&&e[1]||""}return`
`+lf+t}var cf=!1;function uf(t,e){if(!t||cf)return"";cf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{cf=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Oa(t):""}function mA(t){switch(t.tag){case 5:return Oa(t.type);case 16:return Oa("Lazy");case 13:return Oa("Suspense");case 19:return Oa("SuspenseList");case 0:case 2:case 15:return t=uf(t.type,!1),t;case 11:return t=uf(t.type.render,!1),t;case 1:return t=uf(t.type,!0),t;default:return""}}function fp(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Yi:return"Fragment";case qi:return"Portal";case up:return"Profiler";case ng:return"StrictMode";case hp:return"Suspense";case dp:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case QE:return(t.displayName||"Context")+".Consumer";case KE:return(t._context.displayName||"Context")+".Provider";case rg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case sg:return e=t.displayName||null,e!==null?e:fp(t.type)||"Memo";case Hr:e=t._payload,t=t._init;try{return fp(t(e))}catch{}}return null}function gA(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return fp(e);case 8:return e===ng?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Es(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function JE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function yA(t){var e=JE(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Nc(t){t._valueTracker||(t._valueTracker=yA(t))}function ZE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=JE(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Wu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function pp(t,e){var n=e.checked;return Oe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function mv(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Es(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function eT(t,e){e=e.checked,e!=null&&tg(t,"checked",e,!1)}function mp(t,e){eT(t,e);var n=Es(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?gp(t,e.type,n):e.hasOwnProperty("defaultValue")&&gp(t,e.type,Es(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function gv(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function gp(t,e,n){(e!=="number"||Wu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ma=Array.isArray;function oo(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Es(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function yp(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(B(91));return Oe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function yv(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(B(92));if(Ma(n)){if(1<n.length)throw Error(B(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Es(n)}}function tT(t,e){var n=Es(e.value),r=Es(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function _v(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function nT(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function _p(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?nT(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Dc,rT=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Dc=Dc||document.createElement("div"),Dc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Dc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function gl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var qa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_A=["Webkit","ms","Moz","O"];Object.keys(qa).forEach(function(t){_A.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),qa[e]=qa[t]})});function sT(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||qa.hasOwnProperty(t)&&qa[t]?(""+e).trim():e+"px"}function iT(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=sT(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var vA=Oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vp(t,e){if(e){if(vA[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(B(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(B(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(B(61))}if(e.style!=null&&typeof e.style!="object")throw Error(B(62))}}function wp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xp=null;function ig(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ep=null,ao=null,lo=null;function vv(t){if(t=tc(t)){if(typeof Ep!="function")throw Error(B(280));var e=t.stateNode;e&&(e=Xh(e),Ep(t.stateNode,t.type,e))}}function oT(t){ao?lo?lo.push(t):lo=[t]:ao=t}function aT(){if(ao){var t=ao,e=lo;if(lo=ao=null,vv(t),e)for(t=0;t<e.length;t++)vv(e[t])}}function lT(t,e){return t(e)}function cT(){}var hf=!1;function uT(t,e,n){if(hf)return t(e,n);hf=!0;try{return lT(t,e,n)}finally{hf=!1,(ao!==null||lo!==null)&&(cT(),aT())}}function yl(t,e){var n=t.stateNode;if(n===null)return null;var r=Xh(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(B(231,e,typeof n));return n}var Tp=!1;if(xr)try{var ya={};Object.defineProperty(ya,"passive",{get:function(){Tp=!0}}),window.addEventListener("test",ya,ya),window.removeEventListener("test",ya,ya)}catch{Tp=!1}function wA(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var Ya=!1,Hu=null,$u=!1,bp=null,xA={onError:function(t){Ya=!0,Hu=t}};function EA(t,e,n,r,s,i,o,a,l){Ya=!1,Hu=null,wA.apply(xA,arguments)}function TA(t,e,n,r,s,i,o,a,l){if(EA.apply(this,arguments),Ya){if(Ya){var c=Hu;Ya=!1,Hu=null}else throw Error(B(198));$u||($u=!0,bp=c)}}function Ii(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function hT(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function wv(t){if(Ii(t)!==t)throw Error(B(188))}function bA(t){var e=t.alternate;if(!e){if(e=Ii(t),e===null)throw Error(B(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return wv(s),t;if(i===r)return wv(s),e;i=i.sibling}throw Error(B(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(B(189))}}if(n.alternate!==r)throw Error(B(190))}if(n.tag!==3)throw Error(B(188));return n.stateNode.current===n?t:e}function dT(t){return t=bA(t),t!==null?fT(t):null}function fT(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=fT(t);if(e!==null)return e;t=t.sibling}return null}var pT=tn.unstable_scheduleCallback,xv=tn.unstable_cancelCallback,IA=tn.unstable_shouldYield,SA=tn.unstable_requestPaint,$e=tn.unstable_now,kA=tn.unstable_getCurrentPriorityLevel,og=tn.unstable_ImmediatePriority,mT=tn.unstable_UserBlockingPriority,qu=tn.unstable_NormalPriority,PA=tn.unstable_LowPriority,gT=tn.unstable_IdlePriority,Yh=null,Yn=null;function AA(t){if(Yn&&typeof Yn.onCommitFiberRoot=="function")try{Yn.onCommitFiberRoot(Yh,t,void 0,(t.current.flags&128)===128)}catch{}}var Sn=Math.clz32?Math.clz32:NA,CA=Math.log,RA=Math.LN2;function NA(t){return t>>>=0,t===0?32:31-(CA(t)/RA|0)|0}var Oc=64,Mc=4194304;function La(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Yu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=La(a):(i&=o,i!==0&&(r=La(i)))}else o=n&~s,o!==0?r=La(o):i!==0&&(r=La(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Sn(e),s=1<<n,r|=t[n],e&=~s;return r}function DA(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function OA(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Sn(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=DA(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function Ip(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function yT(){var t=Oc;return Oc<<=1,!(Oc&4194240)&&(Oc=64),t}function df(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Zl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Sn(e),t[e]=n}function MA(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Sn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function ag(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Sn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var _e=0;function _T(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var vT,lg,wT,xT,ET,Sp=!1,Lc=[],as=null,ls=null,cs=null,_l=new Map,vl=new Map,qr=[],LA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ev(t,e){switch(t){case"focusin":case"focusout":as=null;break;case"dragenter":case"dragleave":ls=null;break;case"mouseover":case"mouseout":cs=null;break;case"pointerover":case"pointerout":_l.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":vl.delete(e.pointerId)}}function _a(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=tc(e),e!==null&&lg(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function VA(t,e,n,r,s){switch(e){case"focusin":return as=_a(as,t,e,n,r,s),!0;case"dragenter":return ls=_a(ls,t,e,n,r,s),!0;case"mouseover":return cs=_a(cs,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return _l.set(i,_a(_l.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,vl.set(i,_a(vl.get(i)||null,t,e,n,r,s)),!0}return!1}function TT(t){var e=ti(t.target);if(e!==null){var n=Ii(e);if(n!==null){if(e=n.tag,e===13){if(e=hT(n),e!==null){t.blockedOn=e,ET(t.priority,function(){wT(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function _u(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=kp(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);xp=r,n.target.dispatchEvent(r),xp=null}else return e=tc(n),e!==null&&lg(e),t.blockedOn=n,!1;e.shift()}return!0}function Tv(t,e,n){_u(t)&&n.delete(e)}function FA(){Sp=!1,as!==null&&_u(as)&&(as=null),ls!==null&&_u(ls)&&(ls=null),cs!==null&&_u(cs)&&(cs=null),_l.forEach(Tv),vl.forEach(Tv)}function va(t,e){t.blockedOn===e&&(t.blockedOn=null,Sp||(Sp=!0,tn.unstable_scheduleCallback(tn.unstable_NormalPriority,FA)))}function wl(t){function e(s){return va(s,t)}if(0<Lc.length){va(Lc[0],t);for(var n=1;n<Lc.length;n++){var r=Lc[n];r.blockedOn===t&&(r.blockedOn=null)}}for(as!==null&&va(as,t),ls!==null&&va(ls,t),cs!==null&&va(cs,t),_l.forEach(e),vl.forEach(e),n=0;n<qr.length;n++)r=qr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<qr.length&&(n=qr[0],n.blockedOn===null);)TT(n),n.blockedOn===null&&qr.shift()}var co=Cr.ReactCurrentBatchConfig,Gu=!0;function jA(t,e,n,r){var s=_e,i=co.transition;co.transition=null;try{_e=1,cg(t,e,n,r)}finally{_e=s,co.transition=i}}function UA(t,e,n,r){var s=_e,i=co.transition;co.transition=null;try{_e=4,cg(t,e,n,r)}finally{_e=s,co.transition=i}}function cg(t,e,n,r){if(Gu){var s=kp(t,e,n,r);if(s===null)Ef(t,e,r,Ku,n),Ev(t,r);else if(VA(s,t,e,n,r))r.stopPropagation();else if(Ev(t,r),e&4&&-1<LA.indexOf(t)){for(;s!==null;){var i=tc(s);if(i!==null&&vT(i),i=kp(t,e,n,r),i===null&&Ef(t,e,r,Ku,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Ef(t,e,r,null,n)}}var Ku=null;function kp(t,e,n,r){if(Ku=null,t=ig(r),t=ti(t),t!==null)if(e=Ii(t),e===null)t=null;else if(n=e.tag,n===13){if(t=hT(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ku=t,null}function bT(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(kA()){case og:return 1;case mT:return 4;case qu:case PA:return 16;case gT:return 536870912;default:return 16}default:return 16}}var Zr=null,ug=null,vu=null;function IT(){if(vu)return vu;var t,e=ug,n=e.length,r,s="value"in Zr?Zr.value:Zr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return vu=s.slice(t,1<r?1-r:void 0)}function wu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Vc(){return!0}function bv(){return!1}function rn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Vc:bv,this.isPropagationStopped=bv,this}return Oe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Vc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Vc)},persist:function(){},isPersistent:Vc}),e}var Uo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hg=rn(Uo),ec=Oe({},Uo,{view:0,detail:0}),zA=rn(ec),ff,pf,wa,Gh=Oe({},ec,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:dg,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==wa&&(wa&&t.type==="mousemove"?(ff=t.screenX-wa.screenX,pf=t.screenY-wa.screenY):pf=ff=0,wa=t),ff)},movementY:function(t){return"movementY"in t?t.movementY:pf}}),Iv=rn(Gh),BA=Oe({},Gh,{dataTransfer:0}),WA=rn(BA),HA=Oe({},ec,{relatedTarget:0}),mf=rn(HA),$A=Oe({},Uo,{animationName:0,elapsedTime:0,pseudoElement:0}),qA=rn($A),YA=Oe({},Uo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),GA=rn(YA),KA=Oe({},Uo,{data:0}),Sv=rn(KA),QA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},XA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},JA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ZA(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=JA[t])?!!e[t]:!1}function dg(){return ZA}var eC=Oe({},ec,{key:function(t){if(t.key){var e=QA[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=wu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?XA[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:dg,charCode:function(t){return t.type==="keypress"?wu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?wu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),tC=rn(eC),nC=Oe({},Gh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),kv=rn(nC),rC=Oe({},ec,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:dg}),sC=rn(rC),iC=Oe({},Uo,{propertyName:0,elapsedTime:0,pseudoElement:0}),oC=rn(iC),aC=Oe({},Gh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),lC=rn(aC),cC=[9,13,27,32],fg=xr&&"CompositionEvent"in window,Ga=null;xr&&"documentMode"in document&&(Ga=document.documentMode);var uC=xr&&"TextEvent"in window&&!Ga,ST=xr&&(!fg||Ga&&8<Ga&&11>=Ga),Pv=" ",Av=!1;function kT(t,e){switch(t){case"keyup":return cC.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function PT(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Gi=!1;function hC(t,e){switch(t){case"compositionend":return PT(e);case"keypress":return e.which!==32?null:(Av=!0,Pv);case"textInput":return t=e.data,t===Pv&&Av?null:t;default:return null}}function dC(t,e){if(Gi)return t==="compositionend"||!fg&&kT(t,e)?(t=IT(),vu=ug=Zr=null,Gi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return ST&&e.locale!=="ko"?null:e.data;default:return null}}var fC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!fC[t.type]:e==="textarea"}function AT(t,e,n,r){oT(r),e=Qu(e,"onChange"),0<e.length&&(n=new hg("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ka=null,xl=null;function pC(t){UT(t,0)}function Kh(t){var e=Xi(t);if(ZE(e))return t}function mC(t,e){if(t==="change")return e}var CT=!1;if(xr){var gf;if(xr){var yf="oninput"in document;if(!yf){var Rv=document.createElement("div");Rv.setAttribute("oninput","return;"),yf=typeof Rv.oninput=="function"}gf=yf}else gf=!1;CT=gf&&(!document.documentMode||9<document.documentMode)}function Nv(){Ka&&(Ka.detachEvent("onpropertychange",RT),xl=Ka=null)}function RT(t){if(t.propertyName==="value"&&Kh(xl)){var e=[];AT(e,xl,t,ig(t)),uT(pC,e)}}function gC(t,e,n){t==="focusin"?(Nv(),Ka=e,xl=n,Ka.attachEvent("onpropertychange",RT)):t==="focusout"&&Nv()}function yC(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Kh(xl)}function _C(t,e){if(t==="click")return Kh(e)}function vC(t,e){if(t==="input"||t==="change")return Kh(e)}function wC(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Cn=typeof Object.is=="function"?Object.is:wC;function El(t,e){if(Cn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!cp.call(e,s)||!Cn(t[s],e[s]))return!1}return!0}function Dv(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ov(t,e){var n=Dv(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Dv(n)}}function NT(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?NT(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function DT(){for(var t=window,e=Wu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Wu(t.document)}return e}function pg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function xC(t){var e=DT(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&NT(n.ownerDocument.documentElement,n)){if(r!==null&&pg(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Ov(n,i);var o=Ov(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var EC=xr&&"documentMode"in document&&11>=document.documentMode,Ki=null,Pp=null,Qa=null,Ap=!1;function Mv(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ap||Ki==null||Ki!==Wu(r)||(r=Ki,"selectionStart"in r&&pg(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Qa&&El(Qa,r)||(Qa=r,r=Qu(Pp,"onSelect"),0<r.length&&(e=new hg("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ki)))}function Fc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Qi={animationend:Fc("Animation","AnimationEnd"),animationiteration:Fc("Animation","AnimationIteration"),animationstart:Fc("Animation","AnimationStart"),transitionend:Fc("Transition","TransitionEnd")},_f={},OT={};xr&&(OT=document.createElement("div").style,"AnimationEvent"in window||(delete Qi.animationend.animation,delete Qi.animationiteration.animation,delete Qi.animationstart.animation),"TransitionEvent"in window||delete Qi.transitionend.transition);function Qh(t){if(_f[t])return _f[t];if(!Qi[t])return t;var e=Qi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in OT)return _f[t]=e[n];return t}var MT=Qh("animationend"),LT=Qh("animationiteration"),VT=Qh("animationstart"),FT=Qh("transitionend"),jT=new Map,Lv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ds(t,e){jT.set(t,e),bi(e,[t])}for(var vf=0;vf<Lv.length;vf++){var wf=Lv[vf],TC=wf.toLowerCase(),bC=wf[0].toUpperCase()+wf.slice(1);Ds(TC,"on"+bC)}Ds(MT,"onAnimationEnd");Ds(LT,"onAnimationIteration");Ds(VT,"onAnimationStart");Ds("dblclick","onDoubleClick");Ds("focusin","onFocus");Ds("focusout","onBlur");Ds(FT,"onTransitionEnd");xo("onMouseEnter",["mouseout","mouseover"]);xo("onMouseLeave",["mouseout","mouseover"]);xo("onPointerEnter",["pointerout","pointerover"]);xo("onPointerLeave",["pointerout","pointerover"]);bi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));bi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));bi("onBeforeInput",["compositionend","keypress","textInput","paste"]);bi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));bi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));bi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Va="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),IC=new Set("cancel close invalid load scroll toggle".split(" ").concat(Va));function Vv(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,TA(r,e,void 0,t),t.currentTarget=null}function UT(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;Vv(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;Vv(s,a,c),i=l}}}if($u)throw t=bp,$u=!1,bp=null,t}function Ie(t,e){var n=e[Op];n===void 0&&(n=e[Op]=new Set);var r=t+"__bubble";n.has(r)||(zT(e,t,2,!1),n.add(r))}function xf(t,e,n){var r=0;e&&(r|=4),zT(n,t,r,e)}var jc="_reactListening"+Math.random().toString(36).slice(2);function Tl(t){if(!t[jc]){t[jc]=!0,GE.forEach(function(n){n!=="selectionchange"&&(IC.has(n)||xf(n,!1,t),xf(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[jc]||(e[jc]=!0,xf("selectionchange",!1,e))}}function zT(t,e,n,r){switch(bT(e)){case 1:var s=jA;break;case 4:s=UA;break;default:s=cg}n=s.bind(null,e,n,t),s=void 0,!Tp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Ef(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=ti(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}uT(function(){var c=i,h=ig(n),d=[];e:{var f=jT.get(t);if(f!==void 0){var m=hg,v=t;switch(t){case"keypress":if(wu(n)===0)break e;case"keydown":case"keyup":m=tC;break;case"focusin":v="focus",m=mf;break;case"focusout":v="blur",m=mf;break;case"beforeblur":case"afterblur":m=mf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Iv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=WA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=sC;break;case MT:case LT:case VT:m=qA;break;case FT:m=oC;break;case"scroll":m=zA;break;case"wheel":m=lC;break;case"copy":case"cut":case"paste":m=GA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=kv}var w=(e&4)!==0,T=!w&&t==="scroll",_=w?f!==null?f+"Capture":null:f;w=[];for(var x=c,b;x!==null;){b=x;var R=b.stateNode;if(b.tag===5&&R!==null&&(b=R,_!==null&&(R=yl(x,_),R!=null&&w.push(bl(x,R,b)))),T)break;x=x.return}0<w.length&&(f=new m(f,v,null,n,h),d.push({event:f,listeners:w}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",f&&n!==xp&&(v=n.relatedTarget||n.fromElement)&&(ti(v)||v[Er]))break e;if((m||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,m?(v=n.relatedTarget||n.toElement,m=c,v=v?ti(v):null,v!==null&&(T=Ii(v),v!==T||v.tag!==5&&v.tag!==6)&&(v=null)):(m=null,v=c),m!==v)){if(w=Iv,R="onMouseLeave",_="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(w=kv,R="onPointerLeave",_="onPointerEnter",x="pointer"),T=m==null?f:Xi(m),b=v==null?f:Xi(v),f=new w(R,x+"leave",m,n,h),f.target=T,f.relatedTarget=b,R=null,ti(h)===c&&(w=new w(_,x+"enter",v,n,h),w.target=b,w.relatedTarget=T,R=w),T=R,m&&v)t:{for(w=m,_=v,x=0,b=w;b;b=Vi(b))x++;for(b=0,R=_;R;R=Vi(R))b++;for(;0<x-b;)w=Vi(w),x--;for(;0<b-x;)_=Vi(_),b--;for(;x--;){if(w===_||_!==null&&w===_.alternate)break t;w=Vi(w),_=Vi(_)}w=null}else w=null;m!==null&&Fv(d,f,m,w,!1),v!==null&&T!==null&&Fv(d,T,v,w,!0)}}e:{if(f=c?Xi(c):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var D=mC;else if(Cv(f))if(CT)D=vC;else{D=yC;var L=gC}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(D=_C);if(D&&(D=D(t,c))){AT(d,D,n,h);break e}L&&L(t,f,c),t==="focusout"&&(L=f._wrapperState)&&L.controlled&&f.type==="number"&&gp(f,"number",f.value)}switch(L=c?Xi(c):window,t){case"focusin":(Cv(L)||L.contentEditable==="true")&&(Ki=L,Pp=c,Qa=null);break;case"focusout":Qa=Pp=Ki=null;break;case"mousedown":Ap=!0;break;case"contextmenu":case"mouseup":case"dragend":Ap=!1,Mv(d,n,h);break;case"selectionchange":if(EC)break;case"keydown":case"keyup":Mv(d,n,h)}var I;if(fg)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Gi?kT(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(ST&&n.locale!=="ko"&&(Gi||y!=="onCompositionStart"?y==="onCompositionEnd"&&Gi&&(I=IT()):(Zr=h,ug="value"in Zr?Zr.value:Zr.textContent,Gi=!0)),L=Qu(c,y),0<L.length&&(y=new Sv(y,t,null,n,h),d.push({event:y,listeners:L}),I?y.data=I:(I=PT(n),I!==null&&(y.data=I)))),(I=uC?hC(t,n):dC(t,n))&&(c=Qu(c,"onBeforeInput"),0<c.length&&(h=new Sv("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:c}),h.data=I))}UT(d,e)})}function bl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Qu(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=yl(t,n),i!=null&&r.unshift(bl(t,i,s)),i=yl(t,e),i!=null&&r.push(bl(t,i,s))),t=t.return}return r}function Vi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Fv(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=yl(n,i),l!=null&&o.unshift(bl(n,l,a))):s||(l=yl(n,i),l!=null&&o.push(bl(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var SC=/\r\n?/g,kC=/\u0000|\uFFFD/g;function jv(t){return(typeof t=="string"?t:""+t).replace(SC,`
`).replace(kC,"")}function Uc(t,e,n){if(e=jv(e),jv(t)!==e&&n)throw Error(B(425))}function Xu(){}var Cp=null,Rp=null;function Np(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Dp=typeof setTimeout=="function"?setTimeout:void 0,PC=typeof clearTimeout=="function"?clearTimeout:void 0,Uv=typeof Promise=="function"?Promise:void 0,AC=typeof queueMicrotask=="function"?queueMicrotask:typeof Uv<"u"?function(t){return Uv.resolve(null).then(t).catch(CC)}:Dp;function CC(t){setTimeout(function(){throw t})}function Tf(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),wl(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);wl(e)}function us(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function zv(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var zo=Math.random().toString(36).slice(2),Wn="__reactFiber$"+zo,Il="__reactProps$"+zo,Er="__reactContainer$"+zo,Op="__reactEvents$"+zo,RC="__reactListeners$"+zo,NC="__reactHandles$"+zo;function ti(t){var e=t[Wn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Er]||n[Wn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=zv(t);t!==null;){if(n=t[Wn])return n;t=zv(t)}return e}t=n,n=t.parentNode}return null}function tc(t){return t=t[Wn]||t[Er],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Xi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(B(33))}function Xh(t){return t[Il]||null}var Mp=[],Ji=-1;function Os(t){return{current:t}}function Pe(t){0>Ji||(t.current=Mp[Ji],Mp[Ji]=null,Ji--)}function Ee(t,e){Ji++,Mp[Ji]=t.current,t.current=e}var Ts={},kt=Os(Ts),Ht=Os(!1),hi=Ts;function Eo(t,e){var n=t.type.contextTypes;if(!n)return Ts;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function $t(t){return t=t.childContextTypes,t!=null}function Ju(){Pe(Ht),Pe(kt)}function Bv(t,e,n){if(kt.current!==Ts)throw Error(B(168));Ee(kt,e),Ee(Ht,n)}function BT(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(B(108,gA(t)||"Unknown",s));return Oe({},n,r)}function Zu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ts,hi=kt.current,Ee(kt,t),Ee(Ht,Ht.current),!0}function Wv(t,e,n){var r=t.stateNode;if(!r)throw Error(B(169));n?(t=BT(t,e,hi),r.__reactInternalMemoizedMergedChildContext=t,Pe(Ht),Pe(kt),Ee(kt,t)):Pe(Ht),Ee(Ht,n)}var pr=null,Jh=!1,bf=!1;function WT(t){pr===null?pr=[t]:pr.push(t)}function DC(t){Jh=!0,WT(t)}function Ms(){if(!bf&&pr!==null){bf=!0;var t=0,e=_e;try{var n=pr;for(_e=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}pr=null,Jh=!1}catch(s){throw pr!==null&&(pr=pr.slice(t+1)),pT(og,Ms),s}finally{_e=e,bf=!1}}return null}var Zi=[],eo=0,eh=null,th=0,on=[],an=0,di=null,gr=1,yr="";function Ks(t,e){Zi[eo++]=th,Zi[eo++]=eh,eh=t,th=e}function HT(t,e,n){on[an++]=gr,on[an++]=yr,on[an++]=di,di=t;var r=gr;t=yr;var s=32-Sn(r)-1;r&=~(1<<s),n+=1;var i=32-Sn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,gr=1<<32-Sn(e)+s|n<<s|r,yr=i+t}else gr=1<<i|n<<s|r,yr=t}function mg(t){t.return!==null&&(Ks(t,1),HT(t,1,0))}function gg(t){for(;t===eh;)eh=Zi[--eo],Zi[eo]=null,th=Zi[--eo],Zi[eo]=null;for(;t===di;)di=on[--an],on[an]=null,yr=on[--an],on[an]=null,gr=on[--an],on[an]=null}var en=null,Jt=null,Ae=!1,En=null;function $T(t,e){var n=un(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Hv(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,en=t,Jt=us(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,en=t,Jt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=di!==null?{id:gr,overflow:yr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=un(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,en=t,Jt=null,!0):!1;default:return!1}}function Lp(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Vp(t){if(Ae){var e=Jt;if(e){var n=e;if(!Hv(t,e)){if(Lp(t))throw Error(B(418));e=us(n.nextSibling);var r=en;e&&Hv(t,e)?$T(r,n):(t.flags=t.flags&-4097|2,Ae=!1,en=t)}}else{if(Lp(t))throw Error(B(418));t.flags=t.flags&-4097|2,Ae=!1,en=t}}}function $v(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;en=t}function zc(t){if(t!==en)return!1;if(!Ae)return $v(t),Ae=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Np(t.type,t.memoizedProps)),e&&(e=Jt)){if(Lp(t))throw qT(),Error(B(418));for(;e;)$T(t,e),e=us(e.nextSibling)}if($v(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(B(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Jt=us(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Jt=null}}else Jt=en?us(t.stateNode.nextSibling):null;return!0}function qT(){for(var t=Jt;t;)t=us(t.nextSibling)}function To(){Jt=en=null,Ae=!1}function yg(t){En===null?En=[t]:En.push(t)}var OC=Cr.ReactCurrentBatchConfig;function xa(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(B(309));var r=n.stateNode}if(!r)throw Error(B(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(B(284));if(!n._owner)throw Error(B(290,t))}return t}function Bc(t,e){throw t=Object.prototype.toString.call(e),Error(B(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function qv(t){var e=t._init;return e(t._payload)}function YT(t){function e(_,x){if(t){var b=_.deletions;b===null?(_.deletions=[x],_.flags|=16):b.push(x)}}function n(_,x){if(!t)return null;for(;x!==null;)e(_,x),x=x.sibling;return null}function r(_,x){for(_=new Map;x!==null;)x.key!==null?_.set(x.key,x):_.set(x.index,x),x=x.sibling;return _}function s(_,x){return _=ps(_,x),_.index=0,_.sibling=null,_}function i(_,x,b){return _.index=b,t?(b=_.alternate,b!==null?(b=b.index,b<x?(_.flags|=2,x):b):(_.flags|=2,x)):(_.flags|=1048576,x)}function o(_){return t&&_.alternate===null&&(_.flags|=2),_}function a(_,x,b,R){return x===null||x.tag!==6?(x=Rf(b,_.mode,R),x.return=_,x):(x=s(x,b),x.return=_,x)}function l(_,x,b,R){var D=b.type;return D===Yi?h(_,x,b.props.children,R,b.key):x!==null&&(x.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Hr&&qv(D)===x.type)?(R=s(x,b.props),R.ref=xa(_,x,b),R.return=_,R):(R=ku(b.type,b.key,b.props,null,_.mode,R),R.ref=xa(_,x,b),R.return=_,R)}function c(_,x,b,R){return x===null||x.tag!==4||x.stateNode.containerInfo!==b.containerInfo||x.stateNode.implementation!==b.implementation?(x=Nf(b,_.mode,R),x.return=_,x):(x=s(x,b.children||[]),x.return=_,x)}function h(_,x,b,R,D){return x===null||x.tag!==7?(x=li(b,_.mode,R,D),x.return=_,x):(x=s(x,b),x.return=_,x)}function d(_,x,b){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Rf(""+x,_.mode,b),x.return=_,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Rc:return b=ku(x.type,x.key,x.props,null,_.mode,b),b.ref=xa(_,null,x),b.return=_,b;case qi:return x=Nf(x,_.mode,b),x.return=_,x;case Hr:var R=x._init;return d(_,R(x._payload),b)}if(Ma(x)||ga(x))return x=li(x,_.mode,b,null),x.return=_,x;Bc(_,x)}return null}function f(_,x,b,R){var D=x!==null?x.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return D!==null?null:a(_,x,""+b,R);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Rc:return b.key===D?l(_,x,b,R):null;case qi:return b.key===D?c(_,x,b,R):null;case Hr:return D=b._init,f(_,x,D(b._payload),R)}if(Ma(b)||ga(b))return D!==null?null:h(_,x,b,R,null);Bc(_,b)}return null}function m(_,x,b,R,D){if(typeof R=="string"&&R!==""||typeof R=="number")return _=_.get(b)||null,a(x,_,""+R,D);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Rc:return _=_.get(R.key===null?b:R.key)||null,l(x,_,R,D);case qi:return _=_.get(R.key===null?b:R.key)||null,c(x,_,R,D);case Hr:var L=R._init;return m(_,x,b,L(R._payload),D)}if(Ma(R)||ga(R))return _=_.get(b)||null,h(x,_,R,D,null);Bc(x,R)}return null}function v(_,x,b,R){for(var D=null,L=null,I=x,y=x=0,k=null;I!==null&&y<b.length;y++){I.index>y?(k=I,I=null):k=I.sibling;var P=f(_,I,b[y],R);if(P===null){I===null&&(I=k);break}t&&I&&P.alternate===null&&e(_,I),x=i(P,x,y),L===null?D=P:L.sibling=P,L=P,I=k}if(y===b.length)return n(_,I),Ae&&Ks(_,y),D;if(I===null){for(;y<b.length;y++)I=d(_,b[y],R),I!==null&&(x=i(I,x,y),L===null?D=I:L.sibling=I,L=I);return Ae&&Ks(_,y),D}for(I=r(_,I);y<b.length;y++)k=m(I,_,y,b[y],R),k!==null&&(t&&k.alternate!==null&&I.delete(k.key===null?y:k.key),x=i(k,x,y),L===null?D=k:L.sibling=k,L=k);return t&&I.forEach(function(A){return e(_,A)}),Ae&&Ks(_,y),D}function w(_,x,b,R){var D=ga(b);if(typeof D!="function")throw Error(B(150));if(b=D.call(b),b==null)throw Error(B(151));for(var L=D=null,I=x,y=x=0,k=null,P=b.next();I!==null&&!P.done;y++,P=b.next()){I.index>y?(k=I,I=null):k=I.sibling;var A=f(_,I,P.value,R);if(A===null){I===null&&(I=k);break}t&&I&&A.alternate===null&&e(_,I),x=i(A,x,y),L===null?D=A:L.sibling=A,L=A,I=k}if(P.done)return n(_,I),Ae&&Ks(_,y),D;if(I===null){for(;!P.done;y++,P=b.next())P=d(_,P.value,R),P!==null&&(x=i(P,x,y),L===null?D=P:L.sibling=P,L=P);return Ae&&Ks(_,y),D}for(I=r(_,I);!P.done;y++,P=b.next())P=m(I,_,y,P.value,R),P!==null&&(t&&P.alternate!==null&&I.delete(P.key===null?y:P.key),x=i(P,x,y),L===null?D=P:L.sibling=P,L=P);return t&&I.forEach(function(N){return e(_,N)}),Ae&&Ks(_,y),D}function T(_,x,b,R){if(typeof b=="object"&&b!==null&&b.type===Yi&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Rc:e:{for(var D=b.key,L=x;L!==null;){if(L.key===D){if(D=b.type,D===Yi){if(L.tag===7){n(_,L.sibling),x=s(L,b.props.children),x.return=_,_=x;break e}}else if(L.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Hr&&qv(D)===L.type){n(_,L.sibling),x=s(L,b.props),x.ref=xa(_,L,b),x.return=_,_=x;break e}n(_,L);break}else e(_,L);L=L.sibling}b.type===Yi?(x=li(b.props.children,_.mode,R,b.key),x.return=_,_=x):(R=ku(b.type,b.key,b.props,null,_.mode,R),R.ref=xa(_,x,b),R.return=_,_=R)}return o(_);case qi:e:{for(L=b.key;x!==null;){if(x.key===L)if(x.tag===4&&x.stateNode.containerInfo===b.containerInfo&&x.stateNode.implementation===b.implementation){n(_,x.sibling),x=s(x,b.children||[]),x.return=_,_=x;break e}else{n(_,x);break}else e(_,x);x=x.sibling}x=Nf(b,_.mode,R),x.return=_,_=x}return o(_);case Hr:return L=b._init,T(_,x,L(b._payload),R)}if(Ma(b))return v(_,x,b,R);if(ga(b))return w(_,x,b,R);Bc(_,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,x!==null&&x.tag===6?(n(_,x.sibling),x=s(x,b),x.return=_,_=x):(n(_,x),x=Rf(b,_.mode,R),x.return=_,_=x),o(_)):n(_,x)}return T}var bo=YT(!0),GT=YT(!1),nh=Os(null),rh=null,to=null,_g=null;function vg(){_g=to=rh=null}function wg(t){var e=nh.current;Pe(nh),t._currentValue=e}function Fp(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function uo(t,e){rh=t,_g=to=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Bt=!0),t.firstContext=null)}function fn(t){var e=t._currentValue;if(_g!==t)if(t={context:t,memoizedValue:e,next:null},to===null){if(rh===null)throw Error(B(308));to=t,rh.dependencies={lanes:0,firstContext:t}}else to=to.next=t;return e}var ni=null;function xg(t){ni===null?ni=[t]:ni.push(t)}function KT(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,xg(e)):(n.next=s.next,s.next=n),e.interleaved=n,Tr(t,r)}function Tr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var $r=!1;function Eg(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function QT(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function wr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function hs(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,fe&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Tr(t,n)}return s=r.interleaved,s===null?(e.next=e,xg(r)):(e.next=s.next,s.next=e),r.interleaved=e,Tr(t,n)}function xu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ag(t,n)}}function Yv(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function sh(t,e,n,r){var s=t.updateQueue;$r=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(i!==null){var d=s.baseState;o=0,h=c=l=null,a=i;do{var f=a.lane,m=a.eventTime;if((r&f)===f){h!==null&&(h=h.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=t,w=a;switch(f=e,m=n,w.tag){case 1:if(v=w.payload,typeof v=="function"){d=v.call(m,d,f);break e}d=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=w.payload,f=typeof v=="function"?v.call(m,d,f):v,f==null)break e;d=Oe({},d,f);break e;case 2:$r=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else m={eventTime:m,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=m,l=d):h=h.next=m,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(h===null&&(l=d),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);pi|=o,t.lanes=o,t.memoizedState=d}}function Gv(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(B(191,s));s.call(r)}}}var nc={},Gn=Os(nc),Sl=Os(nc),kl=Os(nc);function ri(t){if(t===nc)throw Error(B(174));return t}function Tg(t,e){switch(Ee(kl,e),Ee(Sl,t),Ee(Gn,nc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:_p(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=_p(e,t)}Pe(Gn),Ee(Gn,e)}function Io(){Pe(Gn),Pe(Sl),Pe(kl)}function XT(t){ri(kl.current);var e=ri(Gn.current),n=_p(e,t.type);e!==n&&(Ee(Sl,t),Ee(Gn,n))}function bg(t){Sl.current===t&&(Pe(Gn),Pe(Sl))}var Ce=Os(0);function ih(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var If=[];function Ig(){for(var t=0;t<If.length;t++)If[t]._workInProgressVersionPrimary=null;If.length=0}var Eu=Cr.ReactCurrentDispatcher,Sf=Cr.ReactCurrentBatchConfig,fi=0,Ne=null,rt=null,ut=null,oh=!1,Xa=!1,Pl=0,MC=0;function wt(){throw Error(B(321))}function Sg(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Cn(t[n],e[n]))return!1;return!0}function kg(t,e,n,r,s,i){if(fi=i,Ne=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Eu.current=t===null||t.memoizedState===null?jC:UC,t=n(r,s),Xa){i=0;do{if(Xa=!1,Pl=0,25<=i)throw Error(B(301));i+=1,ut=rt=null,e.updateQueue=null,Eu.current=zC,t=n(r,s)}while(Xa)}if(Eu.current=ah,e=rt!==null&&rt.next!==null,fi=0,ut=rt=Ne=null,oh=!1,e)throw Error(B(300));return t}function Pg(){var t=Pl!==0;return Pl=0,t}function jn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ut===null?Ne.memoizedState=ut=t:ut=ut.next=t,ut}function pn(){if(rt===null){var t=Ne.alternate;t=t!==null?t.memoizedState:null}else t=rt.next;var e=ut===null?Ne.memoizedState:ut.next;if(e!==null)ut=e,rt=t;else{if(t===null)throw Error(B(310));rt=t,t={memoizedState:rt.memoizedState,baseState:rt.baseState,baseQueue:rt.baseQueue,queue:rt.queue,next:null},ut===null?Ne.memoizedState=ut=t:ut=ut.next=t}return ut}function Al(t,e){return typeof e=="function"?e(t):e}function kf(t){var e=pn(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=rt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var h=c.lane;if((fi&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,Ne.lanes|=h,pi|=h}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,Cn(r,e.memoizedState)||(Bt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Ne.lanes|=i,pi|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Pf(t){var e=pn(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Cn(i,e.memoizedState)||(Bt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function JT(){}function ZT(t,e){var n=Ne,r=pn(),s=e(),i=!Cn(r.memoizedState,s);if(i&&(r.memoizedState=s,Bt=!0),r=r.queue,Ag(nb.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||ut!==null&&ut.memoizedState.tag&1){if(n.flags|=2048,Cl(9,tb.bind(null,n,r,s,e),void 0,null),dt===null)throw Error(B(349));fi&30||eb(n,e,s)}return s}function eb(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ne.updateQueue,e===null?(e={lastEffect:null,stores:null},Ne.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function tb(t,e,n,r){e.value=n,e.getSnapshot=r,rb(e)&&sb(t)}function nb(t,e,n){return n(function(){rb(e)&&sb(t)})}function rb(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Cn(t,n)}catch{return!0}}function sb(t){var e=Tr(t,1);e!==null&&kn(e,t,1,-1)}function Kv(t){var e=jn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Al,lastRenderedState:t},e.queue=t,t=t.dispatch=FC.bind(null,Ne,t),[e.memoizedState,t]}function Cl(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ne.updateQueue,e===null?(e={lastEffect:null,stores:null},Ne.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function ib(){return pn().memoizedState}function Tu(t,e,n,r){var s=jn();Ne.flags|=t,s.memoizedState=Cl(1|e,n,void 0,r===void 0?null:r)}function Zh(t,e,n,r){var s=pn();r=r===void 0?null:r;var i=void 0;if(rt!==null){var o=rt.memoizedState;if(i=o.destroy,r!==null&&Sg(r,o.deps)){s.memoizedState=Cl(e,n,i,r);return}}Ne.flags|=t,s.memoizedState=Cl(1|e,n,i,r)}function Qv(t,e){return Tu(8390656,8,t,e)}function Ag(t,e){return Zh(2048,8,t,e)}function ob(t,e){return Zh(4,2,t,e)}function ab(t,e){return Zh(4,4,t,e)}function lb(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function cb(t,e,n){return n=n!=null?n.concat([t]):null,Zh(4,4,lb.bind(null,e,t),n)}function Cg(){}function ub(t,e){var n=pn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Sg(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function hb(t,e){var n=pn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Sg(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function db(t,e,n){return fi&21?(Cn(n,e)||(n=yT(),Ne.lanes|=n,pi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Bt=!0),t.memoizedState=n)}function LC(t,e){var n=_e;_e=n!==0&&4>n?n:4,t(!0);var r=Sf.transition;Sf.transition={};try{t(!1),e()}finally{_e=n,Sf.transition=r}}function fb(){return pn().memoizedState}function VC(t,e,n){var r=fs(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},pb(t))mb(e,n);else if(n=KT(t,e,n,r),n!==null){var s=Ot();kn(n,t,r,s),gb(n,e,r)}}function FC(t,e,n){var r=fs(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(pb(t))mb(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Cn(a,o)){var l=e.interleaved;l===null?(s.next=s,xg(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=KT(t,e,s,r),n!==null&&(s=Ot(),kn(n,t,r,s),gb(n,e,r))}}function pb(t){var e=t.alternate;return t===Ne||e!==null&&e===Ne}function mb(t,e){Xa=oh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function gb(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ag(t,n)}}var ah={readContext:fn,useCallback:wt,useContext:wt,useEffect:wt,useImperativeHandle:wt,useInsertionEffect:wt,useLayoutEffect:wt,useMemo:wt,useReducer:wt,useRef:wt,useState:wt,useDebugValue:wt,useDeferredValue:wt,useTransition:wt,useMutableSource:wt,useSyncExternalStore:wt,useId:wt,unstable_isNewReconciler:!1},jC={readContext:fn,useCallback:function(t,e){return jn().memoizedState=[t,e===void 0?null:e],t},useContext:fn,useEffect:Qv,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Tu(4194308,4,lb.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Tu(4194308,4,t,e)},useInsertionEffect:function(t,e){return Tu(4,2,t,e)},useMemo:function(t,e){var n=jn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=jn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=VC.bind(null,Ne,t),[r.memoizedState,t]},useRef:function(t){var e=jn();return t={current:t},e.memoizedState=t},useState:Kv,useDebugValue:Cg,useDeferredValue:function(t){return jn().memoizedState=t},useTransition:function(){var t=Kv(!1),e=t[0];return t=LC.bind(null,t[1]),jn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ne,s=jn();if(Ae){if(n===void 0)throw Error(B(407));n=n()}else{if(n=e(),dt===null)throw Error(B(349));fi&30||eb(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Qv(nb.bind(null,r,i,t),[t]),r.flags|=2048,Cl(9,tb.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=jn(),e=dt.identifierPrefix;if(Ae){var n=yr,r=gr;n=(r&~(1<<32-Sn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Pl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=MC++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},UC={readContext:fn,useCallback:ub,useContext:fn,useEffect:Ag,useImperativeHandle:cb,useInsertionEffect:ob,useLayoutEffect:ab,useMemo:hb,useReducer:kf,useRef:ib,useState:function(){return kf(Al)},useDebugValue:Cg,useDeferredValue:function(t){var e=pn();return db(e,rt.memoizedState,t)},useTransition:function(){var t=kf(Al)[0],e=pn().memoizedState;return[t,e]},useMutableSource:JT,useSyncExternalStore:ZT,useId:fb,unstable_isNewReconciler:!1},zC={readContext:fn,useCallback:ub,useContext:fn,useEffect:Ag,useImperativeHandle:cb,useInsertionEffect:ob,useLayoutEffect:ab,useMemo:hb,useReducer:Pf,useRef:ib,useState:function(){return Pf(Al)},useDebugValue:Cg,useDeferredValue:function(t){var e=pn();return rt===null?e.memoizedState=t:db(e,rt.memoizedState,t)},useTransition:function(){var t=Pf(Al)[0],e=pn().memoizedState;return[t,e]},useMutableSource:JT,useSyncExternalStore:ZT,useId:fb,unstable_isNewReconciler:!1};function wn(t,e){if(t&&t.defaultProps){e=Oe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function jp(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Oe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ed={isMounted:function(t){return(t=t._reactInternals)?Ii(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ot(),s=fs(t),i=wr(r,s);i.payload=e,n!=null&&(i.callback=n),e=hs(t,i,s),e!==null&&(kn(e,t,s,r),xu(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ot(),s=fs(t),i=wr(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=hs(t,i,s),e!==null&&(kn(e,t,s,r),xu(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ot(),r=fs(t),s=wr(n,r);s.tag=2,e!=null&&(s.callback=e),e=hs(t,s,r),e!==null&&(kn(e,t,r,n),xu(e,t,r))}};function Xv(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!El(n,r)||!El(s,i):!0}function yb(t,e,n){var r=!1,s=Ts,i=e.contextType;return typeof i=="object"&&i!==null?i=fn(i):(s=$t(e)?hi:kt.current,r=e.contextTypes,i=(r=r!=null)?Eo(t,s):Ts),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ed,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Jv(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&ed.enqueueReplaceState(e,e.state,null)}function Up(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Eg(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=fn(i):(i=$t(e)?hi:kt.current,s.context=Eo(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(jp(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&ed.enqueueReplaceState(s,s.state,null),sh(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function So(t,e){try{var n="",r=e;do n+=mA(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Af(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function zp(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var BC=typeof WeakMap=="function"?WeakMap:Map;function _b(t,e,n){n=wr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ch||(ch=!0,Xp=r),zp(t,e)},n}function vb(t,e,n){n=wr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){zp(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){zp(t,e),typeof r!="function"&&(ds===null?ds=new Set([this]):ds.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Zv(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new BC;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=nR.bind(null,t,e,n),e.then(t,t))}function e0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function t0(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=wr(-1,1),e.tag=2,hs(n,e,1))),n.lanes|=1),t)}var WC=Cr.ReactCurrentOwner,Bt=!1;function Dt(t,e,n,r){e.child=t===null?GT(e,null,n,r):bo(e,t.child,n,r)}function n0(t,e,n,r,s){n=n.render;var i=e.ref;return uo(e,s),r=kg(t,e,n,r,i,s),n=Pg(),t!==null&&!Bt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,br(t,e,s)):(Ae&&n&&mg(e),e.flags|=1,Dt(t,e,r,s),e.child)}function r0(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Fg(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,wb(t,e,i,r,s)):(t=ku(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:El,n(o,r)&&t.ref===e.ref)return br(t,e,s)}return e.flags|=1,t=ps(i,r),t.ref=e.ref,t.return=e,e.child=t}function wb(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(El(i,r)&&t.ref===e.ref)if(Bt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Bt=!0);else return e.lanes=t.lanes,br(t,e,s)}return Bp(t,e,n,r,s)}function xb(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ee(ro,Xt),Xt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ee(ro,Xt),Xt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ee(ro,Xt),Xt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Ee(ro,Xt),Xt|=r;return Dt(t,e,s,n),e.child}function Eb(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Bp(t,e,n,r,s){var i=$t(n)?hi:kt.current;return i=Eo(e,i),uo(e,s),n=kg(t,e,n,r,i,s),r=Pg(),t!==null&&!Bt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,br(t,e,s)):(Ae&&r&&mg(e),e.flags|=1,Dt(t,e,n,s),e.child)}function s0(t,e,n,r,s){if($t(n)){var i=!0;Zu(e)}else i=!1;if(uo(e,s),e.stateNode===null)bu(t,e),yb(e,n,r),Up(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=fn(c):(c=$t(n)?hi:kt.current,c=Eo(e,c));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&Jv(e,o,r,c),$r=!1;var f=e.memoizedState;o.state=f,sh(e,r,o,s),l=e.memoizedState,a!==r||f!==l||Ht.current||$r?(typeof h=="function"&&(jp(e,n,h,r),l=e.memoizedState),(a=$r||Xv(e,n,a,r,f,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,QT(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:wn(e.type,a),o.props=c,d=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=fn(l):(l=$t(n)?hi:kt.current,l=Eo(e,l));var m=n.getDerivedStateFromProps;(h=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&Jv(e,o,r,l),$r=!1,f=e.memoizedState,o.state=f,sh(e,r,o,s);var v=e.memoizedState;a!==d||f!==v||Ht.current||$r?(typeof m=="function"&&(jp(e,n,m,r),v=e.memoizedState),(c=$r||Xv(e,n,c,r,f,v,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),o.props=r,o.state=v,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Wp(t,e,n,r,i,s)}function Wp(t,e,n,r,s,i){Eb(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Wv(e,n,!1),br(t,e,i);r=e.stateNode,WC.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=bo(e,t.child,null,i),e.child=bo(e,null,a,i)):Dt(t,e,a,i),e.memoizedState=r.state,s&&Wv(e,n,!0),e.child}function Tb(t){var e=t.stateNode;e.pendingContext?Bv(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Bv(t,e.context,!1),Tg(t,e.containerInfo)}function i0(t,e,n,r,s){return To(),yg(s),e.flags|=256,Dt(t,e,n,r),e.child}var Hp={dehydrated:null,treeContext:null,retryLane:0};function $p(t){return{baseLanes:t,cachePool:null,transitions:null}}function bb(t,e,n){var r=e.pendingProps,s=Ce.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ee(Ce,s&1),t===null)return Vp(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=rd(o,r,0,null),t=li(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=$p(n),e.memoizedState=Hp,t):Rg(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return HC(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=ps(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=ps(a,i):(i=li(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?$p(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Hp,r}return i=t.child,t=i.sibling,r=ps(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Rg(t,e){return e=rd({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Wc(t,e,n,r){return r!==null&&yg(r),bo(e,t.child,null,n),t=Rg(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function HC(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Af(Error(B(422))),Wc(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=rd({mode:"visible",children:r.children},s,0,null),i=li(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&bo(e,t.child,null,o),e.child.memoizedState=$p(o),e.memoizedState=Hp,i);if(!(e.mode&1))return Wc(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(B(419)),r=Af(i,r,void 0),Wc(t,e,o,r)}if(a=(o&t.childLanes)!==0,Bt||a){if(r=dt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Tr(t,s),kn(r,t,s,-1))}return Vg(),r=Af(Error(B(421))),Wc(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=rR.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Jt=us(s.nextSibling),en=e,Ae=!0,En=null,t!==null&&(on[an++]=gr,on[an++]=yr,on[an++]=di,gr=t.id,yr=t.overflow,di=e),e=Rg(e,r.children),e.flags|=4096,e)}function o0(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Fp(t.return,e,n)}function Cf(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Ib(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Dt(t,e,r.children,n),r=Ce.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&o0(t,n,e);else if(t.tag===19)o0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ee(Ce,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&ih(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Cf(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&ih(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Cf(e,!0,n,null,i);break;case"together":Cf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function bu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function br(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),pi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(B(153));if(e.child!==null){for(t=e.child,n=ps(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ps(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function $C(t,e,n){switch(e.tag){case 3:Tb(e),To();break;case 5:XT(e);break;case 1:$t(e.type)&&Zu(e);break;case 4:Tg(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Ee(nh,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ee(Ce,Ce.current&1),e.flags|=128,null):n&e.child.childLanes?bb(t,e,n):(Ee(Ce,Ce.current&1),t=br(t,e,n),t!==null?t.sibling:null);Ee(Ce,Ce.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Ib(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ee(Ce,Ce.current),r)break;return null;case 22:case 23:return e.lanes=0,xb(t,e,n)}return br(t,e,n)}var Sb,qp,kb,Pb;Sb=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};qp=function(){};kb=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,ri(Gn.current);var i=null;switch(n){case"input":s=pp(t,s),r=pp(t,r),i=[];break;case"select":s=Oe({},s,{value:void 0}),r=Oe({},r,{value:void 0}),i=[];break;case"textarea":s=yp(t,s),r=yp(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Xu)}vp(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(ml.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(ml.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Ie("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};Pb=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ea(t,e){if(!Ae)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function xt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function qC(t,e,n){var r=e.pendingProps;switch(gg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xt(e),null;case 1:return $t(e.type)&&Ju(),xt(e),null;case 3:return r=e.stateNode,Io(),Pe(Ht),Pe(kt),Ig(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(zc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,En!==null&&(em(En),En=null))),qp(t,e),xt(e),null;case 5:bg(e);var s=ri(kl.current);if(n=e.type,t!==null&&e.stateNode!=null)kb(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(B(166));return xt(e),null}if(t=ri(Gn.current),zc(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Wn]=e,r[Il]=i,t=(e.mode&1)!==0,n){case"dialog":Ie("cancel",r),Ie("close",r);break;case"iframe":case"object":case"embed":Ie("load",r);break;case"video":case"audio":for(s=0;s<Va.length;s++)Ie(Va[s],r);break;case"source":Ie("error",r);break;case"img":case"image":case"link":Ie("error",r),Ie("load",r);break;case"details":Ie("toggle",r);break;case"input":mv(r,i),Ie("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ie("invalid",r);break;case"textarea":yv(r,i),Ie("invalid",r)}vp(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Uc(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Uc(r.textContent,a,t),s=["children",""+a]):ml.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ie("scroll",r)}switch(n){case"input":Nc(r),gv(r,i,!0);break;case"textarea":Nc(r),_v(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Xu)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=nT(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Wn]=e,t[Il]=r,Sb(t,e,!1,!1),e.stateNode=t;e:{switch(o=wp(n,r),n){case"dialog":Ie("cancel",t),Ie("close",t),s=r;break;case"iframe":case"object":case"embed":Ie("load",t),s=r;break;case"video":case"audio":for(s=0;s<Va.length;s++)Ie(Va[s],t);s=r;break;case"source":Ie("error",t),s=r;break;case"img":case"image":case"link":Ie("error",t),Ie("load",t),s=r;break;case"details":Ie("toggle",t),s=r;break;case"input":mv(t,r),s=pp(t,r),Ie("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Oe({},r,{value:void 0}),Ie("invalid",t);break;case"textarea":yv(t,r),s=yp(t,r),Ie("invalid",t);break;default:s=r}vp(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?iT(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&rT(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&gl(t,l):typeof l=="number"&&gl(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ml.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Ie("scroll",t):l!=null&&tg(t,i,l,o))}switch(n){case"input":Nc(t),gv(t,r,!1);break;case"textarea":Nc(t),_v(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Es(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?oo(t,!!r.multiple,i,!1):r.defaultValue!=null&&oo(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Xu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return xt(e),null;case 6:if(t&&e.stateNode!=null)Pb(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(B(166));if(n=ri(kl.current),ri(Gn.current),zc(e)){if(r=e.stateNode,n=e.memoizedProps,r[Wn]=e,(i=r.nodeValue!==n)&&(t=en,t!==null))switch(t.tag){case 3:Uc(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Uc(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Wn]=e,e.stateNode=r}return xt(e),null;case 13:if(Pe(Ce),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ae&&Jt!==null&&e.mode&1&&!(e.flags&128))qT(),To(),e.flags|=98560,i=!1;else if(i=zc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(B(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(B(317));i[Wn]=e}else To(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;xt(e),i=!1}else En!==null&&(em(En),En=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ce.current&1?st===0&&(st=3):Vg())),e.updateQueue!==null&&(e.flags|=4),xt(e),null);case 4:return Io(),qp(t,e),t===null&&Tl(e.stateNode.containerInfo),xt(e),null;case 10:return wg(e.type._context),xt(e),null;case 17:return $t(e.type)&&Ju(),xt(e),null;case 19:if(Pe(Ce),i=e.memoizedState,i===null)return xt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Ea(i,!1);else{if(st!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=ih(t),o!==null){for(e.flags|=128,Ea(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ee(Ce,Ce.current&1|2),e.child}t=t.sibling}i.tail!==null&&$e()>ko&&(e.flags|=128,r=!0,Ea(i,!1),e.lanes=4194304)}else{if(!r)if(t=ih(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ea(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ae)return xt(e),null}else 2*$e()-i.renderingStartTime>ko&&n!==1073741824&&(e.flags|=128,r=!0,Ea(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=$e(),e.sibling=null,n=Ce.current,Ee(Ce,r?n&1|2:n&1),e):(xt(e),null);case 22:case 23:return Lg(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Xt&1073741824&&(xt(e),e.subtreeFlags&6&&(e.flags|=8192)):xt(e),null;case 24:return null;case 25:return null}throw Error(B(156,e.tag))}function YC(t,e){switch(gg(e),e.tag){case 1:return $t(e.type)&&Ju(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Io(),Pe(Ht),Pe(kt),Ig(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return bg(e),null;case 13:if(Pe(Ce),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(B(340));To()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Pe(Ce),null;case 4:return Io(),null;case 10:return wg(e.type._context),null;case 22:case 23:return Lg(),null;case 24:return null;default:return null}}var Hc=!1,bt=!1,GC=typeof WeakSet=="function"?WeakSet:Set,q=null;function no(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ve(t,e,r)}else n.current=null}function Yp(t,e,n){try{n()}catch(r){Ve(t,e,r)}}var a0=!1;function KC(t,e){if(Cp=Gu,t=DT(),pg(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,h=0,d=t,f=null;t:for(;;){for(var m;d!==n||s!==0&&d.nodeType!==3||(a=o+s),d!==i||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(m=d.firstChild)!==null;)f=d,d=m;for(;;){if(d===t)break t;if(f===n&&++c===s&&(a=o),f===i&&++h===r&&(l=o),(m=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Rp={focusedElem:t,selectionRange:n},Gu=!1,q=e;q!==null;)if(e=q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,q=t;else for(;q!==null;){e=q;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var w=v.memoizedProps,T=v.memoizedState,_=e.stateNode,x=_.getSnapshotBeforeUpdate(e.elementType===e.type?w:wn(e.type,w),T);_.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(B(163))}}catch(R){Ve(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,q=t;break}q=e.return}return v=a0,a0=!1,v}function Ja(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Yp(e,n,i)}s=s.next}while(s!==r)}}function td(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Gp(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Ab(t){var e=t.alternate;e!==null&&(t.alternate=null,Ab(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Wn],delete e[Il],delete e[Op],delete e[RC],delete e[NC])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Cb(t){return t.tag===5||t.tag===3||t.tag===4}function l0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Cb(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Kp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Xu));else if(r!==4&&(t=t.child,t!==null))for(Kp(t,e,n),t=t.sibling;t!==null;)Kp(t,e,n),t=t.sibling}function Qp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Qp(t,e,n),t=t.sibling;t!==null;)Qp(t,e,n),t=t.sibling}var ft=null,xn=!1;function Ur(t,e,n){for(n=n.child;n!==null;)Rb(t,e,n),n=n.sibling}function Rb(t,e,n){if(Yn&&typeof Yn.onCommitFiberUnmount=="function")try{Yn.onCommitFiberUnmount(Yh,n)}catch{}switch(n.tag){case 5:bt||no(n,e);case 6:var r=ft,s=xn;ft=null,Ur(t,e,n),ft=r,xn=s,ft!==null&&(xn?(t=ft,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ft.removeChild(n.stateNode));break;case 18:ft!==null&&(xn?(t=ft,n=n.stateNode,t.nodeType===8?Tf(t.parentNode,n):t.nodeType===1&&Tf(t,n),wl(t)):Tf(ft,n.stateNode));break;case 4:r=ft,s=xn,ft=n.stateNode.containerInfo,xn=!0,Ur(t,e,n),ft=r,xn=s;break;case 0:case 11:case 14:case 15:if(!bt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Yp(n,e,o),s=s.next}while(s!==r)}Ur(t,e,n);break;case 1:if(!bt&&(no(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ve(n,e,a)}Ur(t,e,n);break;case 21:Ur(t,e,n);break;case 22:n.mode&1?(bt=(r=bt)||n.memoizedState!==null,Ur(t,e,n),bt=r):Ur(t,e,n);break;default:Ur(t,e,n)}}function c0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new GC),e.forEach(function(r){var s=sR.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function _n(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:ft=a.stateNode,xn=!1;break e;case 3:ft=a.stateNode.containerInfo,xn=!0;break e;case 4:ft=a.stateNode.containerInfo,xn=!0;break e}a=a.return}if(ft===null)throw Error(B(160));Rb(i,o,s),ft=null,xn=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){Ve(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Nb(e,t),e=e.sibling}function Nb(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(_n(e,t),Ln(t),r&4){try{Ja(3,t,t.return),td(3,t)}catch(w){Ve(t,t.return,w)}try{Ja(5,t,t.return)}catch(w){Ve(t,t.return,w)}}break;case 1:_n(e,t),Ln(t),r&512&&n!==null&&no(n,n.return);break;case 5:if(_n(e,t),Ln(t),r&512&&n!==null&&no(n,n.return),t.flags&32){var s=t.stateNode;try{gl(s,"")}catch(w){Ve(t,t.return,w)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&eT(s,i),wp(a,o);var c=wp(a,i);for(o=0;o<l.length;o+=2){var h=l[o],d=l[o+1];h==="style"?iT(s,d):h==="dangerouslySetInnerHTML"?rT(s,d):h==="children"?gl(s,d):tg(s,h,d,c)}switch(a){case"input":mp(s,i);break;case"textarea":tT(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?oo(s,!!i.multiple,m,!1):f!==!!i.multiple&&(i.defaultValue!=null?oo(s,!!i.multiple,i.defaultValue,!0):oo(s,!!i.multiple,i.multiple?[]:"",!1))}s[Il]=i}catch(w){Ve(t,t.return,w)}}break;case 6:if(_n(e,t),Ln(t),r&4){if(t.stateNode===null)throw Error(B(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(w){Ve(t,t.return,w)}}break;case 3:if(_n(e,t),Ln(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{wl(e.containerInfo)}catch(w){Ve(t,t.return,w)}break;case 4:_n(e,t),Ln(t);break;case 13:_n(e,t),Ln(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Og=$e())),r&4&&c0(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(bt=(c=bt)||h,_n(e,t),bt=c):_n(e,t),Ln(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(q=t,h=t.child;h!==null;){for(d=q=h;q!==null;){switch(f=q,m=f.child,f.tag){case 0:case 11:case 14:case 15:Ja(4,f,f.return);break;case 1:no(f,f.return);var v=f.stateNode;if(typeof v.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(w){Ve(r,n,w)}}break;case 5:no(f,f.return);break;case 22:if(f.memoizedState!==null){h0(d);continue}}m!==null?(m.return=f,q=m):h0(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{s=d.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=sT("display",o))}catch(w){Ve(t,t.return,w)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(w){Ve(t,t.return,w)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:_n(e,t),Ln(t),r&4&&c0(t);break;case 21:break;default:_n(e,t),Ln(t)}}function Ln(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Cb(n)){var r=n;break e}n=n.return}throw Error(B(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(gl(s,""),r.flags&=-33);var i=l0(t);Qp(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=l0(t);Kp(t,a,o);break;default:throw Error(B(161))}}catch(l){Ve(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function QC(t,e,n){q=t,Db(t)}function Db(t,e,n){for(var r=(t.mode&1)!==0;q!==null;){var s=q,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Hc;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||bt;a=Hc;var c=bt;if(Hc=o,(bt=l)&&!c)for(q=s;q!==null;)o=q,l=o.child,o.tag===22&&o.memoizedState!==null?d0(s):l!==null?(l.return=o,q=l):d0(s);for(;i!==null;)q=i,Db(i),i=i.sibling;q=s,Hc=a,bt=c}u0(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,q=i):u0(t)}}function u0(t){for(;q!==null;){var e=q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:bt||td(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!bt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:wn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Gv(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Gv(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&wl(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(B(163))}bt||e.flags&512&&Gp(e)}catch(f){Ve(e,e.return,f)}}if(e===t){q=null;break}if(n=e.sibling,n!==null){n.return=e.return,q=n;break}q=e.return}}function h0(t){for(;q!==null;){var e=q;if(e===t){q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,q=n;break}q=e.return}}function d0(t){for(;q!==null;){var e=q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{td(4,e)}catch(l){Ve(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){Ve(e,s,l)}}var i=e.return;try{Gp(e)}catch(l){Ve(e,i,l)}break;case 5:var o=e.return;try{Gp(e)}catch(l){Ve(e,o,l)}}}catch(l){Ve(e,e.return,l)}if(e===t){q=null;break}var a=e.sibling;if(a!==null){a.return=e.return,q=a;break}q=e.return}}var XC=Math.ceil,lh=Cr.ReactCurrentDispatcher,Ng=Cr.ReactCurrentOwner,dn=Cr.ReactCurrentBatchConfig,fe=0,dt=null,Xe=null,gt=0,Xt=0,ro=Os(0),st=0,Rl=null,pi=0,nd=0,Dg=0,Za=null,jt=null,Og=0,ko=1/0,fr=null,ch=!1,Xp=null,ds=null,$c=!1,es=null,uh=0,el=0,Jp=null,Iu=-1,Su=0;function Ot(){return fe&6?$e():Iu!==-1?Iu:Iu=$e()}function fs(t){return t.mode&1?fe&2&&gt!==0?gt&-gt:OC.transition!==null?(Su===0&&(Su=yT()),Su):(t=_e,t!==0||(t=window.event,t=t===void 0?16:bT(t.type)),t):1}function kn(t,e,n,r){if(50<el)throw el=0,Jp=null,Error(B(185));Zl(t,n,r),(!(fe&2)||t!==dt)&&(t===dt&&(!(fe&2)&&(nd|=n),st===4&&Yr(t,gt)),qt(t,r),n===1&&fe===0&&!(e.mode&1)&&(ko=$e()+500,Jh&&Ms()))}function qt(t,e){var n=t.callbackNode;OA(t,e);var r=Yu(t,t===dt?gt:0);if(r===0)n!==null&&xv(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&xv(n),e===1)t.tag===0?DC(f0.bind(null,t)):WT(f0.bind(null,t)),AC(function(){!(fe&6)&&Ms()}),n=null;else{switch(_T(r)){case 1:n=og;break;case 4:n=mT;break;case 16:n=qu;break;case 536870912:n=gT;break;default:n=qu}n=zb(n,Ob.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Ob(t,e){if(Iu=-1,Su=0,fe&6)throw Error(B(327));var n=t.callbackNode;if(ho()&&t.callbackNode!==n)return null;var r=Yu(t,t===dt?gt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=hh(t,r);else{e=r;var s=fe;fe|=2;var i=Lb();(dt!==t||gt!==e)&&(fr=null,ko=$e()+500,ai(t,e));do try{eR();break}catch(a){Mb(t,a)}while(!0);vg(),lh.current=i,fe=s,Xe!==null?e=0:(dt=null,gt=0,e=st)}if(e!==0){if(e===2&&(s=Ip(t),s!==0&&(r=s,e=Zp(t,s))),e===1)throw n=Rl,ai(t,0),Yr(t,r),qt(t,$e()),n;if(e===6)Yr(t,r);else{if(s=t.current.alternate,!(r&30)&&!JC(s)&&(e=hh(t,r),e===2&&(i=Ip(t),i!==0&&(r=i,e=Zp(t,i))),e===1))throw n=Rl,ai(t,0),Yr(t,r),qt(t,$e()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(B(345));case 2:Qs(t,jt,fr);break;case 3:if(Yr(t,r),(r&130023424)===r&&(e=Og+500-$e(),10<e)){if(Yu(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Ot(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Dp(Qs.bind(null,t,jt,fr),e);break}Qs(t,jt,fr);break;case 4:if(Yr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Sn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=$e()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*XC(r/1960))-r,10<r){t.timeoutHandle=Dp(Qs.bind(null,t,jt,fr),r);break}Qs(t,jt,fr);break;case 5:Qs(t,jt,fr);break;default:throw Error(B(329))}}}return qt(t,$e()),t.callbackNode===n?Ob.bind(null,t):null}function Zp(t,e){var n=Za;return t.current.memoizedState.isDehydrated&&(ai(t,e).flags|=256),t=hh(t,e),t!==2&&(e=jt,jt=n,e!==null&&em(e)),t}function em(t){jt===null?jt=t:jt.push.apply(jt,t)}function JC(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Cn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Yr(t,e){for(e&=~Dg,e&=~nd,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Sn(e),r=1<<n;t[n]=-1,e&=~r}}function f0(t){if(fe&6)throw Error(B(327));ho();var e=Yu(t,0);if(!(e&1))return qt(t,$e()),null;var n=hh(t,e);if(t.tag!==0&&n===2){var r=Ip(t);r!==0&&(e=r,n=Zp(t,r))}if(n===1)throw n=Rl,ai(t,0),Yr(t,e),qt(t,$e()),n;if(n===6)throw Error(B(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Qs(t,jt,fr),qt(t,$e()),null}function Mg(t,e){var n=fe;fe|=1;try{return t(e)}finally{fe=n,fe===0&&(ko=$e()+500,Jh&&Ms())}}function mi(t){es!==null&&es.tag===0&&!(fe&6)&&ho();var e=fe;fe|=1;var n=dn.transition,r=_e;try{if(dn.transition=null,_e=1,t)return t()}finally{_e=r,dn.transition=n,fe=e,!(fe&6)&&Ms()}}function Lg(){Xt=ro.current,Pe(ro)}function ai(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,PC(n)),Xe!==null)for(n=Xe.return;n!==null;){var r=n;switch(gg(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ju();break;case 3:Io(),Pe(Ht),Pe(kt),Ig();break;case 5:bg(r);break;case 4:Io();break;case 13:Pe(Ce);break;case 19:Pe(Ce);break;case 10:wg(r.type._context);break;case 22:case 23:Lg()}n=n.return}if(dt=t,Xe=t=ps(t.current,null),gt=Xt=e,st=0,Rl=null,Dg=nd=pi=0,jt=Za=null,ni!==null){for(e=0;e<ni.length;e++)if(n=ni[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}ni=null}return t}function Mb(t,e){do{var n=Xe;try{if(vg(),Eu.current=ah,oh){for(var r=Ne.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}oh=!1}if(fi=0,ut=rt=Ne=null,Xa=!1,Pl=0,Ng.current=null,n===null||n.return===null){st=1,Rl=e,Xe=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=gt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var m=e0(o);if(m!==null){m.flags&=-257,t0(m,o,a,i,e),m.mode&1&&Zv(i,c,e),e=m,l=c;var v=e.updateQueue;if(v===null){var w=new Set;w.add(l),e.updateQueue=w}else v.add(l);break e}else{if(!(e&1)){Zv(i,c,e),Vg();break e}l=Error(B(426))}}else if(Ae&&a.mode&1){var T=e0(o);if(T!==null){!(T.flags&65536)&&(T.flags|=256),t0(T,o,a,i,e),yg(So(l,a));break e}}i=l=So(l,a),st!==4&&(st=2),Za===null?Za=[i]:Za.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var _=_b(i,l,e);Yv(i,_);break e;case 1:a=l;var x=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof x.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(ds===null||!ds.has(b)))){i.flags|=65536,e&=-e,i.lanes|=e;var R=vb(i,a,e);Yv(i,R);break e}}i=i.return}while(i!==null)}Fb(n)}catch(D){e=D,Xe===n&&n!==null&&(Xe=n=n.return);continue}break}while(!0)}function Lb(){var t=lh.current;return lh.current=ah,t===null?ah:t}function Vg(){(st===0||st===3||st===2)&&(st=4),dt===null||!(pi&268435455)&&!(nd&268435455)||Yr(dt,gt)}function hh(t,e){var n=fe;fe|=2;var r=Lb();(dt!==t||gt!==e)&&(fr=null,ai(t,e));do try{ZC();break}catch(s){Mb(t,s)}while(!0);if(vg(),fe=n,lh.current=r,Xe!==null)throw Error(B(261));return dt=null,gt=0,st}function ZC(){for(;Xe!==null;)Vb(Xe)}function eR(){for(;Xe!==null&&!IA();)Vb(Xe)}function Vb(t){var e=Ub(t.alternate,t,Xt);t.memoizedProps=t.pendingProps,e===null?Fb(t):Xe=e,Ng.current=null}function Fb(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=YC(n,e),n!==null){n.flags&=32767,Xe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{st=6,Xe=null;return}}else if(n=qC(n,e,Xt),n!==null){Xe=n;return}if(e=e.sibling,e!==null){Xe=e;return}Xe=e=t}while(e!==null);st===0&&(st=5)}function Qs(t,e,n){var r=_e,s=dn.transition;try{dn.transition=null,_e=1,tR(t,e,n,r)}finally{dn.transition=s,_e=r}return null}function tR(t,e,n,r){do ho();while(es!==null);if(fe&6)throw Error(B(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(B(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(MA(t,i),t===dt&&(Xe=dt=null,gt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||$c||($c=!0,zb(qu,function(){return ho(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=dn.transition,dn.transition=null;var o=_e;_e=1;var a=fe;fe|=4,Ng.current=null,KC(t,n),Nb(n,t),xC(Rp),Gu=!!Cp,Rp=Cp=null,t.current=n,QC(n),SA(),fe=a,_e=o,dn.transition=i}else t.current=n;if($c&&($c=!1,es=t,uh=s),i=t.pendingLanes,i===0&&(ds=null),AA(n.stateNode),qt(t,$e()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(ch)throw ch=!1,t=Xp,Xp=null,t;return uh&1&&t.tag!==0&&ho(),i=t.pendingLanes,i&1?t===Jp?el++:(el=0,Jp=t):el=0,Ms(),null}function ho(){if(es!==null){var t=_T(uh),e=dn.transition,n=_e;try{if(dn.transition=null,_e=16>t?16:t,es===null)var r=!1;else{if(t=es,es=null,uh=0,fe&6)throw Error(B(331));var s=fe;for(fe|=4,q=t.current;q!==null;){var i=q,o=i.child;if(q.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(q=c;q!==null;){var h=q;switch(h.tag){case 0:case 11:case 15:Ja(8,h,i)}var d=h.child;if(d!==null)d.return=h,q=d;else for(;q!==null;){h=q;var f=h.sibling,m=h.return;if(Ab(h),h===c){q=null;break}if(f!==null){f.return=m,q=f;break}q=m}}}var v=i.alternate;if(v!==null){var w=v.child;if(w!==null){v.child=null;do{var T=w.sibling;w.sibling=null,w=T}while(w!==null)}}q=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,q=o;else e:for(;q!==null;){if(i=q,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ja(9,i,i.return)}var _=i.sibling;if(_!==null){_.return=i.return,q=_;break e}q=i.return}}var x=t.current;for(q=x;q!==null;){o=q;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,q=b;else e:for(o=x;q!==null;){if(a=q,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:td(9,a)}}catch(D){Ve(a,a.return,D)}if(a===o){q=null;break e}var R=a.sibling;if(R!==null){R.return=a.return,q=R;break e}q=a.return}}if(fe=s,Ms(),Yn&&typeof Yn.onPostCommitFiberRoot=="function")try{Yn.onPostCommitFiberRoot(Yh,t)}catch{}r=!0}return r}finally{_e=n,dn.transition=e}}return!1}function p0(t,e,n){e=So(n,e),e=_b(t,e,1),t=hs(t,e,1),e=Ot(),t!==null&&(Zl(t,1,e),qt(t,e))}function Ve(t,e,n){if(t.tag===3)p0(t,t,n);else for(;e!==null;){if(e.tag===3){p0(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ds===null||!ds.has(r))){t=So(n,t),t=vb(e,t,1),e=hs(e,t,1),t=Ot(),e!==null&&(Zl(e,1,t),qt(e,t));break}}e=e.return}}function nR(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ot(),t.pingedLanes|=t.suspendedLanes&n,dt===t&&(gt&n)===n&&(st===4||st===3&&(gt&130023424)===gt&&500>$e()-Og?ai(t,0):Dg|=n),qt(t,e)}function jb(t,e){e===0&&(t.mode&1?(e=Mc,Mc<<=1,!(Mc&130023424)&&(Mc=4194304)):e=1);var n=Ot();t=Tr(t,e),t!==null&&(Zl(t,e,n),qt(t,n))}function rR(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),jb(t,n)}function sR(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(B(314))}r!==null&&r.delete(e),jb(t,n)}var Ub;Ub=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ht.current)Bt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Bt=!1,$C(t,e,n);Bt=!!(t.flags&131072)}else Bt=!1,Ae&&e.flags&1048576&&HT(e,th,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;bu(t,e),t=e.pendingProps;var s=Eo(e,kt.current);uo(e,n),s=kg(null,e,r,t,s,n);var i=Pg();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,$t(r)?(i=!0,Zu(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Eg(e),s.updater=ed,e.stateNode=s,s._reactInternals=e,Up(e,r,t,n),e=Wp(null,e,r,!0,i,n)):(e.tag=0,Ae&&i&&mg(e),Dt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(bu(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=oR(r),t=wn(r,t),s){case 0:e=Bp(null,e,r,t,n);break e;case 1:e=s0(null,e,r,t,n);break e;case 11:e=n0(null,e,r,t,n);break e;case 14:e=r0(null,e,r,wn(r.type,t),n);break e}throw Error(B(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:wn(r,s),Bp(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:wn(r,s),s0(t,e,r,s,n);case 3:e:{if(Tb(e),t===null)throw Error(B(387));r=e.pendingProps,i=e.memoizedState,s=i.element,QT(t,e),sh(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=So(Error(B(423)),e),e=i0(t,e,r,n,s);break e}else if(r!==s){s=So(Error(B(424)),e),e=i0(t,e,r,n,s);break e}else for(Jt=us(e.stateNode.containerInfo.firstChild),en=e,Ae=!0,En=null,n=GT(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(To(),r===s){e=br(t,e,n);break e}Dt(t,e,r,n)}e=e.child}return e;case 5:return XT(e),t===null&&Vp(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Np(r,s)?o=null:i!==null&&Np(r,i)&&(e.flags|=32),Eb(t,e),Dt(t,e,o,n),e.child;case 6:return t===null&&Vp(e),null;case 13:return bb(t,e,n);case 4:return Tg(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=bo(e,null,r,n):Dt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:wn(r,s),n0(t,e,r,s,n);case 7:return Dt(t,e,e.pendingProps,n),e.child;case 8:return Dt(t,e,e.pendingProps.children,n),e.child;case 12:return Dt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Ee(nh,r._currentValue),r._currentValue=o,i!==null)if(Cn(i.value,o)){if(i.children===s.children&&!Ht.current){e=br(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=wr(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),Fp(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(B(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Fp(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Dt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,uo(e,n),s=fn(s),r=r(s),e.flags|=1,Dt(t,e,r,n),e.child;case 14:return r=e.type,s=wn(r,e.pendingProps),s=wn(r.type,s),r0(t,e,r,s,n);case 15:return wb(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:wn(r,s),bu(t,e),e.tag=1,$t(r)?(t=!0,Zu(e)):t=!1,uo(e,n),yb(e,r,s),Up(e,r,s,n),Wp(null,e,r,!0,t,n);case 19:return Ib(t,e,n);case 22:return xb(t,e,n)}throw Error(B(156,e.tag))};function zb(t,e){return pT(t,e)}function iR(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function un(t,e,n,r){return new iR(t,e,n,r)}function Fg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function oR(t){if(typeof t=="function")return Fg(t)?1:0;if(t!=null){if(t=t.$$typeof,t===rg)return 11;if(t===sg)return 14}return 2}function ps(t,e){var n=t.alternate;return n===null?(n=un(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ku(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Fg(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Yi:return li(n.children,s,i,e);case ng:o=8,s|=8;break;case up:return t=un(12,n,e,s|2),t.elementType=up,t.lanes=i,t;case hp:return t=un(13,n,e,s),t.elementType=hp,t.lanes=i,t;case dp:return t=un(19,n,e,s),t.elementType=dp,t.lanes=i,t;case XE:return rd(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case KE:o=10;break e;case QE:o=9;break e;case rg:o=11;break e;case sg:o=14;break e;case Hr:o=16,r=null;break e}throw Error(B(130,t==null?t:typeof t,""))}return e=un(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function li(t,e,n,r){return t=un(7,t,r,e),t.lanes=n,t}function rd(t,e,n,r){return t=un(22,t,r,e),t.elementType=XE,t.lanes=n,t.stateNode={isHidden:!1},t}function Rf(t,e,n){return t=un(6,t,null,e),t.lanes=n,t}function Nf(t,e,n){return e=un(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function aR(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=df(0),this.expirationTimes=df(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=df(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function jg(t,e,n,r,s,i,o,a,l){return t=new aR(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=un(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Eg(i),t}function lR(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:qi,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Bb(t){if(!t)return Ts;t=t._reactInternals;e:{if(Ii(t)!==t||t.tag!==1)throw Error(B(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if($t(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(B(171))}if(t.tag===1){var n=t.type;if($t(n))return BT(t,n,e)}return e}function Wb(t,e,n,r,s,i,o,a,l){return t=jg(n,r,!0,t,s,i,o,a,l),t.context=Bb(null),n=t.current,r=Ot(),s=fs(n),i=wr(r,s),i.callback=e??null,hs(n,i,s),t.current.lanes=s,Zl(t,s,r),qt(t,r),t}function sd(t,e,n,r){var s=e.current,i=Ot(),o=fs(s);return n=Bb(n),e.context===null?e.context=n:e.pendingContext=n,e=wr(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=hs(s,e,o),t!==null&&(kn(t,s,o,i),xu(t,s,o)),o}function dh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function m0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Ug(t,e){m0(t,e),(t=t.alternate)&&m0(t,e)}function cR(){return null}var Hb=typeof reportError=="function"?reportError:function(t){console.error(t)};function zg(t){this._internalRoot=t}id.prototype.render=zg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(B(409));sd(t,e,null,null)};id.prototype.unmount=zg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;mi(function(){sd(null,t,null,null)}),e[Er]=null}};function id(t){this._internalRoot=t}id.prototype.unstable_scheduleHydration=function(t){if(t){var e=xT();t={blockedOn:null,target:t,priority:e};for(var n=0;n<qr.length&&e!==0&&e<qr[n].priority;n++);qr.splice(n,0,t),n===0&&TT(t)}};function Bg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function od(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function g0(){}function uR(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=dh(o);i.call(c)}}var o=Wb(e,r,t,0,null,!1,!1,"",g0);return t._reactRootContainer=o,t[Er]=o.current,Tl(t.nodeType===8?t.parentNode:t),mi(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=dh(l);a.call(c)}}var l=jg(t,0,!1,null,null,!1,!1,"",g0);return t._reactRootContainer=l,t[Er]=l.current,Tl(t.nodeType===8?t.parentNode:t),mi(function(){sd(e,l,n,r)}),l}function ad(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=dh(o);a.call(l)}}sd(e,o,t,s)}else o=uR(n,e,t,s,r);return dh(o)}vT=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=La(e.pendingLanes);n!==0&&(ag(e,n|1),qt(e,$e()),!(fe&6)&&(ko=$e()+500,Ms()))}break;case 13:mi(function(){var r=Tr(t,1);if(r!==null){var s=Ot();kn(r,t,1,s)}}),Ug(t,1)}};lg=function(t){if(t.tag===13){var e=Tr(t,134217728);if(e!==null){var n=Ot();kn(e,t,134217728,n)}Ug(t,134217728)}};wT=function(t){if(t.tag===13){var e=fs(t),n=Tr(t,e);if(n!==null){var r=Ot();kn(n,t,e,r)}Ug(t,e)}};xT=function(){return _e};ET=function(t,e){var n=_e;try{return _e=t,e()}finally{_e=n}};Ep=function(t,e,n){switch(e){case"input":if(mp(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Xh(r);if(!s)throw Error(B(90));ZE(r),mp(r,s)}}}break;case"textarea":tT(t,n);break;case"select":e=n.value,e!=null&&oo(t,!!n.multiple,e,!1)}};lT=Mg;cT=mi;var hR={usingClientEntryPoint:!1,Events:[tc,Xi,Xh,oT,aT,Mg]},Ta={findFiberByHostInstance:ti,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},dR={bundleType:Ta.bundleType,version:Ta.version,rendererPackageName:Ta.rendererPackageName,rendererConfig:Ta.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Cr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=dT(t),t===null?null:t.stateNode},findFiberByHostInstance:Ta.findFiberByHostInstance||cR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qc.isDisabled&&qc.supportsFiber)try{Yh=qc.inject(dR),Yn=qc}catch{}}nn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hR;nn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Bg(e))throw Error(B(200));return lR(t,e,null,n)};nn.createRoot=function(t,e){if(!Bg(t))throw Error(B(299));var n=!1,r="",s=Hb;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=jg(t,1,!1,null,null,n,!1,r,s),t[Er]=e.current,Tl(t.nodeType===8?t.parentNode:t),new zg(e)};nn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(B(188)):(t=Object.keys(t).join(","),Error(B(268,t)));return t=dT(e),t=t===null?null:t.stateNode,t};nn.flushSync=function(t){return mi(t)};nn.hydrate=function(t,e,n){if(!od(e))throw Error(B(200));return ad(null,t,e,!0,n)};nn.hydrateRoot=function(t,e,n){if(!Bg(t))throw Error(B(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Hb;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Wb(e,null,t,1,n??null,s,!1,i,o),t[Er]=e.current,Tl(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new id(e)};nn.render=function(t,e,n){if(!od(e))throw Error(B(200));return ad(null,t,e,!1,n)};nn.unmountComponentAtNode=function(t){if(!od(t))throw Error(B(40));return t._reactRootContainer?(mi(function(){ad(null,null,t,!1,function(){t._reactRootContainer=null,t[Er]=null})}),!0):!1};nn.unstable_batchedUpdates=Mg;nn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!od(n))throw Error(B(200));if(t==null||t._reactInternals===void 0)throw Error(B(38));return ad(t,e,n,!1,r)};nn.version="18.3.1-next-f1338f8080-20240426";function $b(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE($b)}catch(t){console.error(t)}}$b(),$E.exports=nn;var fR=$E.exports,y0=fR;lp.createRoot=y0.createRoot,lp.hydrateRoot=y0.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Nl(){return Nl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Nl.apply(this,arguments)}var ts;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ts||(ts={}));const _0="popstate";function pR(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return tm("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:fh(s)}return gR(e,n,null,t)}function De(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Wg(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function mR(){return Math.random().toString(36).substr(2,8)}function v0(t,e){return{usr:t.state,key:t.key,idx:e}}function tm(t,e,n,r){return n===void 0&&(n=null),Nl({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Bo(e):e,{state:n,key:e&&e.key||r||mR()})}function fh(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Bo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function gR(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=ts.Pop,l=null,c=h();c==null&&(c=0,o.replaceState(Nl({},o.state,{idx:c}),""));function h(){return(o.state||{idx:null}).idx}function d(){a=ts.Pop;let T=h(),_=T==null?null:T-c;c=T,l&&l({action:a,location:w.location,delta:_})}function f(T,_){a=ts.Push;let x=tm(w.location,T,_);c=h()+1;let b=v0(x,c),R=w.createHref(x);try{o.pushState(b,"",R)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;s.location.assign(R)}i&&l&&l({action:a,location:w.location,delta:1})}function m(T,_){a=ts.Replace;let x=tm(w.location,T,_);c=h();let b=v0(x,c),R=w.createHref(x);o.replaceState(b,"",R),i&&l&&l({action:a,location:w.location,delta:0})}function v(T){let _=s.location.origin!=="null"?s.location.origin:s.location.href,x=typeof T=="string"?T:fh(T);return x=x.replace(/ $/,"%20"),De(_,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,_)}let w={get action(){return a},get location(){return t(s,o)},listen(T){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(_0,d),l=T,()=>{s.removeEventListener(_0,d),l=null}},createHref(T){return e(s,T)},createURL:v,encodeLocation(T){let _=v(T);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:f,replace:m,go(T){return o.go(T)}};return w}var w0;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(w0||(w0={}));function yR(t,e,n){return n===void 0&&(n="/"),_R(t,e,n)}function _R(t,e,n,r){let s=typeof e=="string"?Bo(e):e,i=Po(s.pathname||"/",n);if(i==null)return null;let o=qb(t);vR(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=CR(i);a=PR(o[l],c)}return a}function qb(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(De(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=ms([r,l.relativePath]),h=n.concat(l);i.children&&i.children.length>0&&(De(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),qb(i.children,e,h,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:SR(c,i.index),routesMeta:h})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of Yb(i.path))s(i,o,l)}),e}function Yb(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=Yb(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function vR(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:kR(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const wR=/^:[\w-]+$/,xR=3,ER=2,TR=1,bR=10,IR=-2,x0=t=>t==="*";function SR(t,e){let n=t.split("/"),r=n.length;return n.some(x0)&&(r+=IR),e&&(r+=ER),n.filter(s=>!x0(s)).reduce((s,i)=>s+(wR.test(i)?xR:i===""?TR:bR),r)}function kR(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function PR(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,h=i==="/"?e:e.slice(i.length)||"/",d=nm({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},h),f=l.route;if(!d)return null;Object.assign(s,d.params),o.push({params:s,pathname:ms([i,d.pathname]),pathnameBase:MR(ms([i,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(i=ms([i,d.pathnameBase]))}return o}function nm(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=AR(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,h,d)=>{let{paramName:f,isOptional:m}=h;if(f==="*"){let w=a[d]||"";o=i.slice(0,i.length-w.length).replace(/(.)\/+$/,"$1")}const v=a[d];return m&&!v?c[f]=void 0:c[f]=(v||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function AR(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Wg(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function CR(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Wg(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Po(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const RR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,NR=t=>RR.test(t);function DR(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Bo(t):t,i;if(n)if(NR(n))i=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),Wg(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?i=E0(n.substring(1),"/"):i=E0(n,e)}else i=e;return{pathname:i,search:LR(r),hash:VR(s)}}function E0(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Df(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function OR(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Hg(t,e){let n=OR(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function $g(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Bo(t):(s=Nl({},t),De(!s.pathname||!s.pathname.includes("?"),Df("?","pathname","search",s)),De(!s.pathname||!s.pathname.includes("#"),Df("#","pathname","hash",s)),De(!s.search||!s.search.includes("#"),Df("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;s.pathname=f.join("/")}a=d>=0?e[d]:"/"}let l=DR(s,a),c=o&&o!=="/"&&o.endsWith("/"),h=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||h)&&(l.pathname+="/"),l}const ms=t=>t.join("/").replace(/\/\/+/g,"/"),MR=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),LR=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,VR=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function FR(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Gb=["post","put","patch","delete"];new Set(Gb);const jR=["get",...Gb];new Set(jR);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Dl(){return Dl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Dl.apply(this,arguments)}const ld=M.createContext(null),Kb=M.createContext(null),Rr=M.createContext(null),cd=M.createContext(null),Nr=M.createContext({outlet:null,matches:[],isDataRoute:!1}),Qb=M.createContext(null);function UR(t,e){let{relative:n}=e===void 0?{}:e;Wo()||De(!1);let{basename:r,navigator:s}=M.useContext(Rr),{hash:i,pathname:o,search:a}=ud(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:ms([r,o])),s.createHref({pathname:l,search:a,hash:i})}function Wo(){return M.useContext(cd)!=null}function Ho(){return Wo()||De(!1),M.useContext(cd).location}function Xb(t){M.useContext(Rr).static||M.useLayoutEffect(t)}function qg(){let{isDataRoute:t}=M.useContext(Nr);return t?tN():zR()}function zR(){Wo()||De(!1);let t=M.useContext(ld),{basename:e,future:n,navigator:r}=M.useContext(Rr),{matches:s}=M.useContext(Nr),{pathname:i}=Ho(),o=JSON.stringify(Hg(s,n.v7_relativeSplatPath)),a=M.useRef(!1);return Xb(()=>{a.current=!0}),M.useCallback(function(c,h){if(h===void 0&&(h={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let d=$g(c,JSON.parse(o),i,h.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:ms([e,d.pathname])),(h.replace?r.replace:r.push)(d,h.state,h)},[e,r,o,i,t])}const BR=M.createContext(null);function WR(t){let e=M.useContext(Nr).outlet;return e&&M.createElement(BR.Provider,{value:t},e)}function ud(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=M.useContext(Rr),{matches:s}=M.useContext(Nr),{pathname:i}=Ho(),o=JSON.stringify(Hg(s,r.v7_relativeSplatPath));return M.useMemo(()=>$g(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function HR(t,e){return $R(t,e)}function $R(t,e,n,r){Wo()||De(!1);let{navigator:s}=M.useContext(Rr),{matches:i}=M.useContext(Nr),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=Ho(),h;if(e){var d;let T=typeof e=="string"?Bo(e):e;l==="/"||(d=T.pathname)!=null&&d.startsWith(l)||De(!1),h=T}else h=c;let f=h.pathname||"/",m=f;if(l!=="/"){let T=l.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(T.length).join("/")}let v=yR(t,{pathname:m}),w=QR(v&&v.map(T=>Object.assign({},T,{params:Object.assign({},a,T.params),pathname:ms([l,s.encodeLocation?s.encodeLocation(T.pathname).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?l:ms([l,s.encodeLocation?s.encodeLocation(T.pathnameBase).pathname:T.pathnameBase])})),i,n,r);return e&&w?M.createElement(cd.Provider,{value:{location:Dl({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:ts.Pop}},w):w}function qR(){let t=eN(),e=FR(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},e),n?M.createElement("pre",{style:s},n):null,null)}const YR=M.createElement(qR,null);class GR extends M.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?M.createElement(Nr.Provider,{value:this.props.routeContext},M.createElement(Qb.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function KR(t){let{routeContext:e,match:n,children:r}=t,s=M.useContext(ld);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),M.createElement(Nr.Provider,{value:e},r)}function QR(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let h=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);h>=0||De(!1),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let d=o[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=h),d.route.id){let{loaderData:f,errors:m}=n,v=d.route.loader&&f[d.route.id]===void 0&&(!m||m[d.route.id]===void 0);if(d.route.lazy||v){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((h,d,f)=>{let m,v=!1,w=null,T=null;n&&(m=a&&d.route.id?a[d.route.id]:void 0,w=d.route.errorElement||YR,l&&(c<0&&f===0?(nN("route-fallback"),v=!0,T=null):c===f&&(v=!0,T=d.route.hydrateFallbackElement||null)));let _=e.concat(o.slice(0,f+1)),x=()=>{let b;return m?b=w:v?b=T:d.route.Component?b=M.createElement(d.route.Component,null):d.route.element?b=d.route.element:b=h,M.createElement(KR,{match:d,routeContext:{outlet:h,matches:_,isDataRoute:n!=null},children:b})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?M.createElement(GR,{location:n.location,revalidation:n.revalidation,component:w,error:m,children:x(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):x()},null)}var Jb=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Jb||{}),Zb=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Zb||{});function XR(t){let e=M.useContext(ld);return e||De(!1),e}function JR(t){let e=M.useContext(Kb);return e||De(!1),e}function ZR(t){let e=M.useContext(Nr);return e||De(!1),e}function eI(t){let e=ZR(),n=e.matches[e.matches.length-1];return n.route.id||De(!1),n.route.id}function eN(){var t;let e=M.useContext(Qb),n=JR(),r=eI();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function tN(){let{router:t}=XR(Jb.UseNavigateStable),e=eI(Zb.UseNavigateStable),n=M.useRef(!1);return Xb(()=>{n.current=!0}),M.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Dl({fromRouteId:e},i)))},[t,e])}const T0={};function nN(t,e,n){T0[t]||(T0[t]=!0)}function rN(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function sN(t){let{to:e,replace:n,state:r,relative:s}=t;Wo()||De(!1);let{future:i,static:o}=M.useContext(Rr),{matches:a}=M.useContext(Nr),{pathname:l}=Ho(),c=qg(),h=$g(e,Hg(a,i.v7_relativeSplatPath),l,s==="path"),d=JSON.stringify(h);return M.useEffect(()=>c(JSON.parse(d),{replace:n,state:r,relative:s}),[c,d,s,n,r]),null}function iN(t){return WR(t.context)}function vn(t){De(!1)}function oN(t){let{basename:e="/",children:n=null,location:r,navigationType:s=ts.Pop,navigator:i,static:o=!1,future:a}=t;Wo()&&De(!1);let l=e.replace(/^\/*/,"/"),c=M.useMemo(()=>({basename:l,navigator:i,static:o,future:Dl({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof r=="string"&&(r=Bo(r));let{pathname:h="/",search:d="",hash:f="",state:m=null,key:v="default"}=r,w=M.useMemo(()=>{let T=Po(h,l);return T==null?null:{location:{pathname:T,search:d,hash:f,state:m,key:v},navigationType:s}},[l,h,d,f,m,v,s]);return w==null?null:M.createElement(Rr.Provider,{value:c},M.createElement(cd.Provider,{children:n,value:w}))}function aN(t){let{children:e,location:n}=t;return HR(rm(e),n)}new Promise(()=>{});function rm(t,e){e===void 0&&(e=[]);let n=[];return M.Children.forEach(t,(r,s)=>{if(!M.isValidElement(r))return;let i=[...e,s];if(r.type===M.Fragment){n.push.apply(n,rm(r.props.children,i));return}r.type!==vn&&De(!1),!r.props.index||!r.props.children||De(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=rm(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ph(){return ph=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ph.apply(this,arguments)}function tI(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function lN(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function cN(t,e){return t.button===0&&(!e||e==="_self")&&!lN(t)}const uN=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],hN=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],dN="6";try{window.__reactRouterVersion=dN}catch{}const fN=M.createContext({isTransitioning:!1}),pN="startTransition",b0=nA[pN];function mN(t){let{basename:e,children:n,future:r,window:s}=t,i=M.useRef();i.current==null&&(i.current=pR({window:s,v5Compat:!0}));let o=i.current,[a,l]=M.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},h=M.useCallback(d=>{c&&b0?b0(()=>l(d)):l(d)},[l,c]);return M.useLayoutEffect(()=>o.listen(h),[o,h]),M.useEffect(()=>rN(r),[r]),M.createElement(oN,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const gN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",yN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,_N=M.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:h,viewTransition:d}=e,f=tI(e,uN),{basename:m}=M.useContext(Rr),v,w=!1;if(typeof c=="string"&&yN.test(c)&&(v=c,gN))try{let b=new URL(window.location.href),R=c.startsWith("//")?new URL(b.protocol+c):new URL(c),D=Po(R.pathname,m);R.origin===b.origin&&D!=null?c=D+R.search+R.hash:w=!0}catch{}let T=UR(c,{relative:s}),_=xN(c,{replace:o,state:a,target:l,preventScrollReset:h,relative:s,viewTransition:d});function x(b){r&&r(b),b.defaultPrevented||_(b)}return M.createElement("a",ph({},f,{href:v||T,onClick:w||i?r:x,ref:n,target:l}))}),vN=M.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:s=!1,className:i="",end:o=!1,style:a,to:l,viewTransition:c,children:h}=e,d=tI(e,hN),f=ud(l,{relative:d.relative}),m=Ho(),v=M.useContext(Kb),{navigator:w,basename:T}=M.useContext(Rr),_=v!=null&&EN(f)&&c===!0,x=w.encodeLocation?w.encodeLocation(f).pathname:f.pathname,b=m.pathname,R=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;s||(b=b.toLowerCase(),R=R?R.toLowerCase():null,x=x.toLowerCase()),R&&T&&(R=Po(R,T)||R);const D=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let L=b===x||!o&&b.startsWith(x)&&b.charAt(D)==="/",I=R!=null&&(R===x||!o&&R.startsWith(x)&&R.charAt(x.length)==="/"),y={isActive:L,isPending:I,isTransitioning:_},k=L?r:void 0,P;typeof i=="function"?P=i(y):P=[i,L?"active":null,I?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let A=typeof a=="function"?a(y):a;return M.createElement(_N,ph({},d,{"aria-current":k,className:P,ref:n,style:A,to:l,viewTransition:c}),typeof h=="function"?h(y):h)});var sm;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(sm||(sm={}));var I0;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(I0||(I0={}));function wN(t){let e=M.useContext(ld);return e||De(!1),e}function xN(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,l=qg(),c=Ho(),h=ud(t,{relative:o});return M.useCallback(d=>{if(cN(d,n)){d.preventDefault();let f=r!==void 0?r:fh(c)===fh(h);l(t,{replace:f,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[c,l,h,r,s,n,t,i,o,a])}function EN(t,e){e===void 0&&(e={});let n=M.useContext(fN);n==null&&De(!1);let{basename:r}=wN(sm.useViewTransitionState),s=ud(t,{relative:e.relative});if(!n.isTransitioning)return!1;let i=Po(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Po(n.nextLocation.pathname,r)||n.nextLocation.pathname;return nm(s.pathname,o)!=null||nm(s.pathname,i)!=null}const TN=()=>{};var S0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nI=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},bN=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},rI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,h=i>>2,d=(i&3)<<4|a>>4;let f=(a&15)<<2|c>>6,m=c&63;l||(m=64,o||(f=64)),r.push(n[h],n[d],n[f],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(nI(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):bN(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const d=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||d==null)throw new IN;const f=i<<2|a>>4;if(r.push(f),c!==64){const m=a<<4&240|c>>2;if(r.push(m),d!==64){const v=c<<6&192|d;r.push(v)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class IN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const SN=function(t){const e=nI(t);return rI.encodeByteArray(e,!0)},mh=function(t){return SN(t).replace(/\./g,"")},sI=function(t){try{return rI.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PN=()=>kN().__FIREBASE_DEFAULTS__,AN=()=>{if(typeof process>"u"||typeof S0>"u")return;const t=S0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},CN=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&sI(t[1]);return e&&JSON.parse(e)},hd=()=>{try{return TN()||PN()||AN()||CN()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},iI=t=>{var e,n;return(n=(e=hd())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},oI=t=>{const e=iI(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},aI=()=>{var t;return(t=hd())==null?void 0:t.config},lI=t=>{var e;return(e=hd())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ls(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Yg(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cI(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[mh(JSON.stringify(n)),mh(JSON.stringify(o)),""].join(".")}const tl={};function NN(){const t={prod:[],emulator:[]};for(const e of Object.keys(tl))tl[e]?t.emulator.push(e):t.prod.push(e);return t}function DN(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let k0=!1;function Gg(t,e){if(typeof window>"u"||typeof document>"u"||!Ls(window.location.host)||tl[t]===e||tl[t]||k0)return;tl[t]=e;function n(f){return`__firebase__banner__${f}`}const r="__firebase__banner",i=NN().prod.length>0;function o(){const f=document.getElementById(r);f&&f.remove()}function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function l(f,m){f.setAttribute("width","24"),f.setAttribute("id",m),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function c(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{k0=!0,o()},f}function h(f,m){f.setAttribute("id",m),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function d(){const f=DN(r),m=n("text"),v=document.getElementById(m)||document.createElement("span"),w=n("learnmore"),T=document.getElementById(w)||document.createElement("a"),_=n("preprendIcon"),x=document.getElementById(_)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const b=f.element;a(b),h(T,w);const R=c();l(x,_),b.append(x,v,T,R),document.body.appendChild(b)}i?(v.innerText="Preview backend disconnected.",x.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(x.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,v.innerText="Preview backend running in this workspace."),v.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ON(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Pt())}function MN(){var e;const t=(e=hd())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function LN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function VN(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function FN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function jN(){const t=Pt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function UN(){return!MN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function zN(){try{return typeof indexedDB=="object"}catch{return!1}}function BN(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WN="FirebaseError";class or extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=WN,Object.setPrototypeOf(this,or.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,rc.prototype.create)}}class rc{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?HN(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new or(s,a,r)}}function HN(t,e){return t.replace($N,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const $N=/\{\$([^}]+)}/g;function qN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function gi(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(P0(i)&&P0(o)){if(!gi(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function P0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sc(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Fa(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function ja(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function YN(t,e){const n=new GN(t,e);return n.subscribe.bind(n)}class GN{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");KN(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Of),s.error===void 0&&(s.error=Of),s.complete===void 0&&(s.complete=Of);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function KN(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Of(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function at(t){return t&&t._delegate?t._delegate:t}class bs{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QN{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new RN;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(JN(e))try{this.getOrInitializeService({instanceIdentifier:Xs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Xs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Xs){return this.instances.has(e)}getOptions(e=Xs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:XN(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Xs){return this.component?this.component.multipleInstances?e:Xs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function XN(t){return t===Xs?void 0:t}function JN(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new QN(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ie;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ie||(ie={}));const eD={debug:ie.DEBUG,verbose:ie.VERBOSE,info:ie.INFO,warn:ie.WARN,error:ie.ERROR,silent:ie.SILENT},tD=ie.INFO,nD={[ie.DEBUG]:"log",[ie.VERBOSE]:"log",[ie.INFO]:"info",[ie.WARN]:"warn",[ie.ERROR]:"error"},rD=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=nD[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Kg{constructor(e){this.name=e,this._logLevel=tD,this._logHandler=rD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ie))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?eD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ie.DEBUG,...e),this._logHandler(this,ie.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ie.VERBOSE,...e),this._logHandler(this,ie.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ie.INFO,...e),this._logHandler(this,ie.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ie.WARN,...e),this._logHandler(this,ie.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ie.ERROR,...e),this._logHandler(this,ie.ERROR,...e)}}const sD=(t,e)=>e.some(n=>t instanceof n);let A0,C0;function iD(){return A0||(A0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function oD(){return C0||(C0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const uI=new WeakMap,im=new WeakMap,hI=new WeakMap,Mf=new WeakMap,Qg=new WeakMap;function aD(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(gs(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&uI.set(n,t)}).catch(()=>{}),Qg.set(e,t),e}function lD(t){if(im.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});im.set(t,e)}let om={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return im.get(t);if(e==="objectStoreNames")return t.objectStoreNames||hI.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return gs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function cD(t){om=t(om)}function uD(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Lf(this),e,...n);return hI.set(r,e.sort?e.sort():[e]),gs(r)}:oD().includes(t)?function(...e){return t.apply(Lf(this),e),gs(uI.get(this))}:function(...e){return gs(t.apply(Lf(this),e))}}function hD(t){return typeof t=="function"?uD(t):(t instanceof IDBTransaction&&lD(t),sD(t,iD())?new Proxy(t,om):t)}function gs(t){if(t instanceof IDBRequest)return aD(t);if(Mf.has(t))return Mf.get(t);const e=hD(t);return e!==t&&(Mf.set(t,e),Qg.set(e,t)),e}const Lf=t=>Qg.get(t);function dD(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=gs(o);return r&&o.addEventListener("upgradeneeded",l=>{r(gs(o.result),l.oldVersion,l.newVersion,gs(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const fD=["get","getKey","getAll","getAllKeys","count"],pD=["put","add","delete","clear"],Vf=new Map;function R0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Vf.get(e))return Vf.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=pD.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||fD.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return Vf.set(e,i),i}cD(t=>({...t,get:(e,n,r)=>R0(e,n)||t.get(e,n,r),has:(e,n)=>!!R0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(gD(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function gD(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const am="@firebase/app",N0="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ir=new Kg("@firebase/app"),yD="@firebase/app-compat",_D="@firebase/analytics-compat",vD="@firebase/analytics",wD="@firebase/app-check-compat",xD="@firebase/app-check",ED="@firebase/auth",TD="@firebase/auth-compat",bD="@firebase/database",ID="@firebase/data-connect",SD="@firebase/database-compat",kD="@firebase/functions",PD="@firebase/functions-compat",AD="@firebase/installations",CD="@firebase/installations-compat",RD="@firebase/messaging",ND="@firebase/messaging-compat",DD="@firebase/performance",OD="@firebase/performance-compat",MD="@firebase/remote-config",LD="@firebase/remote-config-compat",VD="@firebase/storage",FD="@firebase/storage-compat",jD="@firebase/firestore",UD="@firebase/ai",zD="@firebase/firestore-compat",BD="firebase",WD="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lm="[DEFAULT]",HD={[am]:"fire-core",[yD]:"fire-core-compat",[vD]:"fire-analytics",[_D]:"fire-analytics-compat",[xD]:"fire-app-check",[wD]:"fire-app-check-compat",[ED]:"fire-auth",[TD]:"fire-auth-compat",[bD]:"fire-rtdb",[ID]:"fire-data-connect",[SD]:"fire-rtdb-compat",[kD]:"fire-fn",[PD]:"fire-fn-compat",[AD]:"fire-iid",[CD]:"fire-iid-compat",[RD]:"fire-fcm",[ND]:"fire-fcm-compat",[DD]:"fire-perf",[OD]:"fire-perf-compat",[MD]:"fire-rc",[LD]:"fire-rc-compat",[VD]:"fire-gcs",[FD]:"fire-gcs-compat",[jD]:"fire-fst",[zD]:"fire-fst-compat",[UD]:"fire-vertex","fire-js":"fire-js",[BD]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ol=new Map,$D=new Map,cm=new Map;function D0(t,e){try{t.container.addComponent(e)}catch(n){Ir.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function yi(t){const e=t.name;if(cm.has(e))return Ir.debug(`There were multiple attempts to register component ${e}.`),!1;cm.set(e,t);for(const n of Ol.values())D0(n,t);for(const n of $D.values())D0(n,t);return!0}function dd(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ut(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ys=new rc("app","Firebase",qD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YD{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new bs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ys.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Si=WD;function dI(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:lm,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw ys.create("bad-app-name",{appName:String(s)});if(n||(n=aI()),!n)throw ys.create("no-options");const i=Ol.get(s);if(i){if(gi(n,i.options)&&gi(r,i.config))return i;throw ys.create("duplicate-app",{appName:s})}const o=new ZN(s);for(const l of cm.values())o.addComponent(l);const a=new YD(n,r,o);return Ol.set(s,a),a}function Xg(t=lm){const e=Ol.get(t);if(!e&&t===lm&&aI())return dI();if(!e)throw ys.create("no-app",{appName:t});return e}function O0(){return Array.from(Ol.values())}function Kn(t,e,n){let r=HD[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ir.warn(o.join(" "));return}yi(new bs(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GD="firebase-heartbeat-database",KD=1,Ml="firebase-heartbeat-store";let Ff=null;function fI(){return Ff||(Ff=dD(GD,KD,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ml)}catch(n){console.warn(n)}}}}).catch(t=>{throw ys.create("idb-open",{originalErrorMessage:t.message})})),Ff}async function QD(t){try{const n=(await fI()).transaction(Ml),r=await n.objectStore(Ml).get(pI(t));return await n.done,r}catch(e){if(e instanceof or)Ir.warn(e.message);else{const n=ys.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ir.warn(n.message)}}}async function M0(t,e){try{const r=(await fI()).transaction(Ml,"readwrite");await r.objectStore(Ml).put(e,pI(t)),await r.done}catch(n){if(n instanceof or)Ir.warn(n.message);else{const r=ys.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ir.warn(r.message)}}}function pI(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XD=1024,JD=30;class ZD{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new t2(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=L0();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>JD){const o=n2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Ir.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=L0(),{heartbeatsToSend:r,unsentEntries:s}=e2(this._heartbeatsCache.heartbeats),i=mh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Ir.warn(n),""}}}function L0(){return new Date().toISOString().substring(0,10)}function e2(t,e=XD){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),V0(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),V0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class t2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return zN()?BN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await QD(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return M0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return M0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function V0(t){return mh(JSON.stringify({version:2,heartbeats:t})).length}function n2(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r2(t){yi(new bs("platform-logger",e=>new mD(e),"PRIVATE")),yi(new bs("heartbeat",e=>new ZD(e),"PRIVATE")),Kn(am,N0,t),Kn(am,N0,"esm2020"),Kn("fire-js","")}r2("");function mI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const s2=mI,gI=new rc("auth","Firebase",mI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gh=new Kg("@firebase/auth");function i2(t,...e){gh.logLevel<=ie.WARN&&gh.warn(`Auth (${Si}): ${t}`,...e)}function Pu(t,...e){gh.logLevel<=ie.ERROR&&gh.error(`Auth (${Si}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rn(t,...e){throw Jg(t,...e)}function Qn(t,...e){return Jg(t,...e)}function yI(t,e,n){const r={...s2(),[e]:n};return new rc("auth","Firebase",r).create(e,{appName:t.name})}function Xn(t){return yI(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Jg(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return gI.create(t,...e)}function Q(t,e,...n){if(!t)throw Jg(e,...n)}function _r(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Pu(e),new Error(e)}function Sr(t,e){t||_r(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function um(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function o2(){return F0()==="http:"||F0()==="https:"}function F0(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(o2()||VN()||"connection"in navigator)?navigator.onLine:!0}function l2(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic{constructor(e,n){this.shortDelay=e,this.longDelay=n,Sr(n>e,"Short delay should be less than long delay!"),this.isMobile=ON()||FN()}get(){return a2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zg(t,e){Sr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;_r("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;_r("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;_r("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u2=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],h2=new ic(3e4,6e4);function Vs(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Fs(t,e,n,r,s={}){return vI(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=sc({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c={method:e,headers:l,...i};return LN()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&Ls(t.emulatorConfig.host)&&(c.credentials="include"),_I.fetch()(await wI(t,t.config.apiHost,n,a),c)})}async function vI(t,e,n){t._canInitEmulator=!1;const r={...c2,...e};try{const s=new f2(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Yc(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Yc(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Yc(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Yc(t,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw yI(t,h,c);Rn(t,h)}}catch(s){if(s instanceof or)throw s;Rn(t,"network-request-failed",{message:String(s)})}}async function oc(t,e,n,r,s={}){const i=await Fs(t,e,n,r,s);return"mfaPendingCredential"in i&&Rn(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function wI(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?Zg(t.config,s):`${t.config.apiScheme}://${s}`;return u2.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function d2(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class f2{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Qn(this.auth,"network-request-failed")),h2.get())})}}function Yc(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Qn(t,e,r);return s.customData._tokenResponse=n,s}function j0(t){return t!==void 0&&t.enterprise!==void 0}class p2{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return d2(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function m2(t,e){return Fs(t,"GET","/v2/recaptchaConfig",Vs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g2(t,e){return Fs(t,"POST","/v1/accounts:delete",e)}async function yh(t,e){return Fs(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function y2(t,e=!1){const n=at(t),r=await n.getIdToken(e),s=ey(r);Q(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:nl(jf(s.auth_time)),issuedAtTime:nl(jf(s.iat)),expirationTime:nl(jf(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function jf(t){return Number(t)*1e3}function ey(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Pu("JWT malformed, contained fewer than 3 sections"),null;try{const s=sI(n);return s?JSON.parse(s):(Pu("Failed to decode base64 JWT payload"),null)}catch(s){return Pu("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function U0(t){const e=ey(t);return Q(e,"internal-error"),Q(typeof e.exp<"u","internal-error"),Q(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ll(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof or&&_2(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function _2({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=nl(this.lastLoginAt),this.creationTime=nl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _h(t){var d;const e=t.auth,n=await t.getIdToken(),r=await Ll(t,yh(e,{idToken:n}));Q(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(d=s.providerUserInfo)!=null&&d.length?xI(s.providerUserInfo):[],o=x2(t.providerData,i),a=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),c=a?l:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new hm(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(t,h)}async function w2(t){const e=at(t);await _h(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function x2(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function xI(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E2(t,e){const n=await vI(t,{},async()=>{const r=sc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await wI(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:r};return t.emulatorConfig&&Ls(t.emulatorConfig.host)&&(l.credentials="include"),_I.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function T2(t,e){return Fs(t,"POST","/v2/accounts:revokeToken",Vs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Q(e.idToken,"internal-error"),Q(typeof e.idToken<"u","internal-error"),Q(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):U0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Q(e.length!==0,"internal-error");const n=U0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Q(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await E2(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new fo;return r&&(Q(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(Q(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(Q(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new fo,this.toJSON())}_performRefresh(){return _r("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zr(t,e){Q(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Tn{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new v2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new hm(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Ll(this,this.stsTokenManager.getToken(this.auth,e));return Q(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return y2(this,e)}reload(){return w2(this)}_assign(e){this!==e&&(Q(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Tn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await _h(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ut(this.auth.app))return Promise.reject(Xn(this.auth));const e=await this.getIdToken();return await Ll(this,g2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,l=n._redirectEventId??void 0,c=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:d,emailVerified:f,isAnonymous:m,providerData:v,stsTokenManager:w}=n;Q(d&&w,e,"internal-error");const T=fo.fromJSON(this.name,w);Q(typeof d=="string",e,"internal-error"),zr(r,e.name),zr(s,e.name),Q(typeof f=="boolean",e,"internal-error"),Q(typeof m=="boolean",e,"internal-error"),zr(i,e.name),zr(o,e.name),zr(a,e.name),zr(l,e.name),zr(c,e.name),zr(h,e.name);const _=new Tn({uid:d,auth:e,email:s,emailVerified:f,displayName:r,isAnonymous:m,photoURL:o,phoneNumber:i,tenantId:a,stsTokenManager:T,createdAt:c,lastLoginAt:h});return v&&Array.isArray(v)&&(_.providerData=v.map(x=>({...x}))),l&&(_._redirectEventId=l),_}static async _fromIdTokenResponse(e,n,r=!1){const s=new fo;s.updateFromServerResponse(n);const i=new Tn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await _h(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Q(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?xI(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new fo;a.updateFromIdToken(r);const l=new Tn({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new hm(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z0=new Map;function vr(t){Sr(t instanceof Function,"Expected a class definition");let e=z0.get(t);return e?(Sr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,z0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}EI.type="NONE";const B0=EI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Au(t,e,n){return`firebase:${t}:${e}:${n}`}class po{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Au(this.userKey,s.apiKey,i),this.fullPersistenceKey=Au("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await yh(this.auth,{idToken:e}).catch(()=>{});return n?Tn._fromGetAccountInfoResponse(this.auth,n,e):null}return Tn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new po(vr(B0),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||vr(B0);const o=Au(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const h=await c._get(o);if(h){let d;if(typeof h=="string"){const f=await yh(e,{idToken:h}).catch(()=>{});if(!f)break;d=await Tn._fromGetAccountInfoResponse(e,f,h)}else d=Tn._fromJSON(e,h);c!==i&&(a=d),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new po(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new po(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(SI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(TI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(PI(e))return"Blackberry";if(AI(e))return"Webos";if(bI(e))return"Safari";if((e.includes("chrome/")||II(e))&&!e.includes("edge/"))return"Chrome";if(kI(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function TI(t=Pt()){return/firefox\//i.test(t)}function bI(t=Pt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function II(t=Pt()){return/crios\//i.test(t)}function SI(t=Pt()){return/iemobile/i.test(t)}function kI(t=Pt()){return/android/i.test(t)}function PI(t=Pt()){return/blackberry/i.test(t)}function AI(t=Pt()){return/webos/i.test(t)}function ty(t=Pt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function b2(t=Pt()){var e;return ty(t)&&!!((e=window.navigator)!=null&&e.standalone)}function I2(){return jN()&&document.documentMode===10}function CI(t=Pt()){return ty(t)||kI(t)||AI(t)||PI(t)||/windows phone/i.test(t)||SI(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RI(t,e=[]){let n;switch(t){case"Browser":n=W0(Pt());break;case"Worker":n=`${W0(Pt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Si}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S2{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k2(t,e={}){return Fs(t,"GET","/v2/passwordPolicy",Vs(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P2=6;class A2{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??P2,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new H0(this),this.idTokenSubscription=new H0(this),this.beforeStateQueue=new S2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=gI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=vr(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await po.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await yh(this,{idToken:e}),r=await Tn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(Ut(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Q(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await _h(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=l2()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ut(this.app))return Promise.reject(Xn(this));const n=e?at(e):null;return n&&Q(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Q(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ut(this.app)?Promise.reject(Xn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ut(this.app)?Promise.reject(Xn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(vr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await k2(this),n=new A2(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new rc("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await T2(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&vr(e)||this._popupRedirectResolver;Q(n,this,"argument-error"),this.redirectPersistenceManager=await po.create(this,[vr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Q(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=RI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Ut(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&i2(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function js(t){return at(t)}class H0{constructor(e){this.auth=e,this.observer=null,this.addObserver=YN(n=>this.observer=n)}get next(){return Q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function R2(t){fd=t}function NI(t){return fd.loadJS(t)}function N2(){return fd.recaptchaEnterpriseScript}function D2(){return fd.gapiScript}function O2(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class M2{constructor(){this.enterprise=new L2}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class L2{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const V2="recaptcha-enterprise",DI="NO_RECAPTCHA";class F2{constructor(e){this.type=V2,this.auth=js(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{m2(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new p2(l);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function s(i,o,a){const l=window.grecaptcha;j0(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(c=>{o(c)}).catch(()=>{o(DI)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new M2().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&j0(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=N2();l.length!==0&&(l+=a),NI(l).then(()=>{s(a,i,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function $0(t,e,n,r=!1,s=!1){const i=new F2(t);let o;if(s)o=DI;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const a={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function dm(t,e,n,r,s){var i;if((i=t._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await $0(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await $0(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j2(t,e){const n=dd(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(gi(i,e??{}))return s;Rn(s,"already-initialized")}return n.initialize({options:e})}function U2(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(vr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function z2(t,e,n){const r=js(t);Q(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=OI(e),{host:o,port:a}=B2(e),l=a===null?"":`:${a}`,c={url:`${i}//${o}${l}/`},h=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){Q(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Q(gi(c,r.config.emulator)&&gi(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=c,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Ls(o)?(Yg(`${i}//${o}${l}`),Gg("Auth",!0)):W2()}function OI(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function B2(t){const e=OI(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:q0(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:q0(o)}}}function q0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function W2(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ny{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return _r("not implemented")}_getIdTokenResponse(e){return _r("not implemented")}_linkToIdToken(e,n){return _r("not implemented")}_getReauthenticationResolver(e){return _r("not implemented")}}async function H2(t,e){return Fs(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $2(t,e){return oc(t,"POST","/v1/accounts:signInWithPassword",Vs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q2(t,e){return oc(t,"POST","/v1/accounts:signInWithEmailLink",Vs(t,e))}async function Y2(t,e){return oc(t,"POST","/v1/accounts:signInWithEmailLink",Vs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl extends ny{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Vl(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Vl(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return dm(e,n,"signInWithPassword",$2);case"emailLink":return q2(e,{email:this._email,oobCode:this._password});default:Rn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return dm(e,r,"signUpPassword",H2);case"emailLink":return Y2(e,{idToken:n,email:this._email,oobCode:this._password});default:Rn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mo(t,e){return oc(t,"POST","/v1/accounts:signInWithIdp",Vs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G2="http://localhost";class _i extends ny{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new _i(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Rn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const o=new _i(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return mo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,mo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,mo(e,n)}buildRequest(){const e={requestUri:G2,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=sc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K2(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Q2(t){const e=Fa(ja(t)).link,n=e?Fa(ja(e)).deep_link_id:null,r=Fa(ja(t)).deep_link_id;return(r?Fa(ja(r)).link:null)||r||n||e||t}class ry{constructor(e){const n=Fa(ja(e)),r=n.apiKey??null,s=n.oobCode??null,i=K2(n.mode??null);Q(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=Q2(e);try{return new ry(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(){this.providerId=$o.PROVIDER_ID}static credential(e,n){return Vl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=ry.parseLink(n);return Q(r,"argument-error"),Vl._fromEmailAndCode(e,r.code,r.tenantId)}}$o.PROVIDER_ID="password";$o.EMAIL_PASSWORD_SIGN_IN_METHOD="password";$o.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac extends MI{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr extends ac{constructor(){super("facebook.com")}static credential(e){return _i._fromParams({providerId:Gr.PROVIDER_ID,signInMethod:Gr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Gr.credentialFromTaggedObject(e)}static credentialFromError(e){return Gr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Gr.credential(e.oauthAccessToken)}catch{return null}}}Gr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Gr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr extends ac{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return _i._fromParams({providerId:Kr.PROVIDER_ID,signInMethod:Kr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Kr.credentialFromTaggedObject(e)}static credentialFromError(e){return Kr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Kr.credential(n,r)}catch{return null}}}Kr.GOOGLE_SIGN_IN_METHOD="google.com";Kr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr extends ac{constructor(){super("github.com")}static credential(e){return _i._fromParams({providerId:Qr.PROVIDER_ID,signInMethod:Qr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qr.credentialFromTaggedObject(e)}static credentialFromError(e){return Qr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Qr.credential(e.oauthAccessToken)}catch{return null}}}Qr.GITHUB_SIGN_IN_METHOD="github.com";Qr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr extends ac{constructor(){super("twitter.com")}static credential(e,n){return _i._fromParams({providerId:Xr.PROVIDER_ID,signInMethod:Xr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Xr.credentialFromTaggedObject(e)}static credentialFromError(e){return Xr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Xr.credential(n,r)}catch{return null}}}Xr.TWITTER_SIGN_IN_METHOD="twitter.com";Xr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LI(t,e){return oc(t,"POST","/v1/accounts:signUp",Vs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Tn._fromIdTokenResponse(e,r,s),o=Y0(r);return new kr({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Y0(r);return new kr({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Y0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X2(t){var s;if(Ut(t.app))return Promise.reject(Xn(t));const e=js(t);if(await e._initializationPromise,(s=e.currentUser)!=null&&s.isAnonymous)return new kr({user:e.currentUser,providerId:null,operationType:"signIn"});const n=await LI(e,{returnSecureToken:!0}),r=await kr._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh extends or{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,vh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new vh(e,n,r,s)}}function VI(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?vh._fromErrorAndOperation(t,i,e,r):i})}async function J2(t,e,n=!1){const r=await Ll(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return kr._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z2(t,e,n=!1){const{auth:r}=t;if(Ut(r.app))return Promise.reject(Xn(r));const s="reauthenticate";try{const i=await Ll(t,VI(r,s,e,t),n);Q(i.idToken,r,"internal-error");const o=ey(i.idToken);Q(o,r,"internal-error");const{sub:a}=o;return Q(t.uid===a,r,"user-mismatch"),kr._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Rn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FI(t,e,n=!1){if(Ut(t.app))return Promise.reject(Xn(t));const r="signIn",s=await VI(t,r,e),i=await kr._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function eO(t,e){return FI(js(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jI(t){const e=js(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function tO(t,e,n){if(Ut(t.app))return Promise.reject(Xn(t));const r=js(t),o=await dm(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",LI).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&jI(t),l}),a=await kr._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function nO(t,e,n){return Ut(t.app)?Promise.reject(Xn(t)):eO(at(t),$o.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&jI(t),r})}function rO(t,e,n,r){return at(t).onIdTokenChanged(e,n,r)}function sO(t,e,n){return at(t).beforeAuthStateChanged(e,n)}function iO(t,e,n,r){return at(t).onAuthStateChanged(e,n,r)}function oO(t){return at(t).signOut()}const wh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(wh,"1"),this.storage.removeItem(wh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aO=1e3,lO=10;class zI extends UI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=CI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);I2()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,lO):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},aO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}zI.type="LOCAL";const cO=zI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI extends UI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}BI.type="SESSION";const WI=BI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uO(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new pd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,i)),l=await uO(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}pd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sy(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hO{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const c=sy("",20);s.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(d){const f=d;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(f.data.response);break;default:clearTimeout(h),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jn(){return window}function dO(t){Jn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HI(){return typeof Jn().WorkerGlobalScope<"u"&&typeof Jn().importScripts=="function"}async function fO(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function pO(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function mO(){return HI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $I="firebaseLocalStorageDb",gO=1,xh="firebaseLocalStorage",qI="fbase_key";class lc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function md(t,e){return t.transaction([xh],e?"readwrite":"readonly").objectStore(xh)}function yO(){const t=indexedDB.deleteDatabase($I);return new lc(t).toPromise()}function fm(){const t=indexedDB.open($I,gO);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(xh,{keyPath:qI})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(xh)?e(r):(r.close(),await yO(),e(await fm()))})})}async function G0(t,e,n){const r=md(t,!0).put({[qI]:e,value:n});return new lc(r).toPromise()}async function _O(t,e){const n=md(t,!1).get(e),r=await new lc(n).toPromise();return r===void 0?null:r.value}function K0(t,e){const n=md(t,!0).delete(e);return new lc(n).toPromise()}const vO=800,wO=3;class YI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await fm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>wO)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return HI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=pd._getInstance(mO()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await fO(),!this.activeServiceWorker)return;this.sender=new hO(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||pO()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await fm();return await G0(e,wh,"1"),await K0(e,wh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>G0(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>_O(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>K0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=md(s,!1).getAll();return new lc(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),vO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}YI.type="LOCAL";const xO=YI;new ic(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EO(t,e){return e?vr(e):(Q(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iy extends ny{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return mo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return mo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return mo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function TO(t){return FI(t.auth,new iy(t),t.bypassAuthState)}function bO(t){const{auth:e,user:n}=t;return Q(n,e,"internal-error"),Z2(n,new iy(t),t.bypassAuthState)}async function IO(t){const{auth:e,user:n}=t;return Q(n,e,"internal-error"),J2(n,new iy(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return TO;case"linkViaPopup":case"linkViaRedirect":return IO;case"reauthViaPopup":case"reauthViaRedirect":return bO;default:Rn(this.auth,"internal-error")}}resolve(e){Sr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Sr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SO=new ic(2e3,1e4);class so extends GI{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,so.currentPopupAction&&so.currentPopupAction.cancel(),so.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Q(e,this.auth,"internal-error"),e}async onExecution(){Sr(this.filter.length===1,"Popup operations only handle one event");const e=sy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Qn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Qn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,so.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Qn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,SO.get())};e()}}so.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kO="pendingRedirect",Cu=new Map;class PO extends GI{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Cu.get(this.auth._key());if(!e){try{const r=await AO(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Cu.set(this.auth._key(),e)}return this.bypassAuthState||Cu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function AO(t,e){const n=NO(e),r=RO(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function CO(t,e){Cu.set(t._key(),e)}function RO(t){return vr(t._redirectPersistence)}function NO(t){return Au(kO,t.config.apiKey,t.name)}async function DO(t,e,n=!1){if(Ut(t.app))return Promise.reject(Xn(t));const r=js(t),s=EO(r,e),o=await new PO(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OO=10*60*1e3;class MO{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!LO(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!KI(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(Qn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=OO&&this.cachedEventUids.clear(),this.cachedEventUids.has(Q0(e))}saveEventToCache(e){this.cachedEventUids.add(Q0(e)),this.lastProcessedEventTime=Date.now()}}function Q0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function KI({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function LO(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return KI(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VO(t,e={}){return Fs(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FO=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,jO=/^https?/;async function UO(t){if(t.config.emulator)return;const{authorizedDomains:e}=await VO(t);for(const n of e)try{if(zO(n))return}catch{}Rn(t,"unauthorized-domain")}function zO(t){const e=um(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!jO.test(n))return!1;if(FO.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BO=new ic(3e4,6e4);function X0(){const t=Jn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function WO(t){return new Promise((e,n)=>{var s,i,o;function r(){X0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{X0(),n(Qn(t,"network-request-failed"))},timeout:BO.get()})}if((i=(s=Jn().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((o=Jn().gapi)!=null&&o.load)r();else{const a=O2("iframefcb");return Jn()[a]=()=>{gapi.load?r():n(Qn(t,"network-request-failed"))},NI(`${D2()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Ru=null,e})}let Ru=null;function HO(t){return Ru=Ru||WO(t),Ru}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $O=new ic(5e3,15e3),qO="__/auth/iframe",YO="emulator/auth/iframe",GO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},KO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function QO(t){const e=t.config;Q(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Zg(e,YO):`https://${t.config.authDomain}/${qO}`,r={apiKey:e.apiKey,appName:t.name,v:Si},s=KO.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${sc(r).slice(1)}`}async function XO(t){const e=await HO(t),n=Jn().gapi;return Q(n,t,"internal-error"),e.open({where:document.body,url:QO(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:GO,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Qn(t,"network-request-failed"),a=Jn().setTimeout(()=>{i(o)},$O.get());function l(){Jn().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ZO=500,eM=600,tM="_blank",nM="http://localhost";class J0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function rM(t,e,n,r=ZO,s=eM){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l={...JO,width:r.toString(),height:s.toString(),top:i,left:o},c=Pt().toLowerCase();n&&(a=II(c)?tM:n),TI(c)&&(e=e||nM,l.scrollbars="yes");const h=Object.entries(l).reduce((f,[m,v])=>`${f}${m}=${v},`,"");if(b2(c)&&a!=="_self")return sM(e||"",a),new J0(null);const d=window.open(e||"",a,h);Q(d,t,"popup-blocked");try{d.focus()}catch{}return new J0(d)}function sM(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iM="__/auth/handler",oM="emulator/auth/handler",aM=encodeURIComponent("fac");async function Z0(t,e,n,r,s,i){Q(t.config.authDomain,t,"auth-domain-config-required"),Q(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Si,eventId:s};if(e instanceof MI){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",qN(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries({}))o[h]=d}if(e instanceof ac){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),c=l?`#${aM}=${encodeURIComponent(l)}`:"";return`${lM(t)}?${sc(a).slice(1)}${c}`}function lM({config:t}){return t.emulator?Zg(t,oM):`https://${t.authDomain}/${iM}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uf="webStorageSupport";class cM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=WI,this._completeRedirectFn=DO,this._overrideRedirectResult=CO}async _openPopup(e,n,r,s){var o;Sr((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const i=await Z0(e,n,r,um(),s);return rM(e,i,sy())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Z0(e,n,r,um(),s);return dO(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Sr(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await XO(e),r=new MO(e);return n.register("authEvent",s=>(Q(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Uf,{type:Uf},s=>{var o;const i=(o=s==null?void 0:s[0])==null?void 0:o[Uf];i!==void 0&&n(!!i),Rn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=UO(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return CI()||bI()||ty()}}const uM=cM;var ew="@firebase/auth",tw="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hM{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dM(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function fM(t){yi(new bs("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Q(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:RI(t)},c=new C2(r,s,i,l);return U2(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),yi(new bs("auth-internal",e=>{const n=js(e.getProvider("auth").getImmediate());return(r=>new hM(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Kn(ew,tw,dM(t)),Kn(ew,tw,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pM=5*60,mM=lI("authIdTokenMaxAge")||pM;let nw=null;const gM=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>mM)return;const s=n==null?void 0:n.token;nw!==s&&(nw=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function yM(t=Xg()){const e=dd(t,"auth");if(e.isInitialized())return e.getImmediate();const n=j2(t,{popupRedirectResolver:uM,persistence:[xO,cO,WI]}),r=lI("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=gM(i.toString());sO(n,o,()=>o(n.currentUser)),rO(n,a=>o(a))}}const s=iI("auth");return s&&z2(n,`http://${s}`),n}function _M(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}R2({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Qn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",_M().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});fM("Browser");var vM="firebase",wM="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Kn(vM,wM,"app");var rw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var _s,QI;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,y){function k(){}k.prototype=y.prototype,I.F=y.prototype,I.prototype=new k,I.prototype.constructor=I,I.D=function(P,A,N){for(var C=Array(arguments.length-2),le=2;le<arguments.length;le++)C[le-2]=arguments[le];return y.prototype[A].apply(P,C)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(I,y,k){k||(k=0);const P=Array(16);if(typeof y=="string")for(var A=0;A<16;++A)P[A]=y.charCodeAt(k++)|y.charCodeAt(k++)<<8|y.charCodeAt(k++)<<16|y.charCodeAt(k++)<<24;else for(A=0;A<16;++A)P[A]=y[k++]|y[k++]<<8|y[k++]<<16|y[k++]<<24;y=I.g[0],k=I.g[1],A=I.g[2];let N=I.g[3],C;C=y+(N^k&(A^N))+P[0]+3614090360&4294967295,y=k+(C<<7&4294967295|C>>>25),C=N+(A^y&(k^A))+P[1]+3905402710&4294967295,N=y+(C<<12&4294967295|C>>>20),C=A+(k^N&(y^k))+P[2]+606105819&4294967295,A=N+(C<<17&4294967295|C>>>15),C=k+(y^A&(N^y))+P[3]+3250441966&4294967295,k=A+(C<<22&4294967295|C>>>10),C=y+(N^k&(A^N))+P[4]+4118548399&4294967295,y=k+(C<<7&4294967295|C>>>25),C=N+(A^y&(k^A))+P[5]+1200080426&4294967295,N=y+(C<<12&4294967295|C>>>20),C=A+(k^N&(y^k))+P[6]+2821735955&4294967295,A=N+(C<<17&4294967295|C>>>15),C=k+(y^A&(N^y))+P[7]+4249261313&4294967295,k=A+(C<<22&4294967295|C>>>10),C=y+(N^k&(A^N))+P[8]+1770035416&4294967295,y=k+(C<<7&4294967295|C>>>25),C=N+(A^y&(k^A))+P[9]+2336552879&4294967295,N=y+(C<<12&4294967295|C>>>20),C=A+(k^N&(y^k))+P[10]+4294925233&4294967295,A=N+(C<<17&4294967295|C>>>15),C=k+(y^A&(N^y))+P[11]+2304563134&4294967295,k=A+(C<<22&4294967295|C>>>10),C=y+(N^k&(A^N))+P[12]+1804603682&4294967295,y=k+(C<<7&4294967295|C>>>25),C=N+(A^y&(k^A))+P[13]+4254626195&4294967295,N=y+(C<<12&4294967295|C>>>20),C=A+(k^N&(y^k))+P[14]+2792965006&4294967295,A=N+(C<<17&4294967295|C>>>15),C=k+(y^A&(N^y))+P[15]+1236535329&4294967295,k=A+(C<<22&4294967295|C>>>10),C=y+(A^N&(k^A))+P[1]+4129170786&4294967295,y=k+(C<<5&4294967295|C>>>27),C=N+(k^A&(y^k))+P[6]+3225465664&4294967295,N=y+(C<<9&4294967295|C>>>23),C=A+(y^k&(N^y))+P[11]+643717713&4294967295,A=N+(C<<14&4294967295|C>>>18),C=k+(N^y&(A^N))+P[0]+3921069994&4294967295,k=A+(C<<20&4294967295|C>>>12),C=y+(A^N&(k^A))+P[5]+3593408605&4294967295,y=k+(C<<5&4294967295|C>>>27),C=N+(k^A&(y^k))+P[10]+38016083&4294967295,N=y+(C<<9&4294967295|C>>>23),C=A+(y^k&(N^y))+P[15]+3634488961&4294967295,A=N+(C<<14&4294967295|C>>>18),C=k+(N^y&(A^N))+P[4]+3889429448&4294967295,k=A+(C<<20&4294967295|C>>>12),C=y+(A^N&(k^A))+P[9]+568446438&4294967295,y=k+(C<<5&4294967295|C>>>27),C=N+(k^A&(y^k))+P[14]+3275163606&4294967295,N=y+(C<<9&4294967295|C>>>23),C=A+(y^k&(N^y))+P[3]+4107603335&4294967295,A=N+(C<<14&4294967295|C>>>18),C=k+(N^y&(A^N))+P[8]+1163531501&4294967295,k=A+(C<<20&4294967295|C>>>12),C=y+(A^N&(k^A))+P[13]+2850285829&4294967295,y=k+(C<<5&4294967295|C>>>27),C=N+(k^A&(y^k))+P[2]+4243563512&4294967295,N=y+(C<<9&4294967295|C>>>23),C=A+(y^k&(N^y))+P[7]+1735328473&4294967295,A=N+(C<<14&4294967295|C>>>18),C=k+(N^y&(A^N))+P[12]+2368359562&4294967295,k=A+(C<<20&4294967295|C>>>12),C=y+(k^A^N)+P[5]+4294588738&4294967295,y=k+(C<<4&4294967295|C>>>28),C=N+(y^k^A)+P[8]+2272392833&4294967295,N=y+(C<<11&4294967295|C>>>21),C=A+(N^y^k)+P[11]+1839030562&4294967295,A=N+(C<<16&4294967295|C>>>16),C=k+(A^N^y)+P[14]+4259657740&4294967295,k=A+(C<<23&4294967295|C>>>9),C=y+(k^A^N)+P[1]+2763975236&4294967295,y=k+(C<<4&4294967295|C>>>28),C=N+(y^k^A)+P[4]+1272893353&4294967295,N=y+(C<<11&4294967295|C>>>21),C=A+(N^y^k)+P[7]+4139469664&4294967295,A=N+(C<<16&4294967295|C>>>16),C=k+(A^N^y)+P[10]+3200236656&4294967295,k=A+(C<<23&4294967295|C>>>9),C=y+(k^A^N)+P[13]+681279174&4294967295,y=k+(C<<4&4294967295|C>>>28),C=N+(y^k^A)+P[0]+3936430074&4294967295,N=y+(C<<11&4294967295|C>>>21),C=A+(N^y^k)+P[3]+3572445317&4294967295,A=N+(C<<16&4294967295|C>>>16),C=k+(A^N^y)+P[6]+76029189&4294967295,k=A+(C<<23&4294967295|C>>>9),C=y+(k^A^N)+P[9]+3654602809&4294967295,y=k+(C<<4&4294967295|C>>>28),C=N+(y^k^A)+P[12]+3873151461&4294967295,N=y+(C<<11&4294967295|C>>>21),C=A+(N^y^k)+P[15]+530742520&4294967295,A=N+(C<<16&4294967295|C>>>16),C=k+(A^N^y)+P[2]+3299628645&4294967295,k=A+(C<<23&4294967295|C>>>9),C=y+(A^(k|~N))+P[0]+4096336452&4294967295,y=k+(C<<6&4294967295|C>>>26),C=N+(k^(y|~A))+P[7]+1126891415&4294967295,N=y+(C<<10&4294967295|C>>>22),C=A+(y^(N|~k))+P[14]+2878612391&4294967295,A=N+(C<<15&4294967295|C>>>17),C=k+(N^(A|~y))+P[5]+4237533241&4294967295,k=A+(C<<21&4294967295|C>>>11),C=y+(A^(k|~N))+P[12]+1700485571&4294967295,y=k+(C<<6&4294967295|C>>>26),C=N+(k^(y|~A))+P[3]+2399980690&4294967295,N=y+(C<<10&4294967295|C>>>22),C=A+(y^(N|~k))+P[10]+4293915773&4294967295,A=N+(C<<15&4294967295|C>>>17),C=k+(N^(A|~y))+P[1]+2240044497&4294967295,k=A+(C<<21&4294967295|C>>>11),C=y+(A^(k|~N))+P[8]+1873313359&4294967295,y=k+(C<<6&4294967295|C>>>26),C=N+(k^(y|~A))+P[15]+4264355552&4294967295,N=y+(C<<10&4294967295|C>>>22),C=A+(y^(N|~k))+P[6]+2734768916&4294967295,A=N+(C<<15&4294967295|C>>>17),C=k+(N^(A|~y))+P[13]+1309151649&4294967295,k=A+(C<<21&4294967295|C>>>11),C=y+(A^(k|~N))+P[4]+4149444226&4294967295,y=k+(C<<6&4294967295|C>>>26),C=N+(k^(y|~A))+P[11]+3174756917&4294967295,N=y+(C<<10&4294967295|C>>>22),C=A+(y^(N|~k))+P[2]+718787259&4294967295,A=N+(C<<15&4294967295|C>>>17),C=k+(N^(A|~y))+P[9]+3951481745&4294967295,I.g[0]=I.g[0]+y&4294967295,I.g[1]=I.g[1]+(A+(C<<21&4294967295|C>>>11))&4294967295,I.g[2]=I.g[2]+A&4294967295,I.g[3]=I.g[3]+N&4294967295}r.prototype.v=function(I,y){y===void 0&&(y=I.length);const k=y-this.blockSize,P=this.C;let A=this.h,N=0;for(;N<y;){if(A==0)for(;N<=k;)s(this,I,N),N+=this.blockSize;if(typeof I=="string"){for(;N<y;)if(P[A++]=I.charCodeAt(N++),A==this.blockSize){s(this,P),A=0;break}}else for(;N<y;)if(P[A++]=I[N++],A==this.blockSize){s(this,P),A=0;break}}this.h=A,this.o+=y},r.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var y=1;y<I.length-8;++y)I[y]=0;y=this.o*8;for(var k=I.length-8;k<I.length;++k)I[k]=y&255,y/=256;for(this.v(I),I=Array(16),y=0,k=0;k<4;++k)for(let P=0;P<32;P+=8)I[y++]=this.g[k]>>>P&255;return I};function i(I,y){var k=a;return Object.prototype.hasOwnProperty.call(k,I)?k[I]:k[I]=y(I)}function o(I,y){this.h=y;const k=[];let P=!0;for(let A=I.length-1;A>=0;A--){const N=I[A]|0;P&&N==y||(k[A]=N,P=!1)}this.g=k}var a={};function l(I){return-128<=I&&I<128?i(I,function(y){return new o([y|0],y<0?-1:0)}):new o([I|0],I<0?-1:0)}function c(I){if(isNaN(I)||!isFinite(I))return d;if(I<0)return T(c(-I));const y=[];let k=1;for(let P=0;I>=k;P++)y[P]=I/k|0,k*=4294967296;return new o(y,0)}function h(I,y){if(I.length==0)throw Error("number format error: empty string");if(y=y||10,y<2||36<y)throw Error("radix out of range: "+y);if(I.charAt(0)=="-")return T(h(I.substring(1),y));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');const k=c(Math.pow(y,8));let P=d;for(let N=0;N<I.length;N+=8){var A=Math.min(8,I.length-N);const C=parseInt(I.substring(N,N+A),y);A<8?(A=c(Math.pow(y,A)),P=P.j(A).add(c(C))):(P=P.j(k),P=P.add(c(C)))}return P}var d=l(0),f=l(1),m=l(16777216);t=o.prototype,t.m=function(){if(w(this))return-T(this).m();let I=0,y=1;for(let k=0;k<this.g.length;k++){const P=this.i(k);I+=(P>=0?P:4294967296+P)*y,y*=4294967296}return I},t.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(v(this))return"0";if(w(this))return"-"+T(this).toString(I);const y=c(Math.pow(I,6));var k=this;let P="";for(;;){const A=R(k,y).g;k=_(k,A.j(y));let N=((k.g.length>0?k.g[0]:k.h)>>>0).toString(I);if(k=A,v(k))return N+P;for(;N.length<6;)N="0"+N;P=N+P}},t.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function v(I){if(I.h!=0)return!1;for(let y=0;y<I.g.length;y++)if(I.g[y]!=0)return!1;return!0}function w(I){return I.h==-1}t.l=function(I){return I=_(this,I),w(I)?-1:v(I)?0:1};function T(I){const y=I.g.length,k=[];for(let P=0;P<y;P++)k[P]=~I.g[P];return new o(k,~I.h).add(f)}t.abs=function(){return w(this)?T(this):this},t.add=function(I){const y=Math.max(this.g.length,I.g.length),k=[];let P=0;for(let A=0;A<=y;A++){let N=P+(this.i(A)&65535)+(I.i(A)&65535),C=(N>>>16)+(this.i(A)>>>16)+(I.i(A)>>>16);P=C>>>16,N&=65535,C&=65535,k[A]=C<<16|N}return new o(k,k[k.length-1]&-2147483648?-1:0)};function _(I,y){return I.add(T(y))}t.j=function(I){if(v(this)||v(I))return d;if(w(this))return w(I)?T(this).j(T(I)):T(T(this).j(I));if(w(I))return T(this.j(T(I)));if(this.l(m)<0&&I.l(m)<0)return c(this.m()*I.m());const y=this.g.length+I.g.length,k=[];for(var P=0;P<2*y;P++)k[P]=0;for(P=0;P<this.g.length;P++)for(let A=0;A<I.g.length;A++){const N=this.i(P)>>>16,C=this.i(P)&65535,le=I.i(A)>>>16,re=I.i(A)&65535;k[2*P+2*A]+=C*re,x(k,2*P+2*A),k[2*P+2*A+1]+=N*re,x(k,2*P+2*A+1),k[2*P+2*A+1]+=C*le,x(k,2*P+2*A+1),k[2*P+2*A+2]+=N*le,x(k,2*P+2*A+2)}for(I=0;I<y;I++)k[I]=k[2*I+1]<<16|k[2*I];for(I=y;I<2*y;I++)k[I]=0;return new o(k,0)};function x(I,y){for(;(I[y]&65535)!=I[y];)I[y+1]+=I[y]>>>16,I[y]&=65535,y++}function b(I,y){this.g=I,this.h=y}function R(I,y){if(v(y))throw Error("division by zero");if(v(I))return new b(d,d);if(w(I))return y=R(T(I),y),new b(T(y.g),T(y.h));if(w(y))return y=R(I,T(y)),new b(T(y.g),y.h);if(I.g.length>30){if(w(I)||w(y))throw Error("slowDivide_ only works with positive integers.");for(var k=f,P=y;P.l(I)<=0;)k=D(k),P=D(P);var A=L(k,1),N=L(P,1);for(P=L(P,2),k=L(k,2);!v(P);){var C=N.add(P);C.l(I)<=0&&(A=A.add(k),N=C),P=L(P,1),k=L(k,1)}return y=_(I,A.j(y)),new b(A,y)}for(A=d;I.l(y)>=0;){for(k=Math.max(1,Math.floor(I.m()/y.m())),P=Math.ceil(Math.log(k)/Math.LN2),P=P<=48?1:Math.pow(2,P-48),N=c(k),C=N.j(y);w(C)||C.l(I)>0;)k-=P,N=c(k),C=N.j(y);v(N)&&(N=f),A=A.add(N),I=_(I,C)}return new b(A,I)}t.B=function(I){return R(this,I).h},t.and=function(I){const y=Math.max(this.g.length,I.g.length),k=[];for(let P=0;P<y;P++)k[P]=this.i(P)&I.i(P);return new o(k,this.h&I.h)},t.or=function(I){const y=Math.max(this.g.length,I.g.length),k=[];for(let P=0;P<y;P++)k[P]=this.i(P)|I.i(P);return new o(k,this.h|I.h)},t.xor=function(I){const y=Math.max(this.g.length,I.g.length),k=[];for(let P=0;P<y;P++)k[P]=this.i(P)^I.i(P);return new o(k,this.h^I.h)};function D(I){const y=I.g.length+1,k=[];for(let P=0;P<y;P++)k[P]=I.i(P)<<1|I.i(P-1)>>>31;return new o(k,I.h)}function L(I,y){const k=y>>5;y%=32;const P=I.g.length-k,A=[];for(let N=0;N<P;N++)A[N]=y>0?I.i(N+k)>>>y|I.i(N+k+1)<<32-y:I.i(N+k);return new o(A,I.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,QI=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,_s=o}).apply(typeof rw<"u"?rw:typeof self<"u"?self:typeof window<"u"?window:{});var Gc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var XI,Ua,JI,Nu,pm,ZI,e1,t1;(function(){var t,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Gc=="object"&&Gc];for(var p=0;p<u.length;++p){var g=u[p];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function s(u,p){if(p)e:{var g=r;u=u.split(".");for(var S=0;S<u.length-1;S++){var O=u[S];if(!(O in g))break e;g=g[O]}u=u[u.length-1],S=g[u],p=p(S),p!=S&&p!=null&&e(g,u,{configurable:!0,writable:!0,value:p})}}s("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(u){return u||function(p){var g=[],S;for(S in p)Object.prototype.hasOwnProperty.call(p,S)&&g.push([S,p[S]]);return g}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function a(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function l(u,p,g){return u.call.apply(u.bind,arguments)}function c(u,p,g){return c=l,c.apply(null,arguments)}function h(u,p){var g=Array.prototype.slice.call(arguments,1);return function(){var S=g.slice();return S.push.apply(S,arguments),u.apply(this,S)}}function d(u,p){function g(){}g.prototype=p.prototype,u.Z=p.prototype,u.prototype=new g,u.prototype.constructor=u,u.Ob=function(S,O,V){for(var W=Array(arguments.length-2),ne=2;ne<arguments.length;ne++)W[ne-2]=arguments[ne];return p.prototype[O].apply(S,W)}}var f=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function m(u){const p=u.length;if(p>0){const g=Array(p);for(let S=0;S<p;S++)g[S]=u[S];return g}return[]}function v(u,p){for(let S=1;S<arguments.length;S++){const O=arguments[S];var g=typeof O;if(g=g!="object"?g:O?Array.isArray(O)?"array":g:"null",g=="array"||g=="object"&&typeof O.length=="number"){g=u.length||0;const V=O.length||0;u.length=g+V;for(let W=0;W<V;W++)u[g+W]=O[W]}else u.push(O)}}class w{constructor(p,g){this.i=p,this.j=g,this.h=0,this.g=null}get(){let p;return this.h>0?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function T(u){o.setTimeout(()=>{throw u},0)}function _(){var u=I;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class x{constructor(){this.h=this.g=null}add(p,g){const S=b.get();S.set(p,g),this.h?this.h.next=S:this.g=S,this.h=S}}var b=new w(()=>new R,u=>u.reset());class R{constructor(){this.next=this.g=this.h=null}set(p,g){this.h=p,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let D,L=!1,I=new x,y=()=>{const u=Promise.resolve(void 0);D=()=>{u.then(k)}};function k(){for(var u;u=_();){try{u.h.call(u.g)}catch(g){T(g)}var p=b;p.j(u),p.h<100&&(p.h++,u.next=p.g,p.g=u)}L=!1}function P(){this.u=this.u,this.C=this.C}P.prototype.u=!1,P.prototype.dispose=function(){this.u||(this.u=!0,this.N())},P.prototype[Symbol.dispose]=function(){this.dispose()},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function A(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}A.prototype.h=function(){this.defaultPrevented=!0};var N=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const g=()=>{};o.addEventListener("test",g,p),o.removeEventListener("test",g,p)}catch{}return u}();function C(u){return/^[\s\xa0]*$/.test(u)}function le(u,p){A.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,p)}d(le,A),le.prototype.init=function(u,p){const g=this.type=u.type,S=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget,p||(g=="mouseover"?p=u.fromElement:g=="mouseout"&&(p=u.toElement)),this.relatedTarget=p,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&le.Z.h.call(this)},le.prototype.h=function(){le.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var re="closure_listenable_"+(Math.random()*1e6|0),we=0;function We(u,p,g,S,O){this.listener=u,this.proxy=null,this.src=p,this.type=g,this.capture=!!S,this.ha=O,this.key=++we,this.da=this.fa=!1}function F(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Y(u,p,g){for(const S in u)p.call(g,u[S],S,u)}function G(u,p){for(const g in u)p.call(void 0,u[g],g,u)}function J(u){const p={};for(const g in u)p[g]=u[g];return p}const ue="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Yt(u,p){let g,S;for(let O=1;O<arguments.length;O++){S=arguments[O];for(g in S)u[g]=S[g];for(let V=0;V<ue.length;V++)g=ue[V],Object.prototype.hasOwnProperty.call(S,g)&&(u[g]=S[g])}}function Ke(u){this.src=u,this.g={},this.h=0}Ke.prototype.add=function(u,p,g,S,O){const V=u.toString();u=this.g[V],u||(u=this.g[V]=[],this.h++);const W=tt(u,p,S,O);return W>-1?(p=u[W],g||(p.fa=!1)):(p=new We(p,this.src,V,!!S,O),p.fa=g,u.push(p)),p};function Gt(u,p){const g=p.type;if(g in u.g){var S=u.g[g],O=Array.prototype.indexOf.call(S,p,void 0),V;(V=O>=0)&&Array.prototype.splice.call(S,O,1),V&&(F(p),u.g[g].length==0&&(delete u.g[g],u.h--))}}function tt(u,p,g,S){for(let O=0;O<u.length;++O){const V=u[O];if(!V.da&&V.listener==p&&V.capture==!!g&&V.ha==S)return O}return-1}var Dr="closure_lm_"+(Math.random()*1e6|0),jd={};function h_(u,p,g,S,O){if(Array.isArray(p)){for(let V=0;V<p.length;V++)h_(u,p[V],g,S,O);return null}return g=p_(g),u&&u[re]?u.J(p,g,a(S)?!!S.capture:!1,O):lP(u,p,g,!1,S,O)}function lP(u,p,g,S,O,V){if(!p)throw Error("Invalid event type");const W=a(O)?!!O.capture:!!O;let ne=zd(u);if(ne||(u[Dr]=ne=new Ke(u)),g=ne.add(p,g,S,W,V),g.proxy)return g;if(S=cP(),g.proxy=S,S.src=u,S.listener=g,u.addEventListener)N||(O=W),O===void 0&&(O=!1),u.addEventListener(p.toString(),S,O);else if(u.attachEvent)u.attachEvent(f_(p.toString()),S);else if(u.addListener&&u.removeListener)u.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return g}function cP(){function u(g){return p.call(u.src,u.listener,g)}const p=uP;return u}function d_(u,p,g,S,O){if(Array.isArray(p))for(var V=0;V<p.length;V++)d_(u,p[V],g,S,O);else S=a(S)?!!S.capture:!!S,g=p_(g),u&&u[re]?(u=u.i,V=String(p).toString(),V in u.g&&(p=u.g[V],g=tt(p,g,S,O),g>-1&&(F(p[g]),Array.prototype.splice.call(p,g,1),p.length==0&&(delete u.g[V],u.h--)))):u&&(u=zd(u))&&(p=u.g[p.toString()],u=-1,p&&(u=tt(p,g,S,O)),(g=u>-1?p[u]:null)&&Ud(g))}function Ud(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[re])Gt(p.i,u);else{var g=u.type,S=u.proxy;p.removeEventListener?p.removeEventListener(g,S,u.capture):p.detachEvent?p.detachEvent(f_(g),S):p.addListener&&p.removeListener&&p.removeListener(S),(g=zd(p))?(Gt(g,u),g.h==0&&(g.src=null,p[Dr]=null)):F(u)}}}function f_(u){return u in jd?jd[u]:jd[u]="on"+u}function uP(u,p){if(u.da)u=!0;else{p=new le(p,this);const g=u.listener,S=u.ha||u.src;u.fa&&Ud(u),u=g.call(S,p)}return u}function zd(u){return u=u[Dr],u instanceof Ke?u:null}var Bd="__closure_events_fn_"+(Math.random()*1e9>>>0);function p_(u){return typeof u=="function"?u:(u[Bd]||(u[Bd]=function(p){return u.handleEvent(p)}),u[Bd])}function vt(){P.call(this),this.i=new Ke(this),this.M=this,this.G=null}d(vt,P),vt.prototype[re]=!0,vt.prototype.removeEventListener=function(u,p,g,S){d_(this,u,p,g,S)};function Ct(u,p){var g,S=u.G;if(S)for(g=[];S;S=S.G)g.push(S);if(u=u.M,S=p.type||p,typeof p=="string")p=new A(p,u);else if(p instanceof A)p.target=p.target||u;else{var O=p;p=new A(S,u),Yt(p,O)}O=!0;let V,W;if(g)for(W=g.length-1;W>=0;W--)V=p.g=g[W],O=_c(V,S,!0,p)&&O;if(V=p.g=u,O=_c(V,S,!0,p)&&O,O=_c(V,S,!1,p)&&O,g)for(W=0;W<g.length;W++)V=p.g=g[W],O=_c(V,S,!1,p)&&O}vt.prototype.N=function(){if(vt.Z.N.call(this),this.i){var u=this.i;for(const p in u.g){const g=u.g[p];for(let S=0;S<g.length;S++)F(g[S]);delete u.g[p],u.h--}}this.G=null},vt.prototype.J=function(u,p,g,S){return this.i.add(String(u),p,!1,g,S)},vt.prototype.K=function(u,p,g,S){return this.i.add(String(u),p,!0,g,S)};function _c(u,p,g,S){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();let O=!0;for(let V=0;V<p.length;++V){const W=p[V];if(W&&!W.da&&W.capture==g){const ne=W.listener,nt=W.ha||W.src;W.fa&&Gt(u.i,W),O=ne.call(nt,S)!==!1&&O}}return O&&!S.defaultPrevented}function hP(u,p){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=c(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(p)>2147483647?-1:o.setTimeout(u,p||0)}function m_(u){u.g=hP(()=>{u.g=null,u.i&&(u.i=!1,m_(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class dP extends P{constructor(p,g){super(),this.m=p,this.l=g,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:m_(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ea(u){P.call(this),this.h=u,this.g={}}d(ea,P);var g_=[];function y_(u){Y(u.g,function(p,g){this.g.hasOwnProperty(g)&&Ud(p)},u),u.g={}}ea.prototype.N=function(){ea.Z.N.call(this),y_(this)},ea.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Wd=o.JSON.stringify,fP=o.JSON.parse,pP=class{stringify(u){return o.JSON.stringify(u,void 0)}parse(u){return o.JSON.parse(u,void 0)}};function __(){}function v_(){}var ta={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Hd(){A.call(this,"d")}d(Hd,A);function $d(){A.call(this,"c")}d($d,A);var zs={},w_=null;function vc(){return w_=w_||new vt}zs.Ia="serverreachability";function x_(u){A.call(this,zs.Ia,u)}d(x_,A);function na(u){const p=vc();Ct(p,new x_(p))}zs.STAT_EVENT="statevent";function E_(u,p){A.call(this,zs.STAT_EVENT,u),this.stat=p}d(E_,A);function Rt(u){const p=vc();Ct(p,new E_(p,u))}zs.Ja="timingevent";function T_(u,p){A.call(this,zs.Ja,u),this.size=p}d(T_,A);function ra(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){u()},p)}function sa(){this.g=!0}sa.prototype.ua=function(){this.g=!1};function mP(u,p,g,S,O,V){u.info(function(){if(u.g)if(V){var W="",ne=V.split("&");for(let ve=0;ve<ne.length;ve++){var nt=ne[ve].split("=");if(nt.length>1){const lt=nt[0];nt=nt[1];const Mn=lt.split("_");W=Mn.length>=2&&Mn[1]=="type"?W+(lt+"="+nt+"&"):W+(lt+"=redacted&")}}}else W=null;else W=V;return"XMLHTTP REQ ("+S+") [attempt "+O+"]: "+p+`
`+g+`
`+W})}function gP(u,p,g,S,O,V,W){u.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+O+"]: "+p+`
`+g+`
`+V+" "+W})}function Oi(u,p,g,S){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+_P(u,g)+(S?" "+S:"")})}function yP(u,p){u.info(function(){return"TIMEOUT: "+p})}sa.prototype.info=function(){};function _P(u,p){if(!u.g)return p;if(!p)return null;try{const V=JSON.parse(p);if(V){for(u=0;u<V.length;u++)if(Array.isArray(V[u])){var g=V[u];if(!(g.length<2)){var S=g[1];if(Array.isArray(S)&&!(S.length<1)){var O=S[0];if(O!="noop"&&O!="stop"&&O!="close")for(let W=1;W<S.length;W++)S[W]=""}}}}return Wd(V)}catch{return p}}var wc={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},b_={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},I_;function qd(){}d(qd,__),qd.prototype.g=function(){return new XMLHttpRequest},I_=new qd;function ia(u){return encodeURIComponent(String(u))}function vP(u){var p=1;u=u.split(":");const g=[];for(;p>0&&u.length;)g.push(u.shift()),p--;return u.length&&g.push(u.join(":")),g}function Or(u,p,g,S){this.j=u,this.i=p,this.l=g,this.S=S||1,this.V=new ea(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new S_}function S_(){this.i=null,this.g="",this.h=!1}var k_={},Yd={};function Gd(u,p,g){u.M=1,u.A=Ec(On(p)),u.u=g,u.R=!0,P_(u,null)}function P_(u,p){u.F=Date.now(),xc(u),u.B=On(u.A);var g=u.B,S=u.S;Array.isArray(S)||(S=[String(S)]),z_(g.i,"t",S),u.C=0,g=u.j.L,u.h=new S_,u.g=iv(u.j,g?p:null,!u.u),u.P>0&&(u.O=new dP(c(u.Y,u,u.g),u.P)),p=u.V,g=u.g,S=u.ba;var O="readystatechange";Array.isArray(O)||(O&&(g_[0]=O.toString()),O=g_);for(let V=0;V<O.length;V++){const W=h_(g,O[V],S||p.handleEvent,!1,p.h||p);if(!W)break;p.g[W.key]=W}p=u.J?J(u.J):{},u.u?(u.v||(u.v="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,p)):(u.v="GET",u.g.ea(u.B,u.v,null,p)),na(),mP(u.i,u.v,u.B,u.l,u.S,u.u)}Or.prototype.ba=function(u){u=u.target;const p=this.O;p&&Vr(u)==3?p.j():this.Y(u)},Or.prototype.Y=function(u){try{if(u==this.g)e:{const ne=Vr(this.g),nt=this.g.ya(),ve=this.g.ca();if(!(ne<3)&&(ne!=3||this.g&&(this.h.h||this.g.la()||G_(this.g)))){this.K||ne!=4||nt==7||(nt==8||ve<=0?na(3):na(2)),Kd(this);var p=this.g.ca();this.X=p;var g=wP(this);if(this.o=p==200,gP(this.i,this.v,this.B,this.l,this.S,ne,p),this.o){if(this.U&&!this.L){t:{if(this.g){var S,O=this.g;if((S=O.g?O.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(S)){var V=S;break t}}V=null}if(u=V)Oi(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Qd(this,u);else{this.o=!1,this.m=3,Rt(12),Bs(this),oa(this);break e}}if(this.R){u=!0;let lt;for(;!this.K&&this.C<g.length;)if(lt=xP(this,g),lt==Yd){ne==4&&(this.m=4,Rt(14),u=!1),Oi(this.i,this.l,null,"[Incomplete Response]");break}else if(lt==k_){this.m=4,Rt(15),Oi(this.i,this.l,g,"[Invalid Chunk]"),u=!1;break}else Oi(this.i,this.l,lt,null),Qd(this,lt);if(A_(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ne!=4||g.length!=0||this.h.h||(this.m=1,Rt(16),u=!1),this.o=this.o&&u,!u)Oi(this.i,this.l,g,"[Invalid Chunked Response]"),Bs(this),oa(this);else if(g.length>0&&!this.W){this.W=!0;var W=this.j;W.g==this&&W.aa&&!W.P&&(W.j.info("Great, no buffering proxy detected. Bytes received: "+g.length),sf(W),W.P=!0,Rt(11))}}else Oi(this.i,this.l,g,null),Qd(this,g);ne==4&&Bs(this),this.o&&!this.K&&(ne==4?tv(this.j,this):(this.o=!1,xc(this)))}else MP(this.g),p==400&&g.indexOf("Unknown SID")>0?(this.m=3,Rt(12)):(this.m=0,Rt(13)),Bs(this),oa(this)}}}catch{}finally{}};function wP(u){if(!A_(u))return u.g.la();const p=G_(u.g);if(p==="")return"";let g="";const S=p.length,O=Vr(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return Bs(u),oa(u),"";u.h.i=new o.TextDecoder}for(let V=0;V<S;V++)u.h.h=!0,g+=u.h.i.decode(p[V],{stream:!(O&&V==S-1)});return p.length=0,u.h.g+=g,u.C=0,u.h.g}function A_(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function xP(u,p){var g=u.C,S=p.indexOf(`
`,g);return S==-1?Yd:(g=Number(p.substring(g,S)),isNaN(g)?k_:(S+=1,S+g>p.length?Yd:(p=p.slice(S,S+g),u.C=S+g,p)))}Or.prototype.cancel=function(){this.K=!0,Bs(this)};function xc(u){u.T=Date.now()+u.H,C_(u,u.H)}function C_(u,p){if(u.D!=null)throw Error("WatchDog timer not null");u.D=ra(c(u.aa,u),p)}function Kd(u){u.D&&(o.clearTimeout(u.D),u.D=null)}Or.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(yP(this.i,this.B),this.M!=2&&(na(),Rt(17)),Bs(this),this.m=2,oa(this)):C_(this,this.T-u)};function oa(u){u.j.I==0||u.K||tv(u.j,u)}function Bs(u){Kd(u);var p=u.O;p&&typeof p.dispose=="function"&&p.dispose(),u.O=null,y_(u.V),u.g&&(p=u.g,u.g=null,p.abort(),p.dispose())}function Qd(u,p){try{var g=u.j;if(g.I!=0&&(g.g==u||Xd(g.h,u))){if(!u.L&&Xd(g.h,u)&&g.I==3){try{var S=g.Ba.g.parse(p)}catch{S=null}if(Array.isArray(S)&&S.length==3){var O=S;if(O[0]==0){e:if(!g.v){if(g.g)if(g.g.F+3e3<u.F)kc(g),Ic(g);else break e;rf(g),Rt(18)}}else g.xa=O[1],0<g.xa-g.K&&O[2]<37500&&g.F&&g.A==0&&!g.C&&(g.C=ra(c(g.Va,g),6e3));D_(g.h)<=1&&g.ta&&(g.ta=void 0)}else Hs(g,11)}else if((u.L||g.g==u)&&kc(g),!C(p))for(O=g.Ba.g.parse(p),p=0;p<O.length;p++){let ve=O[p];const lt=ve[0];if(!(lt<=g.K))if(g.K=lt,ve=ve[1],g.I==2)if(ve[0]=="c"){g.M=ve[1],g.ba=ve[2];const Mn=ve[3];Mn!=null&&(g.ka=Mn,g.j.info("VER="+g.ka));const $s=ve[4];$s!=null&&(g.za=$s,g.j.info("SVER="+g.za));const Fr=ve[5];Fr!=null&&typeof Fr=="number"&&Fr>0&&(S=1.5*Fr,g.O=S,g.j.info("backChannelRequestTimeoutMs_="+S)),S=g;const jr=u.g;if(jr){const Ac=jr.g?jr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ac){var V=S.h;V.g||Ac.indexOf("spdy")==-1&&Ac.indexOf("quic")==-1&&Ac.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(Jd(V,V.h),V.h=null))}if(S.G){const of=jr.g?jr.g.getResponseHeader("X-HTTP-Session-Id"):null;of&&(S.wa=of,be(S.J,S.G,of))}}g.I=3,g.l&&g.l.ra(),g.aa&&(g.T=Date.now()-u.F,g.j.info("Handshake RTT: "+g.T+"ms")),S=g;var W=u;if(S.na=sv(S,S.L?S.ba:null,S.W),W.L){O_(S.h,W);var ne=W,nt=S.O;nt&&(ne.H=nt),ne.D&&(Kd(ne),xc(ne)),S.g=W}else Z_(S);g.i.length>0&&Sc(g)}else ve[0]!="stop"&&ve[0]!="close"||Hs(g,7);else g.I==3&&(ve[0]=="stop"||ve[0]=="close"?ve[0]=="stop"?Hs(g,7):nf(g):ve[0]!="noop"&&g.l&&g.l.qa(ve),g.A=0)}}na(4)}catch{}}var EP=class{constructor(u,p){this.g=u,this.map=p}};function R_(u){this.l=u||10,o.PerformanceNavigationTiming?(u=o.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function N_(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function D_(u){return u.h?1:u.g?u.g.size:0}function Xd(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function Jd(u,p){u.g?u.g.add(p):u.h=p}function O_(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}R_.prototype.cancel=function(){if(this.i=M_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function M_(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const g of u.g.values())p=p.concat(g.G);return p}return m(u.i)}var L_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function TP(u,p){if(u){u=u.split("&");for(let g=0;g<u.length;g++){const S=u[g].indexOf("=");let O,V=null;S>=0?(O=u[g].substring(0,S),V=u[g].substring(S+1)):O=u[g],p(O,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function Mr(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let p;u instanceof Mr?(this.l=u.l,aa(this,u.j),this.o=u.o,this.g=u.g,la(this,u.u),this.h=u.h,Zd(this,B_(u.i)),this.m=u.m):u&&(p=String(u).match(L_))?(this.l=!1,aa(this,p[1]||"",!0),this.o=ca(p[2]||""),this.g=ca(p[3]||"",!0),la(this,p[4]),this.h=ca(p[5]||"",!0),Zd(this,p[6]||"",!0),this.m=ca(p[7]||"")):(this.l=!1,this.i=new ha(null,this.l))}Mr.prototype.toString=function(){const u=[];var p=this.j;p&&u.push(ua(p,V_,!0),":");var g=this.g;return(g||p=="file")&&(u.push("//"),(p=this.o)&&u.push(ua(p,V_,!0),"@"),u.push(ia(g).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.u,g!=null&&u.push(":",String(g))),(g=this.h)&&(this.g&&g.charAt(0)!="/"&&u.push("/"),u.push(ua(g,g.charAt(0)=="/"?SP:IP,!0))),(g=this.i.toString())&&u.push("?",g),(g=this.m)&&u.push("#",ua(g,PP)),u.join("")},Mr.prototype.resolve=function(u){const p=On(this);let g=!!u.j;g?aa(p,u.j):g=!!u.o,g?p.o=u.o:g=!!u.g,g?p.g=u.g:g=u.u!=null;var S=u.h;if(g)la(p,u.u);else if(g=!!u.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var O=p.h.lastIndexOf("/");O!=-1&&(S=p.h.slice(0,O+1)+S)}if(O=S,O==".."||O==".")S="";else if(O.indexOf("./")!=-1||O.indexOf("/.")!=-1){S=O.lastIndexOf("/",0)==0,O=O.split("/");const V=[];for(let W=0;W<O.length;){const ne=O[W++];ne=="."?S&&W==O.length&&V.push(""):ne==".."?((V.length>1||V.length==1&&V[0]!="")&&V.pop(),S&&W==O.length&&V.push("")):(V.push(ne),S=!0)}S=V.join("/")}else S=O}return g?p.h=S:g=u.i.toString()!=="",g?Zd(p,B_(u.i)):g=!!u.m,g&&(p.m=u.m),p};function On(u){return new Mr(u)}function aa(u,p,g){u.j=g?ca(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function la(u,p){if(p){if(p=Number(p),isNaN(p)||p<0)throw Error("Bad port number "+p);u.u=p}else u.u=null}function Zd(u,p,g){p instanceof ha?(u.i=p,AP(u.i,u.l)):(g||(p=ua(p,kP)),u.i=new ha(p,u.l))}function be(u,p,g){u.i.set(p,g)}function Ec(u){return be(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function ca(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function ua(u,p,g){return typeof u=="string"?(u=encodeURI(u).replace(p,bP),g&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function bP(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var V_=/[#\/\?@]/g,IP=/[#\?:]/g,SP=/[#\?]/g,kP=/[#\?@]/g,PP=/#/g;function ha(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function Ws(u){u.g||(u.g=new Map,u.h=0,u.i&&TP(u.i,function(p,g){u.add(decodeURIComponent(p.replace(/\+/g," ")),g)}))}t=ha.prototype,t.add=function(u,p){Ws(this),this.i=null,u=Mi(this,u);let g=this.g.get(u);return g||this.g.set(u,g=[]),g.push(p),this.h+=1,this};function F_(u,p){Ws(u),p=Mi(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function j_(u,p){return Ws(u),p=Mi(u,p),u.g.has(p)}t.forEach=function(u,p){Ws(this),this.g.forEach(function(g,S){g.forEach(function(O){u.call(p,O,S,this)},this)},this)};function U_(u,p){Ws(u);let g=[];if(typeof p=="string")j_(u,p)&&(g=g.concat(u.g.get(Mi(u,p))));else for(u=Array.from(u.g.values()),p=0;p<u.length;p++)g=g.concat(u[p]);return g}t.set=function(u,p){return Ws(this),this.i=null,u=Mi(this,u),j_(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},t.get=function(u,p){return u?(u=U_(this,u),u.length>0?String(u[0]):p):p};function z_(u,p,g){F_(u,p),g.length>0&&(u.i=null,u.g.set(Mi(u,p),m(g)),u.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(let S=0;S<p.length;S++){var g=p[S];const O=ia(g);g=U_(this,g);for(let V=0;V<g.length;V++){let W=O;g[V]!==""&&(W+="="+ia(g[V])),u.push(W)}}return this.i=u.join("&")};function B_(u){const p=new ha;return p.i=u.i,u.g&&(p.g=new Map(u.g),p.h=u.h),p}function Mi(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function AP(u,p){p&&!u.j&&(Ws(u),u.i=null,u.g.forEach(function(g,S){const O=S.toLowerCase();S!=O&&(F_(this,S),z_(this,O,g))},u)),u.j=p}function CP(u,p){const g=new sa;if(o.Image){const S=new Image;S.onload=h(Lr,g,"TestLoadImage: loaded",!0,p,S),S.onerror=h(Lr,g,"TestLoadImage: error",!1,p,S),S.onabort=h(Lr,g,"TestLoadImage: abort",!1,p,S),S.ontimeout=h(Lr,g,"TestLoadImage: timeout",!1,p,S),o.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=u}else p(!1)}function RP(u,p){const g=new sa,S=new AbortController,O=setTimeout(()=>{S.abort(),Lr(g,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:S.signal}).then(V=>{clearTimeout(O),V.ok?Lr(g,"TestPingServer: ok",!0,p):Lr(g,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(O),Lr(g,"TestPingServer: error",!1,p)})}function Lr(u,p,g,S,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),S(g)}catch{}}function NP(){this.g=new pP}function ef(u){this.i=u.Sb||null,this.h=u.ab||!1}d(ef,__),ef.prototype.g=function(){return new Tc(this.i,this.h)};function Tc(u,p){vt.call(this),this.H=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}d(Tc,vt),t=Tc.prototype,t.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=p,this.readyState=1,fa(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const p={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(p.body=u),(this.H||o).fetch(new Request(this.D,p)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,da(this)),this.readyState=0},t.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,fa(this)),this.g&&(this.readyState=3,fa(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;W_(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function W_(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}t.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.B.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?da(this):fa(this),this.readyState==3&&W_(this)}},t.Oa=function(u){this.g&&(this.response=this.responseText=u,da(this))},t.Na=function(u){this.g&&(this.response=u,da(this))},t.ga=function(){this.g&&da(this)};function da(u){u.readyState=4,u.l=null,u.j=null,u.B=null,fa(u)}t.setRequestHeader=function(u,p){this.A.append(u,p)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var g=p.next();!g.done;)g=g.value,u.push(g[0]+": "+g[1]),g=p.next();return u.join(`\r
`)};function fa(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Tc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function H_(u){let p="";return Y(u,function(g,S){p+=S,p+=":",p+=g,p+=`\r
`}),p}function tf(u,p,g){e:{for(S in g){var S=!1;break e}S=!0}S||(g=H_(g),typeof u=="string"?g!=null&&ia(g):be(u,p,g))}function Le(u){vt.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}d(Le,vt);var DP=/^https?$/i,OP=["POST","PUT"];t=Le.prototype,t.Fa=function(u){this.H=u},t.ea=function(u,p,g,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():I_.g(),this.g.onreadystatechange=f(c(this.Ca,this));try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(V){$_(this,V);return}if(u=g||"",g=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var O in S)g.set(O,S[O]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const V of S.keys())g.set(V,S.get(V));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(g.keys()).find(V=>V.toLowerCase()=="content-type"),O=o.FormData&&u instanceof o.FormData,!(Array.prototype.indexOf.call(OP,p,void 0)>=0)||S||O||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,W]of g)this.g.setRequestHeader(V,W);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(V){$_(this,V)}};function $_(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.o=5,q_(u),bc(u)}function q_(u){u.A||(u.A=!0,Ct(u,"complete"),Ct(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,Ct(this,"complete"),Ct(this,"abort"),bc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),bc(this,!0)),Le.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Y_(this):this.Xa())},t.Xa=function(){Y_(this)};function Y_(u){if(u.h&&typeof i<"u"){if(u.v&&Vr(u)==4)setTimeout(u.Ca.bind(u),0);else if(Ct(u,"readystatechange"),Vr(u)==4){u.h=!1;try{const V=u.ca();e:switch(V){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var g;if(!(g=p)){var S;if(S=V===0){let W=String(u.D).match(L_)[1]||null;!W&&o.self&&o.self.location&&(W=o.self.location.protocol.slice(0,-1)),S=!DP.test(W?W.toLowerCase():"")}g=S}if(g)Ct(u,"complete"),Ct(u,"success");else{u.o=6;try{var O=Vr(u)>2?u.g.statusText:""}catch{O=""}u.l=O+" ["+u.ca()+"]",q_(u)}}finally{bc(u)}}}}function bc(u,p){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const g=u.g;u.g=null,p||Ct(u,"ready");try{g.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Vr(u){return u.g?u.g.readyState:0}t.ca=function(){try{return Vr(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),fP(p)}};function G_(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function MP(u){const p={};u=(u.g&&Vr(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<u.length;S++){if(C(u[S]))continue;var g=vP(u[S]);const O=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const V=p[O]||[];p[O]=V,V.push(g)}G(p,function(S){return S.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function pa(u,p,g){return g&&g.internalChannelParams&&g.internalChannelParams[u]||p}function K_(u){this.za=0,this.i=[],this.j=new sa,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=pa("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=pa("baseRetryDelayMs",5e3,u),this.Za=pa("retryDelaySeedMs",1e4,u),this.Ta=pa("forwardChannelMaxRetries",2,u),this.va=pa("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new R_(u&&u.concurrentRequestLimit),this.Ba=new NP,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=K_.prototype,t.ka=8,t.I=1,t.connect=function(u,p,g,S){Rt(0),this.W=u,this.H=p||{},g&&S!==void 0&&(this.H.OSID=g,this.H.OAID=S),this.F=this.X,this.J=sv(this,null,this.W),Sc(this)};function nf(u){if(Q_(u),u.I==3){var p=u.V++,g=On(u.J);if(be(g,"SID",u.M),be(g,"RID",p),be(g,"TYPE","terminate"),ma(u,g),p=new Or(u,u.j,p),p.M=2,p.A=Ec(On(g)),g=!1,o.navigator&&o.navigator.sendBeacon)try{g=o.navigator.sendBeacon(p.A.toString(),"")}catch{}!g&&o.Image&&(new Image().src=p.A,g=!0),g||(p.g=iv(p.j,null),p.g.ea(p.A)),p.F=Date.now(),xc(p)}rv(u)}function Ic(u){u.g&&(sf(u),u.g.cancel(),u.g=null)}function Q_(u){Ic(u),u.v&&(o.clearTimeout(u.v),u.v=null),kc(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&o.clearTimeout(u.m),u.m=null)}function Sc(u){if(!N_(u.h)&&!u.m){u.m=!0;var p=u.Ea;D||y(),L||(D(),L=!0),I.add(p,u),u.D=0}}function LP(u,p){return D_(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=p.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=ra(c(u.Ea,u,p),nv(u,u.D)),u.D++,!0)}t.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const O=new Or(this,this.j,u);let V=this.o;if(this.U&&(V?(V=J(V),Yt(V,this.U)):V=this.U),this.u!==null||this.R||(O.J=V,V=null),this.S)e:{for(var p=0,g=0;g<this.i.length;g++){t:{var S=this.i[g];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(p+=S,p>4096){p=g;break e}if(p===4096||g===this.i.length-1){p=g+1;break e}}p=1e3}else p=1e3;p=J_(this,O,p),g=On(this.J),be(g,"RID",u),be(g,"CVER",22),this.G&&be(g,"X-HTTP-Session-Id",this.G),ma(this,g),V&&(this.R?p="headers="+ia(H_(V))+"&"+p:this.u&&tf(g,this.u,V)),Jd(this.h,O),this.Ra&&be(g,"TYPE","init"),this.S?(be(g,"$req",p),be(g,"SID","null"),O.U=!0,Gd(O,g,null)):Gd(O,g,p),this.I=2}}else this.I==3&&(u?X_(this,u):this.i.length==0||N_(this.h)||X_(this))};function X_(u,p){var g;p?g=p.l:g=u.V++;const S=On(u.J);be(S,"SID",u.M),be(S,"RID",g),be(S,"AID",u.K),ma(u,S),u.u&&u.o&&tf(S,u.u,u.o),g=new Or(u,u.j,g,u.D+1),u.u===null&&(g.J=u.o),p&&(u.i=p.G.concat(u.i)),p=J_(u,g,1e3),g.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Jd(u.h,g),Gd(g,S,p)}function ma(u,p){u.H&&Y(u.H,function(g,S){be(p,S,g)}),u.l&&Y({},function(g,S){be(p,S,g)})}function J_(u,p,g){g=Math.min(u.i.length,g);const S=u.l?c(u.l.Ka,u.l,u):null;e:{var O=u.i;let ne=-1;for(;;){const nt=["count="+g];ne==-1?g>0?(ne=O[0].g,nt.push("ofs="+ne)):ne=0:nt.push("ofs="+ne);let ve=!0;for(let lt=0;lt<g;lt++){var V=O[lt].g;const Mn=O[lt].map;if(V-=ne,V<0)ne=Math.max(0,O[lt].g-100),ve=!1;else try{V="req"+V+"_"||"";try{var W=Mn instanceof Map?Mn:Object.entries(Mn);for(const[$s,Fr]of W){let jr=Fr;a(Fr)&&(jr=Wd(Fr)),nt.push(V+$s+"="+encodeURIComponent(jr))}}catch($s){throw nt.push(V+"type="+encodeURIComponent("_badmap")),$s}}catch{S&&S(Mn)}}if(ve){W=nt.join("&");break e}}W=void 0}return u=u.i.splice(0,g),p.G=u,W}function Z_(u){if(!u.g&&!u.v){u.Y=1;var p=u.Da;D||y(),L||(D(),L=!0),I.add(p,u),u.A=0}}function rf(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=ra(c(u.Da,u),nv(u,u.A)),u.A++,!0)}t.Da=function(){if(this.v=null,ev(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=ra(c(this.Wa,this),u)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Rt(10),Ic(this),ev(this))};function sf(u){u.B!=null&&(o.clearTimeout(u.B),u.B=null)}function ev(u){u.g=new Or(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var p=On(u.na);be(p,"RID","rpc"),be(p,"SID",u.M),be(p,"AID",u.K),be(p,"CI",u.F?"0":"1"),!u.F&&u.ia&&be(p,"TO",u.ia),be(p,"TYPE","xmlhttp"),ma(u,p),u.u&&u.o&&tf(p,u.u,u.o),u.O&&(u.g.H=u.O);var g=u.g;u=u.ba,g.M=1,g.A=Ec(On(p)),g.u=null,g.R=!0,P_(g,u)}t.Va=function(){this.C!=null&&(this.C=null,Ic(this),rf(this),Rt(19))};function kc(u){u.C!=null&&(o.clearTimeout(u.C),u.C=null)}function tv(u,p){var g=null;if(u.g==p){kc(u),sf(u),u.g=null;var S=2}else if(Xd(u.h,p))g=p.G,O_(u.h,p),S=1;else return;if(u.I!=0){if(p.o)if(S==1){g=p.u?p.u.length:0,p=Date.now()-p.F;var O=u.D;S=vc(),Ct(S,new T_(S,g)),Sc(u)}else Z_(u);else if(O=p.m,O==3||O==0&&p.X>0||!(S==1&&LP(u,p)||S==2&&rf(u)))switch(g&&g.length>0&&(p=u.h,p.i=p.i.concat(g)),O){case 1:Hs(u,5);break;case 4:Hs(u,10);break;case 3:Hs(u,6);break;default:Hs(u,2)}}}function nv(u,p){let g=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(g*=2),g*p}function Hs(u,p){if(u.j.info("Error code "+p),p==2){var g=c(u.bb,u),S=u.Ua;const O=!S;S=new Mr(S||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||aa(S,"https"),Ec(S),O?CP(S.toString(),g):RP(S.toString(),g)}else Rt(2);u.I=0,u.l&&u.l.pa(p),rv(u),Q_(u)}t.bb=function(u){u?(this.j.info("Successfully pinged google.com"),Rt(2)):(this.j.info("Failed to ping google.com"),Rt(1))};function rv(u){if(u.I=0,u.ja=[],u.l){const p=M_(u.h);(p.length!=0||u.i.length!=0)&&(v(u.ja,p),v(u.ja,u.i),u.h.i.length=0,m(u.i),u.i.length=0),u.l.oa()}}function sv(u,p,g){var S=g instanceof Mr?On(g):new Mr(g);if(S.g!="")p&&(S.g=p+"."+S.g),la(S,S.u);else{var O=o.location;S=O.protocol,p=p?p+"."+O.hostname:O.hostname,O=+O.port;const V=new Mr(null);S&&aa(V,S),p&&(V.g=p),O&&la(V,O),g&&(V.h=g),S=V}return g=u.G,p=u.wa,g&&p&&be(S,g,p),be(S,"VER",u.ka),ma(u,S),S}function iv(u,p,g){if(p&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Aa&&!u.ma?new Le(new ef({ab:g})):new Le(u.ma),p.Fa(u.L),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function ov(){}t=ov.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Pc(){}Pc.prototype.g=function(u,p){return new Kt(u,p)};function Kt(u,p){vt.call(this),this.g=new K_(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.sa&&(u?u["X-WebChannel-Client-Profile"]=p.sa:u={"X-WebChannel-Client-Profile":p.sa}),this.g.U=u,(u=p&&p.Qb)&&!C(u)&&(this.g.u=u),this.A=p&&p.supportsCrossDomainXhr||!1,this.v=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!C(p)&&(this.g.G=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new Li(this)}d(Kt,vt),Kt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Kt.prototype.close=function(){nf(this.g)},Kt.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var g={};g.__data__=u,u=g}else this.v&&(g={},g.__data__=Wd(u),u=g);p.i.push(new EP(p.Ya++,u)),p.I==3&&Sc(p)},Kt.prototype.N=function(){this.g.l=null,delete this.j,nf(this.g),delete this.g,Kt.Z.N.call(this)};function av(u){Hd.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const g in p){u=g;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}d(av,Hd);function lv(){$d.call(this),this.status=1}d(lv,$d);function Li(u){this.g=u}d(Li,ov),Li.prototype.ra=function(){Ct(this.g,"a")},Li.prototype.qa=function(u){Ct(this.g,new av(u))},Li.prototype.pa=function(u){Ct(this.g,new lv)},Li.prototype.oa=function(){Ct(this.g,"b")},Pc.prototype.createWebChannel=Pc.prototype.g,Kt.prototype.send=Kt.prototype.o,Kt.prototype.open=Kt.prototype.m,Kt.prototype.close=Kt.prototype.close,t1=function(){return new Pc},e1=function(){return vc()},ZI=zs,pm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},wc.NO_ERROR=0,wc.TIMEOUT=8,wc.HTTP_ERROR=6,Nu=wc,b_.COMPLETE="complete",JI=b_,v_.EventType=ta,ta.OPEN="a",ta.CLOSE="b",ta.ERROR="c",ta.MESSAGE="d",vt.prototype.listen=vt.prototype.J,Ua=v_,Le.prototype.listenOnce=Le.prototype.K,Le.prototype.getLastError=Le.prototype.Ha,Le.prototype.getLastErrorCode=Le.prototype.ya,Le.prototype.getStatus=Le.prototype.ca,Le.prototype.getResponseJson=Le.prototype.La,Le.prototype.getResponseText=Le.prototype.la,Le.prototype.send=Le.prototype.ea,Le.prototype.setWithCredentials=Le.prototype.Fa,XI=Le}).apply(typeof Gc<"u"?Gc:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Tt.UNAUTHENTICATED=new Tt(null),Tt.GOOGLE_CREDENTIALS=new Tt("google-credentials-uid"),Tt.FIRST_PARTY=new Tt("first-party-uid"),Tt.MOCK_USER=new Tt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qo="12.9.0";function xM(t){qo=t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vi=new Kg("@firebase/firestore");function zi(){return vi.logLevel}function $(t,...e){if(vi.logLevel<=ie.DEBUG){const n=e.map(oy);vi.debug(`Firestore (${qo}): ${t}`,...n)}}function Pr(t,...e){if(vi.logLevel<=ie.ERROR){const n=e.map(oy);vi.error(`Firestore (${qo}): ${t}`,...n)}}function wi(t,...e){if(vi.logLevel<=ie.WARN){const n=e.map(oy);vi.warn(`Firestore (${qo}): ${t}`,...n)}}function oy(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,n1(t,r,n)}function n1(t,e,n){let r=`FIRESTORE (${qo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Pr(r),new Error(r)}function me(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||n1(e,s,r)}function ee(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class H extends or{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class EM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Tt.UNAUTHENTICATED))}shutdown(){}}class TM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class bM{constructor(e){this.t=e,this.currentUser=Tt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){me(this.o===void 0,42304);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new vs;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new vs,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{$("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):($("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new vs)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?($("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(me(typeof r.accessToken=="string",31837,{l:r}),new r1(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return me(e===null||typeof e=="string",2055,{h:e}),new Tt(e)}}class IM{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Tt.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class SM{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new IM(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Tt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class sw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class kM{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ut(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){me(this.o===void 0,3512);const r=i=>{i.error!=null&&$("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,$("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{$("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):$("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new sw(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(me(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new sw(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PM(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=PM(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function oe(t,e){return t<e?-1:t>e?1:0}function mm(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return zf(s)===zf(i)?oe(s,i):zf(s)?1:-1}return oe(t.length,e.length)}const AM=55296,CM=57343;function zf(t){const e=t.charCodeAt(0);return e>=AM&&e<=CM}function Ao(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iw="__name__";class zn{constructor(e,n,r){n===void 0?n=0:n>e.length&&X(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&X(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return zn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof zn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=zn.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return oe(e.length,n.length)}static compareSegments(e,n){const r=zn.isNumericId(e),s=zn.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?zn.extractNumericId(e).compare(zn.extractNumericId(n)):mm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return _s.fromString(e.substring(4,e.length-2))}}class xe extends zn{construct(e,n,r){return new xe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new H(j.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new xe(n)}static emptyPath(){return new xe([])}}const RM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class mt extends zn{construct(e,n,r){return new mt(e,n,r)}static isValidIdentifier(e){return RM.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),mt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===iw}static keyField(){return new mt([iw])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new H(j.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new H(j.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new H(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new H(j.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new mt(n)}static emptyPath(){return new mt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.path=e}static fromPath(e){return new K(xe.fromString(e))}static fromName(e){return new K(xe.fromString(e).popFirst(5))}static empty(){return new K(xe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&xe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return xe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new K(new xe(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s1(t,e,n){if(!n)throw new H(j.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function NM(t,e,n,r){if(e===!0&&r===!0)throw new H(j.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function ow(t){if(!K.isDocumentKey(t))throw new H(j.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function aw(t){if(K.isDocumentKey(t))throw new H(j.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function i1(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function gd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":X(12329,{type:typeof t})}function Co(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new H(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=gd(t);throw new H(j.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function DM(t,e){if(e<=0)throw new H(j.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ze(t,e){const n={typeString:t};return e&&(n.value=e),n}function cc(t,e){if(!i1(t))throw new H(j.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new H(j.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lw=-62135596800,cw=1e6;class ke{static now(){return ke.fromMillis(Date.now())}static fromDate(e){return ke.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*cw);return new ke(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new H(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new H(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<lw)throw new H(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new H(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/cw}_compareTo(e){return this.seconds===e.seconds?oe(this.nanoseconds,e.nanoseconds):oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ke._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(cc(e,ke._jsonSchema))return new ke(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-lw;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ke._jsonSchemaVersion="firestore/timestamp/1.0",ke._jsonSchema={type:Ze("string",ke._jsonSchemaVersion),seconds:Ze("number"),nanoseconds:Ze("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{static fromTimestamp(e){return new Z(e)}static min(){return new Z(new ke(0,0))}static max(){return new Z(new ke(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fl=-1;function OM(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Z.fromTimestamp(r===1e9?new ke(n+1,0):new ke(n,r));return new Is(s,K.empty(),e)}function MM(t){return new Is(t.readTime,t.key,Fl)}class Is{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Is(Z.min(),K.empty(),Fl)}static max(){return new Is(Z.max(),K.empty(),Fl)}}function LM(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=K.comparator(t.documentKey,e.documentKey),n!==0?n:oe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class FM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yo(t){if(t.code!==j.FAILED_PRECONDITION||t.message!==VM)throw t;$("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&X(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new U((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):U.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):U.reject(n)}static resolve(e){return new U((n,r)=>{n(e)})}static reject(e){return new U((n,r)=>{r(e)})}static waitFor(e){return new U((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=U.resolve(!1);for(const r of e)n=n.next(s=>s?U.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new U((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(h=>{o[c]=h,++a,a===i&&r(o)},h=>s(h))}})}static doWhile(e,n){return new U((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function jM(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Go(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}yd.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ly=-1;function _d(t){return t==null}function Eh(t){return t===0&&1/t==-1/0}function UM(t){return typeof t=="number"&&Number.isInteger(t)&&!Eh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o1="";function zM(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=uw(e)),e=BM(t.get(n),e);return uw(e)}function BM(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case o1:n+="";break;default:n+=i}}return n}function uw(t){return t+o1+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hw(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ki(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function a1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(e,n){this.comparator=e,this.root=n||pt.EMPTY}insert(e,n){return new Me(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,pt.BLACK,null,null))}remove(e){return new Me(this.comparator,this.root.remove(e,this.comparator).copy(null,null,pt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Kc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Kc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Kc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Kc(this.root,e,this.comparator,!0)}}class Kc{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class pt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??pt.RED,this.left=s??pt.EMPTY,this.right=i??pt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new pt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return pt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return pt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,pt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,pt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw X(43730,{key:this.key,value:this.value});if(this.right.isRed())throw X(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw X(27949);return e+(this.isRed()?0:1)}}pt.EMPTY=null,pt.RED=!0,pt.BLACK=!1;pt.EMPTY=new class{constructor(){this.size=0}get key(){throw X(57766)}get value(){throw X(16141)}get color(){throw X(16727)}get left(){throw X(29726)}get right(){throw X(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new pt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e){this.comparator=e,this.data=new Me(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new dw(this.data.getIterator())}getIteratorFrom(e){return new dw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof ot)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ot(this.comparator);return n.data=e,n}}class dw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this.fields=e,e.sort(mt.comparator)}static empty(){return new bn([])}unionWith(e){let n=new ot(mt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new bn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ao(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new l1("Invalid base64 string: "+i):i}}(e);return new _t(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new _t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}_t.EMPTY_BYTE_STRING=new _t("");const WM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ss(t){if(me(!!t,39018),typeof t=="string"){let e=0;const n=WM.exec(t);if(me(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:He(t.seconds),nanos:He(t.nanos)}}function He(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ks(t){return typeof t=="string"?_t.fromBase64String(t):_t.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c1="server_timestamp",u1="__type__",h1="__previous_value__",d1="__local_write_time__";function cy(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[u1])==null?void 0:r.stringValue)===c1}function vd(t){const e=t.mapValue.fields[h1];return cy(e)?vd(e):e}function jl(t){const e=Ss(t.mapValue.fields[d1].timestampValue);return new ke(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HM{constructor(e,n,r,s,i,o,a,l,c,h,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=h,this.apiKey=d}}const Th="(default)";class Ul{constructor(e,n){this.projectId=e,this.database=n||Th}static empty(){return new Ul("","")}get isDefaultDatabase(){return this.database===Th}isEqual(e){return e instanceof Ul&&e.projectId===this.projectId&&e.database===this.database}}function $M(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new H(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ul(t.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f1="__type__",qM="__max__",Qc={mapValue:{}},p1="__vector__",bh="value";function Ps(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?cy(t)?4:GM(t)?9007199254740991:YM(t)?10:11:X(28295,{value:t})}function rr(t,e){if(t===e)return!0;const n=Ps(t);if(n!==Ps(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return jl(t).isEqual(jl(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Ss(s.timestampValue),a=Ss(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return ks(s.bytesValue).isEqual(ks(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return He(s.geoPointValue.latitude)===He(i.geoPointValue.latitude)&&He(s.geoPointValue.longitude)===He(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return He(s.integerValue)===He(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=He(s.doubleValue),a=He(i.doubleValue);return o===a?Eh(o)===Eh(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Ao(t.arrayValue.values||[],e.arrayValue.values||[],rr);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(hw(o)!==hw(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!rr(o[l],a[l])))return!1;return!0}(t,e);default:return X(52216,{left:t})}}function zl(t,e){return(t.values||[]).find(n=>rr(n,e))!==void 0}function Ro(t,e){if(t===e)return 0;const n=Ps(t),r=Ps(e);if(n!==r)return oe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return oe(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=He(i.integerValue||i.doubleValue),l=He(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return fw(t.timestampValue,e.timestampValue);case 4:return fw(jl(t),jl(e));case 5:return mm(t.stringValue,e.stringValue);case 6:return function(i,o){const a=ks(i),l=ks(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=oe(a[c],l[c]);if(h!==0)return h}return oe(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=oe(He(i.latitude),He(o.latitude));return a!==0?a:oe(He(i.longitude),He(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return pw(t.arrayValue,e.arrayValue);case 10:return function(i,o){var f,m,v,w;const a=i.fields||{},l=o.fields||{},c=(f=a[bh])==null?void 0:f.arrayValue,h=(m=l[bh])==null?void 0:m.arrayValue,d=oe(((v=c==null?void 0:c.values)==null?void 0:v.length)||0,((w=h==null?void 0:h.values)==null?void 0:w.length)||0);return d!==0?d:pw(c,h)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Qc.mapValue&&o===Qc.mapValue)return 0;if(i===Qc.mapValue)return 1;if(o===Qc.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const f=mm(l[d],h[d]);if(f!==0)return f;const m=Ro(a[l[d]],c[h[d]]);if(m!==0)return m}return oe(l.length,h.length)}(t.mapValue,e.mapValue);default:throw X(23264,{he:n})}}function fw(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return oe(t,e);const n=Ss(t),r=Ss(e),s=oe(n.seconds,r.seconds);return s!==0?s:oe(n.nanos,r.nanos)}function pw(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Ro(n[s],r[s]);if(i)return i}return oe(n.length,r.length)}function No(t){return gm(t)}function gm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ss(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ks(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return K.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=gm(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${gm(n.fields[o])}`;return s+"}"}(t.mapValue):X(61005,{value:t})}function Du(t){switch(Ps(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=vd(t);return e?16+Du(e):16;case 5:return 2*t.stringValue.length;case 6:return ks(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+Du(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return ki(r.fields,(i,o)=>{s+=i.length+Du(o)}),s}(t.mapValue);default:throw X(13486,{value:t})}}function mw(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function ym(t){return!!t&&"integerValue"in t}function uy(t){return!!t&&"arrayValue"in t}function gw(t){return!!t&&"nullValue"in t}function yw(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ou(t){return!!t&&"mapValue"in t}function YM(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[f1])==null?void 0:r.stringValue)===p1}function rl(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return ki(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=rl(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=rl(t.arrayValue.values[n]);return e}return{...t}}function GM(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===qM}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.value=e}static empty(){return new ln({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ou(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=rl(n)}setAll(e){let n=mt.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=rl(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Ou(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return rr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Ou(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){ki(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new ln(rl(this.value))}}function m1(t){const e=[];return ki(t.fields,(n,r)=>{const s=new mt([n]);if(Ou(r)){const i=m1(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new bn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new It(e,0,Z.min(),Z.min(),Z.min(),ln.empty(),0)}static newFoundDocument(e,n,r,s){return new It(e,1,n,Z.min(),r,s,0)}static newNoDocument(e,n){return new It(e,2,n,Z.min(),Z.min(),ln.empty(),0)}static newUnknownDocument(e,n){return new It(e,3,n,Z.min(),Z.min(),ln.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Z.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ln.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ln.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Z.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof It&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new It(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih{constructor(e,n){this.position=e,this.inclusive=n}}function _w(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=K.comparator(K.fromName(o.referenceValue),n.key):r=Ro(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function vw(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!rr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(e,n="asc"){this.field=e,this.dir=n}}function KM(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g1{}class Je extends g1{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new XM(e,n,r):n==="array-contains"?new eL(e,r):n==="in"?new tL(e,r):n==="not-in"?new nL(e,r):n==="array-contains-any"?new rL(e,r):new Je(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new JM(e,r):new ZM(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ro(n,this.value)):n!==null&&Ps(this.value)===Ps(n)&&this.matchesComparison(Ro(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return X(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Nn extends g1{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Nn(e,n)}matches(e){return y1(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function y1(t){return t.op==="and"}function _1(t){return QM(t)&&y1(t)}function QM(t){for(const e of t.filters)if(e instanceof Nn)return!1;return!0}function _m(t){if(t instanceof Je)return t.field.canonicalString()+t.op.toString()+No(t.value);if(_1(t))return t.filters.map(e=>_m(e)).join(",");{const e=t.filters.map(n=>_m(n)).join(",");return`${t.op}(${e})`}}function v1(t,e){return t instanceof Je?function(r,s){return s instanceof Je&&r.op===s.op&&r.field.isEqual(s.field)&&rr(r.value,s.value)}(t,e):t instanceof Nn?function(r,s){return s instanceof Nn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&v1(o,s.filters[a]),!0):!1}(t,e):void X(19439)}function w1(t){return t instanceof Je?function(n){return`${n.field.canonicalString()} ${n.op} ${No(n.value)}`}(t):t instanceof Nn?function(n){return n.op.toString()+" {"+n.getFilters().map(w1).join(" ,")+"}"}(t):"Filter"}class XM extends Je{constructor(e,n,r){super(e,n,r),this.key=K.fromName(r.referenceValue)}matches(e){const n=K.comparator(e.key,this.key);return this.matchesComparison(n)}}class JM extends Je{constructor(e,n){super(e,"in",n),this.keys=x1("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class ZM extends Je{constructor(e,n){super(e,"not-in",n),this.keys=x1("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function x1(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>K.fromName(r.referenceValue))}class eL extends Je{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return uy(n)&&zl(n.arrayValue,this.value)}}class tL extends Je{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&zl(this.value.arrayValue,n)}}class nL extends Je{constructor(e,n){super(e,"not-in",n)}matches(e){if(zl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!zl(this.value.arrayValue,n)}}class rL extends Je{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!uy(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>zl(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sL{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.Te=null}}function ww(t,e=null,n=[],r=[],s=null,i=null,o=null){return new sL(t,e,n,r,s,i,o)}function hy(t){const e=ee(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>_m(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),_d(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>No(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>No(r)).join(",")),e.Te=n}return e.Te}function dy(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!KM(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!v1(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!vw(t.startAt,e.startAt)&&vw(t.endAt,e.endAt)}function vm(t){return K.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function iL(t,e,n,r,s,i,o,a){return new Ko(t,e,n,r,s,i,o,a)}function E1(t){return new Ko(t)}function xw(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function oL(t){return K.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function T1(t){return t.collectionGroup!==null}function sl(t){const e=ee(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new ot(mt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Bl(i,r))}),n.has(mt.keyField().canonicalString())||e.Ie.push(new Bl(mt.keyField(),r))}return e.Ie}function Zn(t){const e=ee(t);return e.Ee||(e.Ee=aL(e,sl(t))),e.Ee}function aL(t,e){if(t.limitType==="F")return ww(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Bl(s.field,i)});const n=t.endAt?new Ih(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ih(t.startAt.position,t.startAt.inclusive):null;return ww(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function wm(t,e){const n=t.filters.concat([e]);return new Ko(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function lL(t,e){const n=t.explicitOrderBy.concat([e]);return new Ko(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}function Sh(t,e,n){return new Ko(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function wd(t,e){return dy(Zn(t),Zn(e))&&t.limitType===e.limitType}function b1(t){return`${hy(Zn(t))}|lt:${t.limitType}`}function Bi(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>w1(s)).join(", ")}]`),_d(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>No(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>No(s)).join(",")),`Target(${r})`}(Zn(t))}; limitType=${t.limitType})`}function xd(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):K.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of sl(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=_w(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,sl(r),s)||r.endAt&&!function(o,a,l){const c=_w(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,sl(r),s))}(t,e)}function cL(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function I1(t){return(e,n)=>{let r=!1;for(const s of sl(t)){const i=uL(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function uL(t,e,n){const r=t.field.isKeyField()?K.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?Ro(l,c):X(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return X(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ki(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return a1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hL=new Me(K.comparator);function Ar(){return hL}const S1=new Me(K.comparator);function za(...t){let e=S1;for(const n of t)e=e.insert(n.key,n);return e}function k1(t){let e=S1;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function si(){return il()}function P1(){return il()}function il(){return new Pi(t=>t.toString(),(t,e)=>t.isEqual(e))}const dL=new Me(K.comparator),fL=new ot(K.comparator);function ae(...t){let e=fL;for(const n of t)e=e.add(n);return e}const pL=new ot(oe);function mL(){return pL}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fy(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Eh(e)?"-0":e}}function A1(t){return{integerValue:""+t}}function gL(t,e){return UM(e)?A1(e):fy(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{constructor(){this._=void 0}}function yL(t,e,n){return t instanceof kh?function(s,i){const o={fields:{[u1]:{stringValue:c1},[d1]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&cy(i)&&(i=vd(i)),i&&(o.fields[h1]=i),{mapValue:o}}(n,e):t instanceof Wl?R1(t,e):t instanceof Hl?N1(t,e):function(s,i){const o=C1(s,i),a=Ew(o)+Ew(s.Ae);return ym(o)&&ym(s.Ae)?A1(a):fy(s.serializer,a)}(t,e)}function _L(t,e,n){return t instanceof Wl?R1(t,e):t instanceof Hl?N1(t,e):n}function C1(t,e){return t instanceof Ph?function(r){return ym(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class kh extends Ed{}class Wl extends Ed{constructor(e){super(),this.elements=e}}function R1(t,e){const n=D1(e);for(const r of t.elements)n.some(s=>rr(s,r))||n.push(r);return{arrayValue:{values:n}}}class Hl extends Ed{constructor(e){super(),this.elements=e}}function N1(t,e){let n=D1(e);for(const r of t.elements)n=n.filter(s=>!rr(s,r));return{arrayValue:{values:n}}}class Ph extends Ed{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Ew(t){return He(t.integerValue||t.doubleValue)}function D1(t){return uy(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function vL(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Wl&&s instanceof Wl||r instanceof Hl&&s instanceof Hl?Ao(r.elements,s.elements,rr):r instanceof Ph&&s instanceof Ph?rr(r.Ae,s.Ae):r instanceof kh&&s instanceof kh}(t.transform,e.transform)}class wL{constructor(e,n){this.version=e,this.transformResults=n}}class er{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new er}static exists(e){return new er(void 0,e)}static updateTime(e){return new er(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Mu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Td{}function O1(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new L1(t.key,er.none()):new uc(t.key,t.data,er.none());{const n=t.data,r=ln.empty();let s=new ot(mt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Ai(t.key,r,new bn(s.toArray()),er.none())}}function xL(t,e,n){t instanceof uc?function(s,i,o){const a=s.value.clone(),l=bw(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Ai?function(s,i,o){if(!Mu(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=bw(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(M1(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ol(t,e,n,r){return t instanceof uc?function(i,o,a,l){if(!Mu(i.precondition,o))return a;const c=i.value.clone(),h=Iw(i.fieldTransforms,l,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ai?function(i,o,a,l){if(!Mu(i.precondition,o))return a;const c=Iw(i.fieldTransforms,l,o),h=o.data;return h.setAll(M1(i)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(i,o,a){return Mu(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function EL(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=C1(r.transform,s||null);i!=null&&(n===null&&(n=ln.empty()),n.set(r.field,i))}return n||null}function Tw(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Ao(r,s,(i,o)=>vL(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class uc extends Td{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ai extends Td{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function M1(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function bw(t,e,n){const r=new Map;me(t.length===n.length,32656,{Ve:n.length,de:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,_L(o,a,n[s]))}return r}function Iw(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,yL(i,o,e))}return r}class L1 extends Td{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class TL extends Td{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bL{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&xL(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ol(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ol(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=P1();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=O1(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(Z.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ae())}isEqual(e){return this.batchId===e.batchId&&Ao(this.mutations,e.mutations,(n,r)=>Tw(n,r))&&Ao(this.baseMutations,e.baseMutations,(n,r)=>Tw(n,r))}}class py{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){me(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return dL}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new py(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IL{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SL{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qe,he;function kL(t){switch(t){case j.OK:return X(64938);case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0;default:return X(15467,{code:t})}}function V1(t){if(t===void 0)return Pr("GRPC error has no .code"),j.UNKNOWN;switch(t){case Qe.OK:return j.OK;case Qe.CANCELLED:return j.CANCELLED;case Qe.UNKNOWN:return j.UNKNOWN;case Qe.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case Qe.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case Qe.INTERNAL:return j.INTERNAL;case Qe.UNAVAILABLE:return j.UNAVAILABLE;case Qe.UNAUTHENTICATED:return j.UNAUTHENTICATED;case Qe.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case Qe.NOT_FOUND:return j.NOT_FOUND;case Qe.ALREADY_EXISTS:return j.ALREADY_EXISTS;case Qe.PERMISSION_DENIED:return j.PERMISSION_DENIED;case Qe.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case Qe.ABORTED:return j.ABORTED;case Qe.OUT_OF_RANGE:return j.OUT_OF_RANGE;case Qe.UNIMPLEMENTED:return j.UNIMPLEMENTED;case Qe.DATA_LOSS:return j.DATA_LOSS;default:return X(39323,{code:t})}}(he=Qe||(Qe={}))[he.OK=0]="OK",he[he.CANCELLED=1]="CANCELLED",he[he.UNKNOWN=2]="UNKNOWN",he[he.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",he[he.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",he[he.NOT_FOUND=5]="NOT_FOUND",he[he.ALREADY_EXISTS=6]="ALREADY_EXISTS",he[he.PERMISSION_DENIED=7]="PERMISSION_DENIED",he[he.UNAUTHENTICATED=16]="UNAUTHENTICATED",he[he.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",he[he.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",he[he.ABORTED=10]="ABORTED",he[he.OUT_OF_RANGE=11]="OUT_OF_RANGE",he[he.UNIMPLEMENTED=12]="UNIMPLEMENTED",he[he.INTERNAL=13]="INTERNAL",he[he.UNAVAILABLE=14]="UNAVAILABLE",he[he.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PL(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AL=new _s([4294967295,4294967295],0);function Sw(t){const e=PL().encode(t),n=new QI;return n.update(e),new Uint8Array(n.digest())}function kw(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new _s([n,r],0),new _s([s,i],0)]}class my{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ba(`Invalid padding: ${n}`);if(r<0)throw new Ba(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ba(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ba(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=_s.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(_s.fromNumber(r)));return s.compare(AL)===1&&(s=new _s([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Sw(e),[r,s]=kw(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new my(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;const n=Sw(e),[r,s]=kw(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.be(o)}}be(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ba extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bd{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,hc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new bd(Z.min(),s,new Me(oe),Ar(),ae())}}class hc{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new hc(r,n,ae(),ae(),ae())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{constructor(e,n,r,s){this.Se=e,this.removedTargetIds=n,this.key=r,this.De=s}}class F1{constructor(e,n){this.targetId=e,this.Ce=n}}class j1{constructor(e,n,r=_t.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Pw{constructor(){this.ve=0,this.Fe=Aw(),this.Me=_t.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ae(),n=ae(),r=ae();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:X(38017,{changeType:i})}}),new hc(this.Me,this.xe,e,n,r)}Ke(){this.Oe=!1,this.Fe=Aw()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,me(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class CL{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ar(),this.He=Xc(),this.Je=Xc(),this.Ze=new Me(oe)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:X(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(vm(i))if(r===0){const o=new K(i.path);this.et(n,o,It.newNoDocument(o,Z.min()))}else me(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,c)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=ks(r).toUint8Array()}catch(l){if(l instanceof l1)return wi("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new my(o,s,i)}catch(l){return wi(l instanceof Ba?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const a=this.ot(o);if(a){if(i.current&&vm(a.target)){const l=new K(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,It.newNoDocument(l,e))}i.Be&&(n.set(o,i.ke()),i.Ke())}});let r=ae();this.Je.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.ot(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new bd(e,n,this.Ze,this.je,r);return this.je=Ar(),this.He=Xc(),this.Je=Xc(),this.Ze=new Me(oe),s}Ye(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,r),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.qe(n,1):s.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new Pw,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new ot(oe),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new ot(oe),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||$("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Pw),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Xc(){return new Me(K.comparator)}function Aw(){return new Me(K.comparator)}const RL={asc:"ASCENDING",desc:"DESCENDING"},NL={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},DL={and:"AND",or:"OR"};class OL{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function xm(t,e){return t.useProto3Json||_d(e)?e:{value:e}}function Ah(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function U1(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function ML(t,e){return Ah(t,e.toTimestamp())}function tr(t){return me(!!t,49232),Z.fromTimestamp(function(n){const r=Ss(n);return new ke(r.seconds,r.nanos)}(t))}function gy(t,e){return Em(t,e).canonicalString()}function Em(t,e){const n=function(s){return new xe(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function z1(t){const e=xe.fromString(t);return me(q1(e),10190,{key:e.toString()}),e}function Tm(t,e){return gy(t.databaseId,e.path)}function Bf(t,e){const n=z1(e);if(n.get(1)!==t.databaseId.projectId)throw new H(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new H(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new K(W1(n))}function B1(t,e){return gy(t.databaseId,e)}function LL(t){const e=z1(t);return e.length===4?xe.emptyPath():W1(e)}function bm(t){return new xe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function W1(t){return me(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Cw(t,e,n){return{name:Tm(t,e),fields:n.value.mapValue.fields}}function VL(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:X(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,h){return c.useProto3Json?(me(h===void 0||typeof h=="string",58123),_t.fromBase64String(h||"")):(me(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),_t.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?j.UNKNOWN:V1(c.code);return new H(h,c.message||"")}(o);n=new j1(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Bf(t,r.document.name),i=tr(r.document.updateTime),o=r.document.createTime?tr(r.document.createTime):Z.min(),a=new ln({mapValue:{fields:r.document.fields}}),l=It.newFoundDocument(s,i,o,a),c=r.targetIds||[],h=r.removedTargetIds||[];n=new Lu(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Bf(t,r.document),i=r.readTime?tr(r.readTime):Z.min(),o=It.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Lu([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Bf(t,r.document),i=r.removedTargetIds||[];n=new Lu([],i,s,null)}else{if(!("filter"in e))return X(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new SL(s,i),a=r.targetId;n=new F1(a,o)}}return n}function FL(t,e){let n;if(e instanceof uc)n={update:Cw(t,e.key,e.value)};else if(e instanceof L1)n={delete:Tm(t,e.key)};else if(e instanceof Ai)n={update:Cw(t,e.key,e.data),updateMask:YL(e.fieldMask)};else{if(!(e instanceof TL))return X(16599,{dt:e.type});n={verify:Tm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof kh)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Wl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Hl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ph)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw X(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:ML(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:X(27497)}(t,e.precondition)),n}function jL(t,e){return t&&t.length>0?(me(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?tr(s.updateTime):tr(i);return o.isEqual(Z.min())&&(o=tr(i)),new wL(o,s.transformResults||[])}(n,e))):[]}function UL(t,e){return{documents:[B1(t,e.path)]}}function zL(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=B1(t,s);const i=function(c){if(c.length!==0)return $1(Nn.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(h=>function(f){return{field:Wi(f.field),direction:HL(f.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=xm(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ft:n,parent:s}}function BL(t){let e=LL(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){me(r===1,65062);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(d){const f=H1(d);return f instanceof Nn&&_1(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(f=>function(v){return new Bl(Hi(v.field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(d){let f;return f=typeof d=="object"?d.value:d,_d(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(d){const f=!!d.before,m=d.values||[];return new Ih(m,f)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const f=!d.before,m=d.values||[];return new Ih(m,f)}(n.endAt)),iL(e,s,o,i,a,"F",l,c)}function WL(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return X(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function H1(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Hi(n.unaryFilter.field);return Je.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Hi(n.unaryFilter.field);return Je.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Hi(n.unaryFilter.field);return Je.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Hi(n.unaryFilter.field);return Je.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return X(61313);default:return X(60726)}}(t):t.fieldFilter!==void 0?function(n){return Je.create(Hi(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return X(58110);default:return X(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Nn.create(n.compositeFilter.filters.map(r=>H1(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return X(1026)}}(n.compositeFilter.op))}(t):X(30097,{filter:t})}function HL(t){return RL[t]}function $L(t){return NL[t]}function qL(t){return DL[t]}function Wi(t){return{fieldPath:t.canonicalString()}}function Hi(t){return mt.fromServerFormat(t.fieldPath)}function $1(t){return t instanceof Je?function(n){if(n.op==="=="){if(yw(n.value))return{unaryFilter:{field:Wi(n.field),op:"IS_NAN"}};if(gw(n.value))return{unaryFilter:{field:Wi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(yw(n.value))return{unaryFilter:{field:Wi(n.field),op:"IS_NOT_NAN"}};if(gw(n.value))return{unaryFilter:{field:Wi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Wi(n.field),op:$L(n.op),value:n.value}}}(t):t instanceof Nn?function(n){const r=n.getFilters().map(s=>$1(s));return r.length===1?r[0]:{compositeFilter:{op:qL(n.op),filters:r}}}(t):X(54877,{filter:t})}function YL(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function q1(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function Y1(t){return!!t&&typeof t._toProto=="function"&&t._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(e,n,r,s,i=Z.min(),o=Z.min(),a=_t.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new ns(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ns(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ns(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ns(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GL{constructor(e){this.yt=e}}function KL(t){const e=BL({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Sh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QL{constructor(){this.Sn=new XL}addToCollectionParentIndex(e,n){return this.Sn.add(n),U.resolve()}getCollectionParents(e,n){return U.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return U.resolve()}deleteFieldIndex(e,n){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,n){return U.resolve()}getDocumentsMatchingTarget(e,n){return U.resolve(null)}getIndexType(e,n){return U.resolve(0)}getFieldIndexes(e,n){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,n){return U.resolve(Is.min())}getMinOffsetFromCollectionGroup(e,n){return U.resolve(Is.min())}updateCollectionGroup(e,n,r){return U.resolve()}updateIndexEntries(e,n){return U.resolve()}}class XL{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new ot(xe.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new ot(xe.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},G1=41943040;class Ft{static withCacheSize(e){return new Ft(e,Ft.DEFAULT_COLLECTION_PERCENTILE,Ft.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ft.DEFAULT_COLLECTION_PERCENTILE=10,Ft.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ft.DEFAULT=new Ft(G1,Ft.DEFAULT_COLLECTION_PERCENTILE,Ft.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ft.DISABLED=new Ft(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Do(0)}static ar(){return new Do(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nw="LruGarbageCollector",JL=1048576;function Dw([t,e],[n,r]){const s=oe(t,n);return s===0?oe(e,r):s}class ZL{constructor(e){this.Pr=e,this.buffer=new ot(Dw),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Dw(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class eV{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){$(Nw,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Go(n)?$(Nw,"Ignoring IndexedDB error during garbage collection: ",n):await Yo(n)}await this.Ar(3e5)})}}class tV{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return U.resolve(yd.ce);const r=new ZL(n);return this.Vr.forEachTarget(e,s=>r.Er(s.sequenceNumber)).next(()=>this.Vr.mr(e,s=>r.Er(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?($("LruGarbageCollector","Garbage collection skipped; disabled"),U.resolve(Rw)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?($("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Rw):this.gr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let r,s,i,o,a,l,c;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?($("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),s=this.params.maximumSequenceNumbersToCollect):s=d,o=Date.now(),this.nthSequenceNumber(e,s))).next(d=>(r=d,a=Date.now(),this.removeTargets(e,r,n))).next(d=>(i=d,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(d=>(c=Date.now(),zi()<=ie.DEBUG&&$("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(l-a)+`ms
	Removed ${d} documents in `+(c-l)+`ms
Total Duration: ${c-h}ms`),U.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:d})))}}function nV(t,e){return new tV(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rV{constructor(){this.changes=new Pi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,It.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?U.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sV{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iV{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&ol(r.mutation,s,bn.empty(),ke.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ae()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ae()){const s=si();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=za();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=si();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ae()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=Ar();const o=il(),a=function(){return il()}();return n.forEach((l,c)=>{const h=r.get(c.key);s.has(c.key)&&(h===void 0||h.mutation instanceof Ai)?i=i.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),ol(h.mutation,c,h.mutation.getFieldMask(),ke.now())):o.set(c.key,bn.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>a.set(c,new sV(h,o.get(c)??null))),a))}recalculateAndSaveOverlays(e,n){const r=il();let s=new Me((o,a)=>o-a),i=ae();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let h=r.get(l)||bn.empty();h=a.applyToLocalView(c,h),r.set(l,h);const d=(s.get(a.batchId)||ae()).add(l);s=s.insert(a.batchId,d)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,d=P1();h.forEach(f=>{if(!i.has(f)){const m=O1(n.get(f),r.get(f));m!==null&&d.set(f,m),i=i.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return U.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return oL(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):T1(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):U.resolve(si());let a=Fl,l=i;return o.next(c=>U.forEach(c,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),i.get(h)?U.resolve():this.remoteDocumentCache.getEntry(e,h).next(f=>{l=l.insert(h,f)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,ae())).next(h=>({batchId:a,changes:k1(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new K(n)).next(r=>{let s=za();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=za();return this.indexManager.getCollectionParents(e,i).next(a=>U.forEach(a,l=>{const c=function(d,f){return new Ko(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(h=>{h.forEach((d,f)=>{o=o.insert(d,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,It.newInvalidDocument(h)))});let a=za();return o.forEach((l,c)=>{const h=i.get(l);h!==void 0&&ol(h.mutation,c,bn.empty(),ke.now()),xd(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oV{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return U.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:tr(s.createTime)}}(n)),U.resolve()}getNamedQuery(e,n){return U.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,function(s){return{name:s.name,query:KL(s.bundledQuery),readTime:tr(s.readTime)}}(n)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aV{constructor(){this.overlays=new Me(K.comparator),this.Lr=new Map}getOverlay(e,n){return U.resolve(this.overlays.get(n))}getOverlays(e,n){const r=si();return U.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.bt(e,n,i)}),U.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Lr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Lr.delete(r)),U.resolve()}getOverlaysForCollection(e,n,r){const s=si(),i=n.length+1,o=new K(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return U.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Me((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=i.get(c.largestBatchId);h===null&&(h=si(),i=i.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=si(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=s)););return U.resolve(a)}bt(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Lr.get(s.largestBatchId).delete(r.key);this.Lr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new IL(n,r));let i=this.Lr.get(n);i===void 0&&(i=ae(),this.Lr.set(n,i)),this.Lr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lV{constructor(){this.sessionToken=_t.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yy{constructor(){this.kr=new ot(ct.Kr),this.qr=new ot(ct.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const r=new ct(e,n);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new ct(e,n))}Qr(e,n){e.forEach(r=>this.removeReference(r,n))}Gr(e){const n=new K(new xe([])),r=new ct(n,e),s=new ct(n,e+1),i=[];return this.qr.forEachInRange([r,s],o=>{this.Wr(o),i.push(o.key)}),i}zr(){this.kr.forEach(e=>this.Wr(e))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new K(new xe([])),r=new ct(n,e),s=new ct(n,e+1);let i=ae();return this.qr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new ct(e,0),r=this.kr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class ct{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return K.comparator(e.key,n.key)||oe(e.Hr,n.Hr)}static Ur(e,n){return oe(e.Hr,n.Hr)||K.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cV{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new ot(ct.Kr)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new bL(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.Jr=this.Jr.add(new ct(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return U.resolve(o)}lookupMutationBatch(e,n){return U.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Xr(r),i=s<0?0:s;return U.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?ly:this.Yn-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new ct(n,0),s=new ct(n,Number.POSITIVE_INFINITY),i=[];return this.Jr.forEachInRange([r,s],o=>{const a=this.Zr(o.Hr);i.push(a)}),U.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ot(oe);return n.forEach(s=>{const i=new ct(s,0),o=new ct(s,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([i,o],a=>{r=r.add(a.Hr)})}),U.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;K.isDocumentKey(i)||(i=i.child(""));const o=new ct(new K(i),0);let a=new ot(oe);return this.Jr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.Hr)),!0)},o),U.resolve(this.Yr(a))}Yr(e){const n=[];return e.forEach(r=>{const s=this.Zr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){me(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return U.forEach(n.mutations,s=>{const i=new ct(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Jr=r})}nr(e){}containsKey(e,n){const r=new ct(n,0),s=this.Jr.firstAfterOrEqual(r);return U.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uV{constructor(e){this.ti=e,this.docs=function(){return new Me(K.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ti(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return U.resolve(r?r.document.mutableCopy():It.newInvalidDocument(n))}getEntries(e,n){let r=Ar();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():It.newInvalidDocument(s))}),U.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Ar();const o=n.path,a=new K(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||LM(MM(h),r)<=0||(s.has(h.key)||xd(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return U.resolve(i)}getAllFromCollectionGroup(e,n,r,s){X(9500)}ni(e,n){return U.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new hV(this)}getSize(e){return U.resolve(this.size)}}class hV extends rV{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Mr.addEntry(e,s)):this.Mr.removeEntry(r)}),U.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dV{constructor(e){this.persistence=e,this.ri=new Pi(n=>hy(n),dy),this.lastRemoteSnapshotVersion=Z.min(),this.highestTargetId=0,this.ii=0,this.si=new yy,this.targetCount=0,this.oi=Do._r()}forEachTarget(e,n){return this.ri.forEach((r,s)=>n(s)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ii&&(this.ii=n),U.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new Do(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,U.resolve()}updateTargetData(e,n){return this.lr(n),U.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.ri.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.ri.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),U.waitFor(i).next(()=>s)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,n){const r=this.ri.get(n)||null;return U.resolve(r)}addMatchingKeys(e,n,r){return this.si.$r(n,r),U.resolve()}removeMatchingKeys(e,n,r){this.si.Qr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),U.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),U.resolve()}getMatchingKeysForTargetId(e,n){const r=this.si.jr(n);return U.resolve(r)}containsKey(e,n){return U.resolve(this.si.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{constructor(e,n){this._i={},this.overlays={},this.ai=new yd(0),this.ui=!1,this.ui=!0,this.ci=new lV,this.referenceDelegate=e(this),this.li=new dV(this),this.indexManager=new QL,this.remoteDocumentCache=function(s){return new uV(s)}(r=>this.referenceDelegate.hi(r)),this.serializer=new GL(n),this.Pi=new oV(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new aV,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this._i[e.toKey()];return r||(r=new cV(n,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,r){$("MemoryPersistence","Starting transaction:",e);const s=new fV(this.ai.next());return this.referenceDelegate.Ti(),r(s).next(i=>this.referenceDelegate.Ii(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ei(e,n){return U.or(Object.values(this._i).map(r=>()=>r.containsKey(e,n)))}}class fV extends FM{constructor(e){super(),this.currentSequenceNumber=e}}class _y{constructor(e){this.persistence=e,this.Ri=new yy,this.Ai=null}static Vi(e){return new _y(e)}get di(){if(this.Ai)return this.Ai;throw X(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.di.delete(r.toString()),U.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.di.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),U.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach(s=>this.di.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.di.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.di,r=>{const s=K.fromPath(r);return this.mi(e,s).next(i=>{i||n.removeEntry(s,Z.min())})}).next(()=>(this.Ai=null,n.apply(e)))}updateLimboDocument(e,n){return this.mi(e,n).next(r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())})}hi(e){return 0}mi(e,n){return U.or([()=>U.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Ch{constructor(e,n){this.persistence=e,this.fi=new Pi(r=>zM(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=nV(this,n)}static Vi(e,n){return new Ch(e,n)}Ti(){}Ii(e){return U.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}pr(e){let n=0;return this.mr(e,r=>{n++}).next(()=>n)}mr(e,n){return U.forEach(this.fi,(r,s)=>this.wr(e,r,s).next(i=>i?U.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ni(e,o=>this.wr(e,o,n).next(a=>{a||(r++,i.removeEntry(o,Z.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),U.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),U.resolve()}removeReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),U.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),U.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Du(e.data.value)),n}wr(e,n,r){return U.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.fi.get(n);return U.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vy{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Ts=r,this.Is=s}static Es(e,n){let r=ae(),s=ae();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new vy(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pV{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mV{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=function(){return UN()?8:jM(Pt())>0?6:4}()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.gs(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ps(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new pV;return this.ys(e,n,o).next(a=>{if(i.result=a,this.As)return this.ws(e,n,o,a.size)})}).next(()=>i.result)}ws(e,n,r,s){return r.documentReadCount<this.Vs?(zi()<=ie.DEBUG&&$("QueryEngine","SDK will not create cache indexes for query:",Bi(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),U.resolve()):(zi()<=ie.DEBUG&&$("QueryEngine","Query:",Bi(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ds*s?(zi()<=ie.DEBUG&&$("QueryEngine","The SDK decides to create cache indexes for query:",Bi(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Zn(n))):U.resolve())}gs(e,n){if(xw(n))return U.resolve(null);let r=Zn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Sh(n,null,"F"),r=Zn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=ae(...i);return this.fs.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.bs(n,a);return this.Ss(n,c,o,l.readTime)?this.gs(e,Sh(n,null,"F")):this.Ds(e,c,n,l)}))})))}ps(e,n,r,s){return xw(n)||s.isEqual(Z.min())?U.resolve(null):this.fs.getDocuments(e,r).next(i=>{const o=this.bs(n,i);return this.Ss(n,o,r,s)?U.resolve(null):(zi()<=ie.DEBUG&&$("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Bi(n)),this.Ds(e,o,n,OM(s,Fl)).next(a=>a))})}bs(e,n){let r=new ot(I1(e));return n.forEach((s,i)=>{xd(e,i)&&(r=r.add(i))}),r}Ss(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}ys(e,n,r){return zi()<=ie.DEBUG&&$("QueryEngine","Using full collection scan to execute query:",Bi(n)),this.fs.getDocumentsMatchingQuery(e,n,Is.min(),r)}Ds(e,n,r,s){return this.fs.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wy="LocalStore",gV=3e8;class yV{constructor(e,n,r,s){this.persistence=e,this.Cs=n,this.serializer=s,this.vs=new Me(oe),this.Fs=new Pi(i=>hy(i),dy),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new iV(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.vs))}}function _V(t,e,n,r){return new yV(t,e,n,r)}async function Q1(t,e){const n=ee(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Os(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=ae();for(const c of s){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of i){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(c=>({Ns:c,removedBatchIds:o,addedBatchIds:a}))})})}function vV(t,e){const n=ee(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.xs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,h){const d=c.batch,f=d.keys();let m=U.resolve();return f.forEach(v=>{m=m.next(()=>h.getEntry(l,v)).next(w=>{const T=c.docVersions.get(v);me(T!==null,48541),w.version.compareTo(T)<0&&(d.applyToRemoteDocument(w,c),w.isValidDocument()&&(w.setReadTime(c.commitVersion),h.addEntry(w)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=ae();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function X1(t){const e=ee(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.li.getLastRemoteSnapshotVersion(n))}function wV(t,e){const n=ee(t),r=e.snapshotVersion;let s=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.xs.newChangeBuffer({trackRemovals:!0});s=n.vs;const a=[];e.targetChanges.forEach((h,d)=>{const f=s.get(d);if(!f)return;a.push(n.li.removeMatchingKeys(i,h.removedDocuments,d).next(()=>n.li.addMatchingKeys(i,h.addedDocuments,d)));let m=f.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(d)!==null?m=m.withResumeToken(_t.EMPTY_BYTE_STRING,Z.min()).withLastLimboFreeSnapshotVersion(Z.min()):h.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(h.resumeToken,r)),s=s.insert(d,m),function(w,T,_){return w.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=gV?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(f,m,h)&&a.push(n.li.updateTargetData(i,m))});let l=Ar(),c=ae();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),a.push(xV(i,o,e.documentUpdates).next(h=>{l=h.Bs,c=h.Ls})),!r.isEqual(Z.min())){const h=n.li.getLastRemoteSnapshotVersion(i).next(d=>n.li.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(h)}return U.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.vs=s,i))}function xV(t,e,n){let r=ae(),s=ae();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Ar();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(Z.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):$(wy,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Bs:o,Ls:s}})}function EV(t,e){const n=ee(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=ly),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function TV(t,e){const n=ee(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.li.getTargetData(r,e).next(i=>i?(s=i,U.resolve(s)):n.li.allocateTargetId(r).next(o=>(s=new ns(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.li.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.vs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.vs=n.vs.insert(r.targetId,r),n.Fs.set(e,r.targetId)),r})}async function Im(t,e,n){const r=ee(t),s=r.vs.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Go(o))throw o;$(wy,`Failed to update sequence numbers for target ${e}: ${o}`)}r.vs=r.vs.remove(e),r.Fs.delete(s.target)}function Ow(t,e,n){const r=ee(t);let s=Z.min(),i=ae();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,h){const d=ee(l),f=d.Fs.get(h);return f!==void 0?U.resolve(d.vs.get(f)):d.li.getTargetData(c,h)}(r,o,Zn(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,n?s:Z.min(),n?i:ae())).next(a=>(bV(r,cL(e),a),{documents:a,ks:i})))}function bV(t,e,n){let r=t.Ms.get(e)||Z.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Ms.set(e,r)}class Mw{constructor(){this.activeTargetIds=mL()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class IV{constructor(){this.vo=new Mw,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,r){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Mw,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SV{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lw="ConnectivityMonitor";class Vw{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){$(Lw,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){$(Lw,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jc=null;function Sm(){return Jc===null?Jc=function(){return 268435456+Math.round(2147483648*Math.random())}():Jc++,"0x"+Jc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wf="RestConnection",kV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class PV{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.$o=this.databaseId.database===Th?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,n,r,s,i){const o=Sm(),a=this.Qo(e,n.toUriEncodedString());$(Wf,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(l,s,i);const{host:c}=new URL(a),h=Ls(c);return this.zo(e,a,l,r,h).then(d=>($(Wf,`Received RPC '${e}' ${o}: `,d),d),d=>{throw wi(Wf,`RPC '${e}' ${o} failed with error: `,d,"url: ",a,"request:",r),d})}jo(e,n,r,s,i,o){return this.Wo(e,n,r,s,i)}Go(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+qo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}Qo(e,n){const r=kV[e];let s=`${this.qo}/v1/${n}:${r}`;return this.databaseInfo.apiKey&&(s=`${s}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),s}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AV{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Et="WebChannelConnection",ba=(t,e,n)=>{t.listen(e,r=>{try{n(r)}catch(s){setTimeout(()=>{throw s},0)}})};class go extends PV{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!go.c_){const e=e1();ba(e,ZI.STAT_EVENT,n=>{n.stat===pm.PROXY?$(Et,"STAT_EVENT: detected buffering proxy"):n.stat===pm.NOPROXY&&$(Et,"STAT_EVENT: detected no buffering proxy")}),go.c_=!0}}zo(e,n,r,s,i){const o=Sm();return new Promise((a,l)=>{const c=new XI;c.setWithCredentials(!0),c.listenOnce(JI.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Nu.NO_ERROR:const d=c.getResponseJson();$(Et,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),a(d);break;case Nu.TIMEOUT:$(Et,`RPC '${e}' ${o} timed out`),l(new H(j.DEADLINE_EXCEEDED,"Request time out"));break;case Nu.HTTP_ERROR:const f=c.getStatus();if($(Et,`RPC '${e}' ${o} failed with status:`,f,"response text:",c.getResponseText()),f>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);const v=m==null?void 0:m.error;if(v&&v.status&&v.message){const w=function(_){const x=_.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(x)>=0?x:j.UNKNOWN}(v.status);l(new H(w,v.message))}else l(new H(j.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new H(j.UNAVAILABLE,"Connection failed."));break;default:X(9055,{l_:e,streamId:o,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{$(Et,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(s);$(Et,`RPC '${e}' ${o} sending request:`,s),c.send(n,"POST",h,r,15)})}T_(e,n,r){const s=Sm(),i=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=this.createWebChannelTransport(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Go(a.initMessageHeaders,n,r),a.encodeInitMessageHeaders=!0;const c=i.join("");$(Et,`Creating RPC '${e}' stream ${s}: ${c}`,a);const h=o.createWebChannel(c,a);this.I_(h);let d=!1,f=!1;const m=new AV({Ho:v=>{f?$(Et,`Not sending because RPC '${e}' stream ${s} is closed:`,v):(d||($(Et,`Opening RPC '${e}' stream ${s} transport.`),h.open(),d=!0),$(Et,`RPC '${e}' stream ${s} sending:`,v),h.send(v))},Jo:()=>h.close()});return ba(h,Ua.EventType.OPEN,()=>{f||($(Et,`RPC '${e}' stream ${s} transport opened.`),m.i_())}),ba(h,Ua.EventType.CLOSE,()=>{f||(f=!0,$(Et,`RPC '${e}' stream ${s} transport closed`),m.o_(),this.E_(h))}),ba(h,Ua.EventType.ERROR,v=>{f||(f=!0,wi(Et,`RPC '${e}' stream ${s} transport errored. Name:`,v.name,"Message:",v.message),m.o_(new H(j.UNAVAILABLE,"The operation could not be completed")))}),ba(h,Ua.EventType.MESSAGE,v=>{var w;if(!f){const T=v.data[0];me(!!T,16349);const _=T,x=(_==null?void 0:_.error)||((w=_[0])==null?void 0:w.error);if(x){$(Et,`RPC '${e}' stream ${s} received error:`,x);const b=x.status;let R=function(I){const y=Qe[I];if(y!==void 0)return V1(y)}(b),D=x.message;b==="NOT_FOUND"&&D.includes("database")&&D.includes("does not exist")&&D.includes(this.databaseId.database)&&wi(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),R===void 0&&(R=j.INTERNAL,D="Unknown error status: "+b+" with message "+x.message),f=!0,m.o_(new H(R,D)),h.close()}else $(Et,`RPC '${e}' stream ${s} received:`,T),m.__(T)}}),go.u_(),setTimeout(()=>{m.s_()},0),m}terminate(){this.a_.forEach(e=>e.close()),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter(n=>n===e)}Go(e,n,r){super.Go(e,n,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return t1()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CV(t){return new go(t)}function Hf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Id(t){return new OL(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */go.c_=!1;class J1{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Ci=e,this.timerId=n,this.R_=r,this.A_=s,this.V_=i,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&$("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fw="PersistentStream";class Z1{constructor(e,n,r,s,i,o,a,l){this.Ci=e,this.b_=r,this.S_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new J1(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,()=>this.k_()))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===j.RESOURCE_EXHAUSTED?(Pr(n.toString()),Pr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new H(j.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.Yo(()=>{r(()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.Yo()))}),this.stream.t_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.H_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return $(Fw,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget(()=>this.D_===e?n():($(Fw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class RV extends Z1{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=VL(this.serializer,e),r=function(i){if(!("targetChange"in i))return Z.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Z.min():o.readTime?tr(o.readTime):Z.min()}(e);return this.listener.J_(n,r)}Z_(e){const n={};n.database=bm(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=vm(l)?{documents:UL(i,l)}:{query:zL(i,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=U1(i,o.resumeToken);const c=xm(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(Z.min())>0){a.readTime=Ah(i,o.snapshotVersion.toTimestamp());const c=xm(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=WL(this.serializer,e);r&&(n.labels=r),this.K_(n)}X_(e){const n={};n.database=bm(this.serializer),n.removeTarget=e,this.K_(n)}}class NV extends Z1{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return me(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,me(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){me(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=jL(e.writeResults,e.commitTime),r=tr(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=bm(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>FL(this.serializer,r))};this.K_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DV{}class OV extends DV{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new H(j.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Wo(e,Em(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new H(j.UNKNOWN,i.toString())})}jo(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.jo(e,Em(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new H(j.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}function MV(t,e,n,r){return new OV(t,e,n,r)}class LV{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Pr(n),this.aa=!1):$("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xi="RemoteStore";class VV{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=i,this.Aa.Mo(o=>{r.enqueueAndForget(async()=>{Ci(this)&&($(xi,"Restarting streams for network reachability change."),await async function(l){const c=ee(l);c.Ea.add(4),await dc(c),c.Va.set("Unknown"),c.Ea.delete(4),await Sd(c)}(this))})}),this.Va=new LV(r,s)}}async function Sd(t){if(Ci(t))for(const e of t.Ra)await e(!0)}async function dc(t){for(const e of t.Ra)await e(!1)}function eS(t,e){const n=ee(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),by(n)?Ty(n):Qo(n).O_()&&Ey(n,e))}function xy(t,e){const n=ee(t),r=Qo(n);n.Ia.delete(e),r.O_()&&tS(n,e),n.Ia.size===0&&(r.O_()?r.L_():Ci(n)&&n.Va.set("Unknown"))}function Ey(t,e){if(t.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Z.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Qo(t).Z_(e)}function tS(t,e){t.da.$e(e),Qo(t).X_(e)}function Ty(t){t.da=new CL({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Qo(t).start(),t.Va.ua()}function by(t){return Ci(t)&&!Qo(t).x_()&&t.Ia.size>0}function Ci(t){return ee(t).Ea.size===0}function nS(t){t.da=void 0}async function FV(t){t.Va.set("Online")}async function jV(t){t.Ia.forEach((e,n)=>{Ey(t,e)})}async function UV(t,e){nS(t),by(t)?(t.Va.ha(e),Ty(t)):t.Va.set("Unknown")}async function zV(t,e,n){if(t.Va.set("Online"),e instanceof j1&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.Ia.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.Ia.delete(a),s.da.removeTarget(a))}(t,e)}catch(r){$(xi,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Rh(t,r)}else if(e instanceof Lu?t.da.Xe(e):e instanceof F1?t.da.st(e):t.da.tt(e),!n.isEqual(Z.min()))try{const r=await X1(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.da.Tt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=i.Ia.get(c);h&&i.Ia.set(c,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const h=i.Ia.get(l);if(!h)return;i.Ia.set(l,h.withResumeToken(_t.EMPTY_BYTE_STRING,h.snapshotVersion)),tS(i,l);const d=new ns(h.target,l,c,h.sequenceNumber);Ey(i,d)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){$(xi,"Failed to raise snapshot:",r),await Rh(t,r)}}async function Rh(t,e,n){if(!Go(e))throw e;t.Ea.add(1),await dc(t),t.Va.set("Offline"),n||(n=()=>X1(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{$(xi,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Sd(t)})}function rS(t,e){return e().catch(n=>Rh(t,n,e))}async function kd(t){const e=ee(t),n=As(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ly;for(;BV(e);)try{const s=await EV(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,WV(e,s)}catch(s){await Rh(e,s)}sS(e)&&iS(e)}function BV(t){return Ci(t)&&t.Ta.length<10}function WV(t,e){t.Ta.push(e);const n=As(t);n.O_()&&n.Y_&&n.ea(e.mutations)}function sS(t){return Ci(t)&&!As(t).x_()&&t.Ta.length>0}function iS(t){As(t).start()}async function HV(t){As(t).ra()}async function $V(t){const e=As(t);for(const n of t.Ta)e.ea(n.mutations)}async function qV(t,e,n){const r=t.Ta.shift(),s=py.from(r,e,n);await rS(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await kd(t)}async function YV(t,e){e&&As(t).Y_&&await async function(r,s){if(function(o){return kL(o)&&o!==j.ABORTED}(s.code)){const i=r.Ta.shift();As(r).B_(),await rS(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await kd(r)}}(t,e),sS(t)&&iS(t)}async function jw(t,e){const n=ee(t);n.asyncQueue.verifyOperationInProgress(),$(xi,"RemoteStore received new credentials");const r=Ci(n);n.Ea.add(3),await dc(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Sd(n)}async function GV(t,e){const n=ee(t);e?(n.Ea.delete(2),await Sd(n)):e||(n.Ea.add(2),await dc(n),n.Va.set("Unknown"))}function Qo(t){return t.ma||(t.ma=function(n,r,s){const i=ee(n);return i.sa(),new RV(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:FV.bind(null,t),Yo:jV.bind(null,t),t_:UV.bind(null,t),J_:zV.bind(null,t)}),t.Ra.push(async e=>{e?(t.ma.B_(),by(t)?Ty(t):t.Va.set("Unknown")):(await t.ma.stop(),nS(t))})),t.ma}function As(t){return t.fa||(t.fa=function(n,r,s){const i=ee(n);return i.sa(),new NV(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),Yo:HV.bind(null,t),t_:YV.bind(null,t),ta:$V.bind(null,t),na:qV.bind(null,t)}),t.Ra.push(async e=>{e?(t.fa.B_(),await kd(t)):(await t.fa.stop(),t.Ta.length>0&&($(xi,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iy{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new vs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new Iy(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new H(j.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Sy(t,e){if(Pr("AsyncQueue",`${e}: ${t}`),Go(t))return new H(j.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{static emptySet(e){return new yo(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||K.comparator(n.key,r.key):(n,r)=>K.comparator(n.key,r.key),this.keyedMap=za(),this.sortedSet=new Me(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof yo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new yo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw{constructor(){this.ga=new Me(K.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):X(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Oo{constructor(e,n,r,s,i,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Oo(e,n,yo.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&wd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KV{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some(e=>e.Da())}}class QV{constructor(){this.queries=zw(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=ee(n),i=s.queries;s.queries=zw(),i.forEach((o,a)=>{for(const l of a.ba)l.onError(r)})})(this,new H(j.ABORTED,"Firestore shutting down"))}}function zw(){return new Pi(t=>b1(t),wd)}async function XV(t,e){const n=ee(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.Sa()&&e.Da()&&(r=2):(i=new KV,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=Sy(o,`Initialization of query '${Bi(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.ba.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&ky(n)}async function JV(t,e){const n=ee(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.ba.indexOf(e);o>=0&&(i.ba.splice(o,1),i.ba.length===0?s=e.Da()?0:1:!i.Sa()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function ZV(t,e){const n=ee(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.ba)a.Fa(s)&&(r=!0);o.wa=s}}r&&ky(n)}function eF(t,e,n){const r=ee(t),s=r.queries.get(e);if(s)for(const i of s.ba)i.onError(n);r.queries.delete(e)}function ky(t){t.Ca.forEach(e=>{e.next()})}var km,Bw;(Bw=km||(km={})).Ma="default",Bw.Cache="cache";class tF{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Oo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Oo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==km.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oS{constructor(e){this.key=e}}class aS{constructor(e){this.key=e}}class nF{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=ae(),this.mutatedKeys=ae(),this.eu=I1(e),this.tu=new yo(this.eu)}get nu(){return this.Za}ru(e,n){const r=n?n.iu:new Uw,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,d)=>{const f=s.get(h),m=xd(this.query,d)?d:null,v=!!f&&this.mutatedKeys.has(f.key),w=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let T=!1;f&&m?f.data.isEqual(m.data)?v!==w&&(r.track({type:3,doc:m}),T=!0):this.su(f,m)||(r.track({type:2,doc:m}),T=!0,(l&&this.eu(m,l)>0||c&&this.eu(m,c)<0)&&(a=!0)):!f&&m?(r.track({type:0,doc:m}),T=!0):f&&!m&&(r.track({type:1,doc:f}),T=!0,(l||c)&&(a=!0)),T&&(m?(o=o.add(m),i=w?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Ss:a,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((h,d)=>function(m,v){const w=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return X(20277,{Vt:T})}};return w(m)-w(v)}(h.type,d.type)||this.eu(h.doc,d.doc)),this.ou(r),s=s??!1;const a=n&&!s?this._u():[],l=this.Ya.size===0&&this.current&&!s?1:0,c=l!==this.Xa;return this.Xa=l,o.length!==0||c?{snapshot:new Oo(this.query,e.tu,i,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Uw,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Za=this.Za.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Za=this.Za.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=ae(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))});const n=[];return e.forEach(r=>{this.Ya.has(r)||n.push(new aS(r))}),this.Ya.forEach(r=>{e.has(r)||n.push(new oS(r))}),n}cu(e){this.Za=e.ks,this.Ya=ae();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Oo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Py="SyncEngine";class rF{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class sF{constructor(e){this.key=e,this.hu=!1}}class iF{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Pi(a=>b1(a),wd),this.Iu=new Map,this.Eu=new Set,this.Ru=new Me(K.comparator),this.Au=new Map,this.Vu=new yy,this.du={},this.mu=new Map,this.fu=Do.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function oF(t,e,n=!0){const r=fS(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await lS(r,e,n,!0),s}async function aF(t,e){const n=fS(t);await lS(n,e,!0,!1)}async function lS(t,e,n,r){const s=await TV(t.localStore,Zn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await lF(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&eS(t.remoteStore,s),a}async function lF(t,e,n,r,s){t.pu=(d,f,m)=>async function(w,T,_,x){let b=T.view.ru(_);b.Ss&&(b=await Ow(w.localStore,T.query,!1).then(({documents:I})=>T.view.ru(I,b)));const R=x&&x.targetChanges.get(T.targetId),D=x&&x.targetMismatches.get(T.targetId)!=null,L=T.view.applyChanges(b,w.isPrimaryClient,R,D);return Hw(w,T.targetId,L.au),L.snapshot}(t,d,f,m);const i=await Ow(t.localStore,e,!0),o=new nF(e,i.ks),a=o.ru(i.documents),l=hc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);Hw(t,n,c.au);const h=new rF(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),c.snapshot}async function cF(t,e,n){const r=ee(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(o=>!wd(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Im(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&xy(r.remoteStore,s.targetId),Pm(r,s.targetId)}).catch(Yo)):(Pm(r,s.targetId),await Im(r.localStore,s.targetId,!0))}async function uF(t,e){const n=ee(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),xy(n.remoteStore,r.targetId))}async function hF(t,e,n){const r=_F(t);try{const s=await function(o,a){const l=ee(o),c=ke.now(),h=a.reduce((m,v)=>m.add(v.key),ae());let d,f;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let v=Ar(),w=ae();return l.xs.getEntries(m,h).next(T=>{v=T,v.forEach((_,x)=>{x.isValidDocument()||(w=w.add(_))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,v)).next(T=>{d=T;const _=[];for(const x of a){const b=EL(x,d.get(x.key).overlayedDocument);b!=null&&_.push(new Ai(x.key,b,m1(b.value.mapValue),er.exists(!0)))}return l.mutationQueue.addMutationBatch(m,c,_,a)}).next(T=>{f=T;const _=T.applyToLocalDocumentSet(d,w);return l.documentOverlayCache.saveOverlays(m,T.batchId,_)})}).then(()=>({batchId:f.batchId,changes:k1(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.du[o.currentUser.toKey()];c||(c=new Me(oe)),c=c.insert(a,l),o.du[o.currentUser.toKey()]=c}(r,s.batchId,n),await fc(r,s.changes),await kd(r.remoteStore)}catch(s){const i=Sy(s,"Failed to persist write");n.reject(i)}}async function cS(t,e){const n=ee(t);try{const r=await wV(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Au.get(i);o&&(me(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?me(o.hu,14607):s.removedDocuments.size>0&&(me(o.hu,42227),o.hu=!1))}),await fc(n,r,e)}catch(r){await Yo(r)}}function Ww(t,e,n){const r=ee(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,o)=>{const a=o.view.va(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=ee(o);l.onlineState=a;let c=!1;l.queries.forEach((h,d)=>{for(const f of d.ba)f.va(a)&&(c=!0)}),c&&ky(l)}(r.eventManager,e),s.length&&r.Pu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function dF(t,e,n){const r=ee(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new Me(K.comparator);o=o.insert(i,It.newNoDocument(i,Z.min()));const a=ae().add(i),l=new bd(Z.min(),new Map,new Me(oe),o,a);await cS(r,l),r.Ru=r.Ru.remove(i),r.Au.delete(e),Ay(r)}else await Im(r.localStore,e,!1).then(()=>Pm(r,e,n)).catch(Yo)}async function fF(t,e){const n=ee(t),r=e.batch.batchId;try{const s=await vV(n.localStore,e);hS(n,r,null),uS(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await fc(n,s)}catch(s){await Yo(s)}}async function pF(t,e,n){const r=ee(t);try{const s=await function(o,a){const l=ee(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next(d=>(me(d!==null,37113),h=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(r.localStore,e);hS(r,e,n),uS(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await fc(r,s)}catch(s){await Yo(s)}}function uS(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function hS(t,e,n){const r=ee(t);let s=r.du[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.du[r.currentUser.toKey()]=s}}function Pm(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Vu.Gr(e).forEach(r=>{t.Vu.containsKey(r)||dS(t,r)})}function dS(t,e){t.Eu.delete(e.path.canonicalString());const n=t.Ru.get(e);n!==null&&(xy(t.remoteStore,n),t.Ru=t.Ru.remove(e),t.Au.delete(n),Ay(t))}function Hw(t,e,n){for(const r of n)r instanceof oS?(t.Vu.addReference(r.key,e),mF(t,r)):r instanceof aS?($(Py,"Document no longer in limbo: "+r.key),t.Vu.removeReference(r.key,e),t.Vu.containsKey(r.key)||dS(t,r.key)):X(19791,{wu:r})}function mF(t,e){const n=e.key,r=n.path.canonicalString();t.Ru.get(n)||t.Eu.has(r)||($(Py,"New document in limbo: "+n),t.Eu.add(r),Ay(t))}function Ay(t){for(;t.Eu.size>0&&t.Ru.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new K(xe.fromString(e)),r=t.fu.next();t.Au.set(r,new sF(n)),t.Ru=t.Ru.insert(n,r),eS(t.remoteStore,new ns(Zn(E1(n.path)),r,"TargetPurposeLimboResolution",yd.ce))}}async function fc(t,e,n){const r=ee(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,l)=>{o.push(r.pu(l,e,n).then(c=>{var h;if((c||n)&&r.isPrimaryClient){const d=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))==null?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){s.push(c);const d=vy.Es(l.targetId,c);i.push(d)}}))}),await Promise.all(o),r.Pu.J_(s),await async function(l,c){const h=ee(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>U.forEach(c,f=>U.forEach(f.Ts,m=>h.persistence.referenceDelegate.addReference(d,f.targetId,m)).next(()=>U.forEach(f.Is,m=>h.persistence.referenceDelegate.removeReference(d,f.targetId,m)))))}catch(d){if(!Go(d))throw d;$(wy,"Failed to update sequence numbers: "+d)}for(const d of c){const f=d.targetId;if(!d.fromCache){const m=h.vs.get(f),v=m.snapshotVersion,w=m.withLastLimboFreeSnapshotVersion(v);h.vs=h.vs.insert(f,w)}}}(r.localStore,i))}async function gF(t,e){const n=ee(t);if(!n.currentUser.isEqual(e)){$(Py,"User change. New user:",e.toKey());const r=await Q1(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(a=>{a.forEach(l=>{l.reject(new H(j.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await fc(n,r.Ns)}}function yF(t,e){const n=ee(t),r=n.Au.get(e);if(r&&r.hu)return ae().add(r.key);{let s=ae();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const a=n.Tu.get(o);s=s.unionWith(a.view.nu)}return s}}function fS(t){const e=ee(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=cS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=yF.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=dF.bind(null,e),e.Pu.J_=ZV.bind(null,e.eventManager),e.Pu.yu=eF.bind(null,e.eventManager),e}function _F(t){const e=ee(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=fF.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=pF.bind(null,e),e}class Nh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Id(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return _V(this.persistence,new mV,e.initialUser,this.serializer)}Cu(e){return new K1(_y.Vi,this.serializer)}Du(e){return new IV}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Nh.provider={build:()=>new Nh};class vF extends Nh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){me(this.persistence.referenceDelegate instanceof Ch,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new eV(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Ft.withCacheSize(this.cacheSizeBytes):Ft.DEFAULT;return new K1(r=>Ch.Vi(r,n),this.serializer)}}class Am{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Ww(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=gF.bind(null,this.syncEngine),await GV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new QV}()}createDatastore(e){const n=Id(e.databaseInfo.databaseId),r=CV(e.databaseInfo);return MV(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new VV(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Ww(this.syncEngine,n,0),function(){return Vw.v()?new Vw:new SV}())}createSyncEngine(e,n){return function(s,i,o,a,l,c,h){const d=new iF(s,i,o,a,l,c);return h&&(d.gu=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=ee(s);$(xi,"RemoteStore shutting down."),i.Ea.add(5),await dc(i),i.Aa.shutdown(),i.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Am.provider={build:()=>new Am};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wF{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Pr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cs="FirestoreClient";class xF{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this._databaseInfo=s,this.user=Tt.UNAUTHENTICATED,this.clientId=ay.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{$(Cs,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>($(Cs,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new vs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Sy(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function $f(t,e){t.asyncQueue.verifyOperationInProgress(),$(Cs,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await Q1(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function $w(t,e){t.asyncQueue.verifyOperationInProgress();const n=await EF(t);$(Cs,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>jw(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>jw(e.remoteStore,s)),t._onlineComponents=e}async function EF(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){$(Cs,"Using user provided OfflineComponentProvider");try{await $f(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===j.FAILED_PRECONDITION||s.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;wi("Error using user provided cache. Falling back to memory cache: "+n),await $f(t,new Nh)}}else $(Cs,"Using default OfflineComponentProvider"),await $f(t,new vF(void 0));return t._offlineComponents}async function pS(t){return t._onlineComponents||(t._uninitializedComponentsProvider?($(Cs,"Using user provided OnlineComponentProvider"),await $w(t,t._uninitializedComponentsProvider._online)):($(Cs,"Using default OnlineComponentProvider"),await $w(t,new Am))),t._onlineComponents}function TF(t){return pS(t).then(e=>e.syncEngine)}async function bF(t){const e=await pS(t),n=e.eventManager;return n.onListen=oF.bind(null,e.syncEngine),n.onUnlisten=cF.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=aF.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=uF.bind(null,e.syncEngine),n}function IF(t,e,n={}){const r=new vs;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const h=new wF({next:f=>{h.Nu(),o.enqueueAndForget(()=>JV(i,d)),f.fromCache&&l.source==="server"?c.reject(new H(j.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new tF(a,h,{includeMetadataChanges:!0,Ka:!0});return XV(i,d)}(await bF(t),t.asyncQueue,e,n,r)),r.promise}function SF(t,e){const n=new vs;return t.asyncQueue.enqueueAndForget(async()=>hF(await TF(t),e,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mS(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kF="ComponentProvider",qw=new Map;function PF(t,e,n,r,s){return new HM(t,e,n,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,mS(s.experimentalLongPollingOptions),s.useFetchStreams,s.isUsingEmulator,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gS="firestore.googleapis.com",Yw=!0;class Gw{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new H(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=gS,this.ssl=Yw}else this.host=e.host,this.ssl=e.ssl??Yw;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=G1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<JL)throw new H(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}NM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=mS(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new H(j.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new H(j.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new H(j.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Pd{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Gw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new H(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new H(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Gw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new EM;switch(r.type){case"firstParty":return new SM(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new H(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=qw.get(n);r&&($(kF,"Removing Datastore"),qw.delete(n),r.terminate())}(this),Promise.resolve()}}function AF(t,e,n,r={}){var c;t=Co(t,Pd);const s=Ls(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},a=`${e}:${n}`;s&&(Yg(`https://${a}`),Gg("Firestore",!0)),i.host!==gS&&i.host!==a&&wi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...i,host:a,ssl:s,emulatorOptions:r};if(!gi(l,o)&&(t._setSettings(l),r.mockUserToken)){let h,d;if(typeof r.mockUserToken=="string")h=r.mockUserToken,d=Tt.MOCK_USER;else{h=cI(r.mockUserToken,(c=t._app)==null?void 0:c.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new H(j.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new Tt(f)}t._authCredentials=new TM(new r1(h,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Us(this.firestore,e,this._query)}}class it{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ws(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new it(this.firestore,e,this._key)}toJSON(){return{type:it._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(cc(n,it._jsonSchema))return new it(e,r||null,new K(xe.fromString(n.referencePath)))}}it._jsonSchemaVersion="firestore/documentReference/1.0",it._jsonSchema={type:Ze("string",it._jsonSchemaVersion),referencePath:Ze("string")};class ws extends Us{constructor(e,n,r){super(e,n,E1(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new it(this.firestore,null,new K(e))}withConverter(e){return new ws(this.firestore,e,this._path)}}function et(t,e,...n){if(t=at(t),s1("collection","path",e),t instanceof Pd){const r=xe.fromString(e,...n);return aw(r),new ws(t,null,r)}{if(!(t instanceof it||t instanceof ws))throw new H(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(xe.fromString(e,...n));return aw(r),new ws(t.firestore,null,r)}}function Cm(t,e,...n){if(t=at(t),arguments.length===1&&(e=ay.newId()),s1("doc","path",e),t instanceof Pd){const r=xe.fromString(e,...n);return ow(r),new it(t,null,new K(r))}{if(!(t instanceof it||t instanceof ws))throw new H(j.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(xe.fromString(e,...n));return ow(r),new it(t.firestore,t instanceof ws?t.converter:null,new K(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kw="AsyncQueue";class Qw{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new J1(this,"async_queue_retry"),this._c=()=>{const r=Hf();r&&$(Kw,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Hf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Hf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new vs;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Yu.push(e),this.lc()))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Go(e))throw e;$(Kw,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Pr("INTERNAL UNHANDLED ERROR: ",Xw(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Iy.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&X(47125,{Pc:Xw(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Xw(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Ad extends Pd{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Qw,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Qw(e),this._firestoreClient=void 0,await e}}}function CF(t,e){const n=typeof t=="object"?t:Xg(),r=typeof t=="string"?t:Th,s=dd(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=oI("firestore");i&&AF(s,...i)}return s}function yS(t){if(t._terminated)throw new H(j.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||RF(t),t._firestoreClient}function RF(t){var r,s,i,o;const e=t._freezeSettings(),n=PF(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,(s=t._app)==null?void 0:s.options.apiKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new xF(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new cn(_t.fromBase64String(e))}catch(n){throw new H(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new cn(_t.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:cn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(cc(e,cn._jsonSchema))return cn.fromBase64String(e.bytes)}}cn._jsonSchemaVersion="firestore/bytes/1.0",cn._jsonSchema={type:Ze("string",cn._jsonSchemaVersion),bytes:Ze("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new H(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new mt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new H(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new H(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return oe(this._lat,e._lat)||oe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:nr._jsonSchemaVersion}}static fromJSON(e){if(cc(e,nr._jsonSchema))return new nr(e.latitude,e.longitude)}}nr._jsonSchemaVersion="firestore/geoPoint/1.0",nr._jsonSchema={type:Ze("string",nr._jsonSchemaVersion),latitude:Ze("number"),longitude:Ze("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Pn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(cc(e,Pn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Pn(e.vectorValues);throw new H(j.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Pn._jsonSchemaVersion="firestore/vectorValue/1.0",Pn._jsonSchema={type:Ze("string",Pn._jsonSchemaVersion),vectorValues:Ze("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NF=/^__.*__$/;class DF{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ai(e,this.data,this.fieldMask,n,this.fieldTransforms):new uc(e,this.data,n,this.fieldTransforms)}}function wS(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw X(40011,{dataSource:t})}}class Cy{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.validatePath(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Cy({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Dh(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(wS(this.dataSource)&&NF.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class OF{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Id(e)}createContext(e,n,r,s=!1){return new Cy({dataSource:e,methodName:n,targetDoc:r,path:mt.emptyPath(),arrayElement:!1,hasConverter:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ry(t){const e=t._freezeSettings(),n=Id(t._databaseId);return new OF(t._databaseId,!!e.ignoreUndefinedProperties,n)}function xS(t,e,n,r,s,i={}){const o=t.createContext(i.merge||i.mergeFields?2:0,e,n,s);bS("Data must be an object, but it was:",o,r);const a=ES(r,o);let l,c;if(i.merge)l=new bn(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const d of i.mergeFields){const f=Cd(e,d,n);if(!o.contains(f))throw new H(j.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);FF(h,f)||h.push(f)}l=new bn(h),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new DF(new ln(a),l,c)}function MF(t,e,n,r=!1){return Ny(n,t.createContext(r?4:3,e))}function Ny(t,e){if(TS(t=at(t)))return bS("Unsupported field value:",e,t),ES(t,e);if(t instanceof vS)return function(r,s){if(!wS(s.dataSource))throw s.createError(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.createError(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=Ny(a,s.childContextForArray(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=at(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return gL(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=ke.fromDate(r);return{timestampValue:Ah(s.serializer,i)}}if(r instanceof ke){const i=new ke(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ah(s.serializer,i)}}if(r instanceof nr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof cn)return{bytesValue:U1(s.serializer,r._byteString)};if(r instanceof it){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.createError(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:gy(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Pn)return function(o,a){const l=o instanceof Pn?o.toArray():o;return{mapValue:{fields:{[f1]:{stringValue:p1},[bh]:{arrayValue:{values:l.map(h=>{if(typeof h!="number")throw a.createError("VectorValues must only contain numeric values.");return fy(a.serializer,h)})}}}}}}(r,s);if(Y1(r))return r._toProto(s.serializer);throw s.createError(`Unsupported field value: ${gd(r)}`)}(t,e)}function ES(t,e){const n={};return a1(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ki(t,(r,s)=>{const i=Ny(s,e.childContextForField(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function TS(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ke||t instanceof nr||t instanceof cn||t instanceof it||t instanceof vS||t instanceof Pn||Y1(t))}function bS(t,e,n){if(!TS(n)||!i1(n)){const r=gd(n);throw r==="an object"?e.createError(t+" a custom object"):e.createError(t+" "+r)}}function Cd(t,e,n){if((e=at(e))instanceof _S)return e._internalPath;if(typeof e=="string")return VF(t,e);throw Dh("Field path arguments must be of type string or ",t,!1,void 0,n)}const LF=new RegExp("[~\\*/\\[\\]]");function VF(t,e,n){if(e.search(LF)>=0)throw Dh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new _S(...e.split("."))._internalPath}catch{throw Dh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Dh(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new H(j.INVALID_ARGUMENT,a+t+l)}function FF(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jF{convertValue(e,n="none"){switch(Ps(e)){case 0:return null;case 1:return e.booleanValue;case 2:return He(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ks(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw X(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ki(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[bh].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>He(o.doubleValue));return new Pn(n)}convertGeoPoint(e){return new nr(He(e.latitude),He(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=vd(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(jl(e));default:return null}}convertTimestamp(e){const n=Ss(e);return new ke(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=xe.fromString(e);me(q1(r),9688,{name:e});const s=new Ul(r.get(1),r.get(3)),i=new K(r.popFirst(5));return s.isEqual(n)||Pr(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UF extends jF{constructor(e){super(),this.firestore=e}convertBytes(e){return new cn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new it(this.firestore,null,n)}}const Jw="@firebase/firestore",Zw="4.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new it(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new zF(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const n=this._document.data.field(Cd("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class zF extends IS{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BF(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new H(j.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Dy{}class Oy extends Dy{}function ar(t,e,...n){let r=[];e instanceof Dy&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof Ly).length,a=i.filter(l=>l instanceof My).length;if(o>1||o>0&&a>0)throw new H(j.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class My extends Oy{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new My(e,n,r)}_apply(e){const n=this._parse(e);return SS(e._query,n),new Us(e.firestore,e.converter,wm(e._query,n))}_parse(e){const n=Ry(e.firestore);return function(i,o,a,l,c,h,d){let f;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new H(j.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){tx(d,h);const v=[];for(const w of d)v.push(ex(l,i,w));f={arrayValue:{values:v}}}else f=ex(l,i,d)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||tx(d,h),f=MF(a,o,d,h==="in"||h==="not-in");return Je.create(c,h,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Ly extends Dy{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Ly(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Nn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)SS(o,l),o=wm(o,l)}(e._query,n),new Us(e.firestore,e.converter,wm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Vy extends Oy{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Vy(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new H(j.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new H(j.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Bl(i,o)}(e._query,this._field,this._direction);return new Us(e.firestore,e.converter,lL(e._query,n))}}function lr(t,e="asc"){const n=e,r=Cd("orderBy",t);return Vy._create(r,n)}class Fy extends Oy{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Fy(e,n,r)}_apply(e){return new Us(e.firestore,e.converter,Sh(e._query,this._limit,this._limitType))}}function Xo(t){return DM("limit",t),Fy._create("limit",t,"F")}function ex(t,e,n){if(typeof(n=at(n))=="string"){if(n==="")throw new H(j.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!T1(e)&&n.indexOf("/")!==-1)throw new H(j.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(xe.fromString(n));if(!K.isDocumentKey(r))throw new H(j.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return mw(t,new K(r))}if(n instanceof it)return mw(t,n._key);throw new H(j.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${gd(n)}.`)}function tx(t,e){if(!Array.isArray(t)||t.length===0)throw new H(j.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function SS(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new H(j.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new H(j.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function kS(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class Zc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class _o extends IS{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Vu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Cd("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new H(j.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=_o._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}_o._jsonSchemaVersion="firestore/documentSnapshot/1.0",_o._jsonSchema={type:Ze("string",_o._jsonSchemaVersion),bundleSource:Ze("string","DocumentSnapshot"),bundleName:Ze("string"),bundle:Ze("string")};class Vu extends _o{data(e={}){return super.data(e)}}class vo{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Zc(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Vu(this._firestore,this._userDataWriter,r.key,r,new Zc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new H(j.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new Vu(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Zc(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new Vu(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Zc(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:WF(a.type),doc:l,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new H(j.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=vo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ay.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function WF(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return X(61501,{type:t})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vo._jsonSchemaVersion="firestore/querySnapshot/1.0",vo._jsonSchema={type:Ze("string",vo._jsonSchemaVersion),bundleSource:Ze("string","QuerySnapshot"),bundleName:Ze("string"),bundle:Ze("string")};function cr(t){t=Co(t,Us);const e=Co(t.firestore,Ad),n=yS(e),r=new UF(e);return BF(t._query),IF(n,t._query).then(s=>new vo(e,r,t,s))}function nx(t,e,n){t=Co(t,it);const r=Co(t.firestore,Ad),s=kS(t.converter,e),i=Ry(r);return PS(r,[xS(i,"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,er.none())])}function sr(t,e){const n=Co(t.firestore,Ad),r=Cm(t),s=kS(t.converter,e),i=Ry(t.firestore);return PS(n,[xS(i,"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,er.exists(!1))]).then(()=>r)}function PS(t,e){const n=yS(t);return SF(n,e)}(function(e,n=!0){xM(Si),yi(new bs("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new Ad(new bM(r.getProvider("auth-internal")),new kM(o,r.getProvider("app-check-internal")),$M(o,s),o);return i={useFetchStreams:n,...i},a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),Kn(Jw,Zw,e),Kn(Jw,Zw,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AS="firebasestorage.googleapis.com",CS="storageBucket",HF=2*60*1e3,$F=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be extends or{constructor(e,n,r=0){super(qf(e),`Firebase Storage: ${n} (${qf(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Be.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return qf(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var je;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(je||(je={}));function qf(t){return"storage/"+t}function jy(){const t="An unknown error occurred, please check the error payload for server response.";return new Be(je.UNKNOWN,t)}function qF(t){return new Be(je.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function YF(t){return new Be(je.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function GF(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Be(je.UNAUTHENTICATED,t)}function KF(){return new Be(je.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function QF(t){return new Be(je.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function XF(){return new Be(je.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function JF(){return new Be(je.CANCELED,"User canceled the upload/download.")}function ZF(t){return new Be(je.INVALID_URL,"Invalid URL '"+t+"'.")}function e4(t){return new Be(je.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function t4(){return new Be(je.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+CS+"' property when initializing the app?")}function n4(){return new Be(je.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function r4(){return new Be(je.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function s4(t){return new Be(je.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Rm(t){return new Be(je.INVALID_ARGUMENT,t)}function RS(){return new Be(je.APP_DELETED,"The Firebase app was deleted.")}function i4(t){return new Be(je.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function al(t,e){return new Be(je.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Ia(t){throw new Be(je.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Zt.makeFromUrl(e,n)}catch{return new Zt(e,"")}if(r.path==="")return r;throw e4(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(R){R.path.charAt(R.path.length-1)==="/"&&(R.path_=R.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function c(R){R.path_=decodeURIComponent(R.path)}const h="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",m=new RegExp(`^https?://${d}/${h}/b/${s}/o${f}`,"i"),v={bucket:1,path:3},w=n===AS?"(?:storage.googleapis.com|storage.cloud.google.com)":n,T="([^?#]*)",_=new RegExp(`^https?://${w}/${s}/${T}`,"i"),b=[{regex:a,indices:l,postModify:i},{regex:m,indices:v,postModify:c},{regex:_,indices:{bucket:1,path:2},postModify:c}];for(let R=0;R<b.length;R++){const D=b[R],L=D.regex.exec(e);if(L){const I=L[D.indices.bucket];let y=L[D.indices.path];y||(y=""),r=new Zt(I,y),D.postModify(r);break}}if(r==null)throw ZF(e);return r}}class o4{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a4(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function l(){return a===2}let c=!1;function h(...T){c||(c=!0,e.apply(null,T))}function d(T){s=setTimeout(()=>{s=null,t(m,l())},T)}function f(){i&&clearTimeout(i)}function m(T,..._){if(c){f();return}if(T){f(),h.call(null,T,..._);return}if(l()||o){f(),h.call(null,T,..._);return}r<64&&(r*=2);let b;a===1?(a=2,b=0):b=(r+Math.random())*1e3,d(b)}let v=!1;function w(T){v||(v=!0,f(),!c&&(s!==null?(T||(a=2),clearTimeout(s),d(0)):T||(a=1)))}return d(0),i=setTimeout(()=>{o=!0,w(!0)},n),w}function l4(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c4(t){return t!==void 0}function u4(t){return typeof t=="object"&&!Array.isArray(t)}function Uy(t){return typeof t=="string"||t instanceof String}function rx(t){return zy()&&t instanceof Blob}function zy(){return typeof Blob<"u"}function sx(t,e,n,r){if(r<e)throw Rm(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Rm(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function By(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function NS(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var ci;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(ci||(ci={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h4(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d4{constructor(e,n,r,s,i,o,a,l,c,h,d,f=!0,m=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=h,this.connectionFactory_=d,this.retry=f,this.isUsingEmulator=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((v,w)=>{this.resolve_=v,this.reject_=w,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new eu(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===ci.NO_ERROR,l=i.getStatus();if(!a||h4(l,this.additionalRetryCodes_)&&this.retry){const h=i.getErrorCode()===ci.ABORT;r(!1,new eu(!1,null,h));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new eu(c,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());c4(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=jy();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){const l=this.appDelete_?RS():JF();o(l)}else{const l=XF();o(l)}};this.canceled_?n(!1,new eu(!1,null,!0)):this.backoffId_=a4(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&l4(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class eu{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function f4(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function p4(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function m4(t,e){e&&(t["X-Firebase-GMPID"]=e)}function g4(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function y4(t,e,n,r,s,i,o=!0,a=!1){const l=NS(t.urlParams),c=t.url+l,h=Object.assign({},t.headers);return m4(h,e),f4(h,n),p4(h,i),g4(h,r),new d4(c,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _4(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function v4(...t){const e=_4();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(zy())return new Blob(t);throw new Be(je.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function w4(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x4(t){if(typeof atob>"u")throw s4("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Yf{constructor(e,n){this.data=e,this.contentType=n||null}}function E4(t,e){switch(t){case qn.RAW:return new Yf(DS(e));case qn.BASE64:case qn.BASE64URL:return new Yf(OS(t,e));case qn.DATA_URL:return new Yf(b4(e),I4(e))}throw jy()}function DS(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function T4(t){let e;try{e=decodeURIComponent(t)}catch{throw al(qn.DATA_URL,"Malformed data URL.")}return DS(e)}function OS(t,e){switch(t){case qn.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw al(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case qn.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw al(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=x4(e)}catch(s){throw s.message.includes("polyfill")?s:al(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class MS{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw al(qn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=S4(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function b4(t){const e=new MS(t);return e.base64?OS(qn.BASE64,e.rest):T4(e.rest)}function I4(t){return new MS(t).contentType}function S4(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(e,n){let r=0,s="";rx(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(rx(this.data_)){const r=this.data_,s=w4(r,e,n);return s===null?null:new Jr(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Jr(r,!0)}}static getBlob(...e){if(zy()){const n=e.map(r=>r instanceof Jr?r.data_:r);return new Jr(v4.apply(null,n))}else{const n=e.map(o=>Uy(o)?E4(qn.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)s[i++]=o[a]}),new Jr(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LS(t){let e;try{e=JSON.parse(t)}catch{return null}return u4(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k4(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function P4(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function VS(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A4(t,e){return e}class Nt{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||A4}}let tu=null;function C4(t){return!Uy(t)||t.length<2?t:VS(t)}function FS(){if(tu)return tu;const t=[];t.push(new Nt("bucket")),t.push(new Nt("generation")),t.push(new Nt("metageneration")),t.push(new Nt("name","fullPath",!0));function e(i,o){return C4(o)}const n=new Nt("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new Nt("size");return s.xform=r,t.push(s),t.push(new Nt("timeCreated")),t.push(new Nt("updated")),t.push(new Nt("md5Hash",null,!0)),t.push(new Nt("cacheControl",null,!0)),t.push(new Nt("contentDisposition",null,!0)),t.push(new Nt("contentEncoding",null,!0)),t.push(new Nt("contentLanguage",null,!0)),t.push(new Nt("contentType",null,!0)),t.push(new Nt("metadata","customMetadata",!0)),tu=t,tu}function R4(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new Zt(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function N4(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return R4(r,t),r}function jS(t,e,n){const r=LS(e);return r===null?null:N4(t,r,n)}function D4(t,e,n,r){const s=LS(e);if(s===null||!Uy(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(c=>{const h=t.bucket,d=t.fullPath,f="/b/"+o(h)+"/o/"+o(d),m=By(f,n,r),v=NS({alt:"media",token:c});return m+v})[0]}function O4(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class US{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zS(t){if(!t)throw jy()}function M4(t,e){function n(r,s){const i=jS(t,s,e);return zS(i!==null),i}return n}function L4(t,e){function n(r,s){const i=jS(t,s,e);return zS(i!==null),D4(i,s,t.host,t._protocol)}return n}function BS(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=KF():s=GF():n.getStatus()===402?s=YF(t.bucket):n.getStatus()===403?s=QF(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function V4(t){const e=BS(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=qF(t.path)),i.serverResponse=s.serverResponse,i}return n}function F4(t,e,n){const r=e.fullServerUrl(),s=By(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new US(s,i,L4(t,n),o);return a.errorHandler=V4(e),a}function j4(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function U4(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=j4(null,e)),r}function z4(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let b="";for(let R=0;R<2;R++)b=b+Math.random().toString().slice(2);return b}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=U4(e,r,s),h=O4(c,n),d="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,f=`\r
--`+l+"--",m=Jr.getBlob(d,r,f);if(m===null)throw n4();const v={name:c.fullPath},w=By(i,t.host,t._protocol),T="POST",_=t.maxUploadRetryTime,x=new US(w,T,M4(t,n),_);return x.urlParams=v,x.headers=o,x.body=m.uploadData(),x.errorHandler=BS(e),x}class B4{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ci.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ci.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ci.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s,i){if(this.sent_)throw Ia("cannot .send() more than once");if(Ls(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ia("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ia("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ia("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ia("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class W4 extends B4{initXhr(){this.xhr_.responseType="text"}}function WS(){return new W4}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(e,n){this._service=e,n instanceof Zt?this._location=n:this._location=Zt.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Ei(e,n)}get root(){const e=new Zt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return VS(this._location.path)}get storage(){return this._service}get parent(){const e=k4(this._location.path);if(e===null)return null;const n=new Zt(this._location.bucket,e);return new Ei(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw i4(e)}}function H4(t,e,n){t._throwIfRoot("uploadBytes");const r=z4(t.storage,t._location,FS(),new Jr(e,!0),n);return t.storage.makeRequestWithTokens(r,WS).then(s=>({metadata:s,ref:t}))}function $4(t){t._throwIfRoot("getDownloadURL");const e=F4(t.storage,t._location,FS());return t.storage.makeRequestWithTokens(e,WS).then(n=>{if(n===null)throw r4();return n})}function q4(t,e){const n=P4(t._location.path,e),r=new Zt(t._location.bucket,n);return new Ei(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y4(t){return/^[A-Za-z]+:\/\//.test(t)}function G4(t,e){return new Ei(t,e)}function HS(t,e){if(t instanceof Wy){const n=t;if(n._bucket==null)throw t4();const r=new Ei(n,n._bucket);return e!=null?HS(r,e):r}else return e!==void 0?q4(t,e):t}function K4(t,e){if(e&&Y4(e)){if(t instanceof Wy)return G4(t,e);throw Rm("To use ref(service, url), the first argument must be a Storage instance.")}else return HS(t,e)}function ix(t,e){const n=e==null?void 0:e[CS];return n==null?null:Zt.makeFromBucketSpec(n,t)}function Q4(t,e,n,r={}){t.host=`${e}:${n}`;const s=Ls(e);s&&(Yg(`https://${t.host}/b`),Gg("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:cI(i,t.app.options.projectId))}class Wy{constructor(e,n,r,s,i,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=AS,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=HF,this._maxUploadRetryTime=$F,this._requests=new Set,s!=null?this._bucket=Zt.makeFromBucketSpec(s,this._host):this._bucket=ix(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Zt.makeFromBucketSpec(this._url,e):this._bucket=ix(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){sx("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){sx("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Ut(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ei(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new o4(RS());{const o=y4(e,this._appId,r,s,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const ox="@firebase/storage",ax="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $S="storage";function X4(t,e,n){return t=at(t),H4(t,e,n)}function J4(t){return t=at(t),$4(t)}function Z4(t,e){return t=at(t),K4(t,e)}function ej(t=Xg(),e){t=at(t);const r=dd(t,$S).getImmediate({identifier:e}),s=oI("storage");return s&&tj(r,...s),r}function tj(t,e,n,r={}){Q4(t,e,n,r)}function nj(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new Wy(n,r,s,e,Si)}function rj(){yi(new bs($S,nj,"PUBLIC").setMultipleInstances(!0)),Kn(ox,ax,""),Kn(ox,ax,"esm2020")}rj();const sj={apiKey:"AIzaSyDskYJol705ucTtdbE3zZIBpgJRVsqt_aY",authDomain:"water-velocity-project.firebaseapp.com",projectId:"water-velocity-project",storageBucket:"water-velocity-project.firebasestorage.app",messagingSenderId:"478499917558",appId:"1:478499917558:web:5d941d13e4ca875f2126d7",measurementId:"G-LLSY5LFLE0"},Hy=O0().length?O0()[0]:dI(sj),$i=yM(Hy),Fe=CF(Hy),ij=ej(Hy),qS=M.createContext(void 0),oj=({children:t})=>{const[e,n]=M.useState(null),[r,s]=M.useState(!0);M.useEffect(()=>{const c=iO($i,async h=>{if(!h){try{await X2($i)}catch(f){console.error("Anonymous sign-in failed",f),n(null),s(!1)}return}const d={uid:h.uid,email:h.email||"guest",role:"user",token:await h.getIdToken()};n(d),s(!1)});return()=>c()},[]);const i=async(c,h)=>{const d=await nO($i,c,h),f={uid:d.user.uid,email:d.user.email||c,role:"user",token:await d.user.getIdToken()};n(f)},o=async(c,h,d)=>{const f=await tO($i,c,h),m={uid:f.user.uid,email:f.user.email||c,role:d,token:await f.user.getIdToken()};n(m)},a=()=>{oO($i).catch(()=>{}),n(null)},l=M.useMemo(()=>({user:e,loading:r,login:i,register:o,logout:a}),[e,r]);return E.jsx(qS.Provider,{value:l,children:t})},$y=()=>{const t=M.useContext(qS);if(!t)throw new Error("useAuth must be used within AuthProvider");return t},aj=[{to:"/",label:"Overview"},{to:"/live",label:"Live Feed"},{to:"/velocity",label:"Velocity Analytics"},{to:"/alerts",label:"Alerts"},{to:"/notifications",label:"Notifications"},{to:"/sites",label:"Sites & Health"},{to:"/datasets",label:"Datasets"},{to:"/model",label:"Model"}],lj=()=>{const{logout:t,user:e}=$y();return E.jsxs("aside",{className:"w-64 h-screen sticky top-0 flex flex-col border-r-4 border-slate-900 bg-white shadow-[6px_6px_0_#0f172a]",children:[E.jsxs("div",{className:"p-6 border-b-4 border-slate-900",children:[E.jsx("h1",{className:"text-xl font-bold text-slate-900 uppercase tracking-tight",children:"Water Velocity"}),E.jsx("p",{className:"text-xs text-slate-600",children:"Vision Flood Monitor"})]}),E.jsx("nav",{className:"flex-1 p-4 space-y-2",children:aj.map(n=>E.jsx(vN,{to:n.to,className:({isActive:r})=>`block px-3 py-2 rounded-md text-sm font-semibold border-2 border-slate-900 transition-all ${r?"bg-sky-200 text-slate-900 shadow-[4px_4px_0_#0f172a] translate-x-1":"bg-white text-slate-800 hover:-translate-y-0.5 hover:shadow-[4px_4px_0_#0f172a]"}`,children:n.label},n.to))}),E.jsxs("div",{className:"p-4 border-t-4 border-slate-900 text-sm text-slate-700 bg-slate-50",children:[E.jsx("p",{className:"mb-2 font-semibold",children:(e==null?void 0:e.email)||"guest@anon"}),E.jsx("button",{onClick:t,className:"w-full rounded-md border-2 border-slate-900 px-3 py-2 text-sm font-semibold hover:shadow-[3px_3px_0_#0f172a]",children:"Sign out"})]})]})},cj=()=>{const{user:t,loading:e}=$y();return e?E.jsx("div",{className:"h-screen flex items-center justify-center text-slate-600",children:"Loading..."}):t?E.jsxs("div",{className:"flex min-h-screen bg-transparent",children:[E.jsx(lj,{}),E.jsx("main",{className:"flex-1 p-8 overflow-y-auto",children:E.jsx(iN,{})})]}):E.jsx(sN,{to:"/auth",replace:!0})},uj={default:"bg-slate-100 text-slate-800",success:"bg-emerald-100 text-emerald-800",danger:"bg-rose-100 text-rose-800",warning:"bg-amber-100 text-amber-800"},Fi=({title:t,value:e,hint:n,tone:r="default"})=>E.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-4 shadow-sm",children:[E.jsx("div",{className:"text-sm text-slate-500 mb-1",children:t}),E.jsx("div",{className:"text-2xl font-semibold text-slate-900",children:e}),n&&E.jsx("div",{className:`mt-2 inline-flex px-2 py-1 rounded-md text-xs ${uj[r]}`,children:n})]});/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function pc(t){return t+.5|0}const rs=(t,e,n)=>Math.max(Math.min(t,n),e);function Wa(t){return rs(pc(t*2.55),0,255)}function xs(t){return rs(pc(t*255),0,255)}function mr(t){return rs(pc(t/2.55)/100,0,1)}function lx(t){return rs(pc(t*100),0,100)}const sn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Nm=[..."0123456789ABCDEF"],hj=t=>Nm[t&15],dj=t=>Nm[(t&240)>>4]+Nm[t&15],nu=t=>(t&240)>>4===(t&15),fj=t=>nu(t.r)&&nu(t.g)&&nu(t.b)&&nu(t.a);function pj(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&sn[t[1]]*17,g:255&sn[t[2]]*17,b:255&sn[t[3]]*17,a:e===5?sn[t[4]]*17:255}:(e===7||e===9)&&(n={r:sn[t[1]]<<4|sn[t[2]],g:sn[t[3]]<<4|sn[t[4]],b:sn[t[5]]<<4|sn[t[6]],a:e===9?sn[t[7]]<<4|sn[t[8]]:255})),n}const mj=(t,e)=>t<255?e(t):"";function gj(t){var e=fj(t)?hj:dj;return t?"#"+e(t.r)+e(t.g)+e(t.b)+mj(t.a,e):void 0}const yj=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function YS(t,e,n){const r=e*Math.min(n,1-n),s=(i,o=(i+t/30)%12)=>n-r*Math.max(Math.min(o-3,9-o,1),-1);return[s(0),s(8),s(4)]}function _j(t,e,n){const r=(s,i=(s+t/60)%6)=>n-n*e*Math.max(Math.min(i,4-i,1),0);return[r(5),r(3),r(1)]}function vj(t,e,n){const r=YS(t,1,.5);let s;for(e+n>1&&(s=1/(e+n),e*=s,n*=s),s=0;s<3;s++)r[s]*=1-e-n,r[s]+=e;return r}function wj(t,e,n,r,s){return t===s?(e-n)/r+(e<n?6:0):e===s?(n-t)/r+2:(t-e)/r+4}function qy(t){const n=t.r/255,r=t.g/255,s=t.b/255,i=Math.max(n,r,s),o=Math.min(n,r,s),a=(i+o)/2;let l,c,h;return i!==o&&(h=i-o,c=a>.5?h/(2-i-o):h/(i+o),l=wj(n,r,s,h,i),l=l*60+.5),[l|0,c||0,a]}function Yy(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(xs)}function Gy(t,e,n){return Yy(YS,t,e,n)}function xj(t,e,n){return Yy(vj,t,e,n)}function Ej(t,e,n){return Yy(_j,t,e,n)}function GS(t){return(t%360+360)%360}function Tj(t){const e=yj.exec(t);let n=255,r;if(!e)return;e[5]!==r&&(n=e[6]?Wa(+e[5]):xs(+e[5]));const s=GS(+e[2]),i=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=xj(s,i,o):e[1]==="hsv"?r=Ej(s,i,o):r=Gy(s,i,o),{r:r[0],g:r[1],b:r[2],a:n}}function bj(t,e){var n=qy(t);n[0]=GS(n[0]+e),n=Gy(n),t.r=n[0],t.g=n[1],t.b=n[2]}function Ij(t){if(!t)return;const e=qy(t),n=e[0],r=lx(e[1]),s=lx(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${s}%, ${mr(t.a)})`:`hsl(${n}, ${r}%, ${s}%)`}const cx={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},ux={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Sj(){const t={},e=Object.keys(ux),n=Object.keys(cx);let r,s,i,o,a;for(r=0;r<e.length;r++){for(o=a=e[r],s=0;s<n.length;s++)i=n[s],a=a.replace(i,cx[i]);i=parseInt(ux[o],16),t[a]=[i>>16&255,i>>8&255,i&255]}return t}let ru;function kj(t){ru||(ru=Sj(),ru.transparent=[0,0,0,0]);const e=ru[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const Pj=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Aj(t){const e=Pj.exec(t);let n=255,r,s,i;if(e){if(e[7]!==r){const o=+e[7];n=e[8]?Wa(o):rs(o*255,0,255)}return r=+e[1],s=+e[3],i=+e[5],r=255&(e[2]?Wa(r):rs(r,0,255)),s=255&(e[4]?Wa(s):rs(s,0,255)),i=255&(e[6]?Wa(i):rs(i,0,255)),{r,g:s,b:i,a:n}}}function Cj(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${mr(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const Gf=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,ji=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function Rj(t,e,n){const r=ji(mr(t.r)),s=ji(mr(t.g)),i=ji(mr(t.b));return{r:xs(Gf(r+n*(ji(mr(e.r))-r))),g:xs(Gf(s+n*(ji(mr(e.g))-s))),b:xs(Gf(i+n*(ji(mr(e.b))-i))),a:t.a+n*(e.a-t.a)}}function su(t,e,n){if(t){let r=qy(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,e===0?360:1)),r=Gy(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function KS(t,e){return t&&Object.assign(e||{},t)}function hx(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=xs(t[3]))):(e=KS(t,{r:0,g:0,b:0,a:1}),e.a=xs(e.a)),e}function Nj(t){return t.charAt(0)==="r"?Aj(t):Tj(t)}class $l{constructor(e){if(e instanceof $l)return e;const n=typeof e;let r;n==="object"?r=hx(e):n==="string"&&(r=pj(e)||kj(e)||Nj(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=KS(this._rgb);return e&&(e.a=mr(e.a)),e}set rgb(e){this._rgb=hx(e)}rgbString(){return this._valid?Cj(this._rgb):void 0}hexString(){return this._valid?gj(this._rgb):void 0}hslString(){return this._valid?Ij(this._rgb):void 0}mix(e,n){if(e){const r=this.rgb,s=e.rgb;let i;const o=n===i?.5:n,a=2*o-1,l=r.a-s.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;i=1-c,r.r=255&c*r.r+i*s.r+.5,r.g=255&c*r.g+i*s.g+.5,r.b=255&c*r.b+i*s.b+.5,r.a=o*r.a+(1-o)*s.a,this.rgb=r}return this}interpolate(e,n){return e&&(this._rgb=Rj(this._rgb,e._rgb,n)),this}clone(){return new $l(this.rgb)}alpha(e){return this._rgb.a=xs(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=pc(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return su(this._rgb,2,e),this}darken(e){return su(this._rgb,2,-e),this}saturate(e){return su(this._rgb,1,e),this}desaturate(e){return su(this._rgb,1,-e),this}rotate(e){return bj(this._rgb,e),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function ur(){}const Dj=(()=>{let t=0;return()=>t++})();function Te(t){return t==null}function ht(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function de(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function At(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Vn(t,e){return At(t)?t:e}function ce(t,e){return typeof t>"u"?e:t}const Oj=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Se(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function ye(t,e,n,r){let s,i,o;if(ht(t))for(i=t.length,s=0;s<i;s++)e.call(n,t[s],s);else if(de(t))for(o=Object.keys(t),i=o.length,s=0;s<i;s++)e.call(n,t[o[s]],o[s])}function Oh(t,e){let n,r,s,i;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(s=t[n],i=e[n],s.datasetIndex!==i.datasetIndex||s.index!==i.index)return!1;return!0}function Mh(t){if(ht(t))return t.map(Mh);if(de(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let s=0;for(;s<r;++s)e[n[s]]=Mh(t[n[s]]);return e}return t}function QS(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function Mj(t,e,n,r){if(!QS(t))return;const s=e[t],i=n[t];de(s)&&de(i)?ql(s,i,r):e[t]=Mh(i)}function ql(t,e,n){const r=ht(e)?e:[e],s=r.length;if(!de(t))return t;n=n||{};const i=n.merger||Mj;let o;for(let a=0;a<s;++a){if(o=r[a],!de(o))continue;const l=Object.keys(o);for(let c=0,h=l.length;c<h;++c)i(l[c],t,o,n)}return t}function ll(t,e){return ql(t,e,{merger:Lj})}function Lj(t,e,n){if(!QS(t))return;const r=e[t],s=n[t];de(r)&&de(s)?ll(r,s):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Mh(s))}const dx={"":t=>t,x:t=>t.x,y:t=>t.y};function Vj(t){const e=t.split("."),n=[];let r="";for(const s of e)r+=s,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function Fj(t){const e=Vj(t);return n=>{for(const r of e){if(r==="")break;n=n&&n[r]}return n}}function Lh(t,e){return(dx[e]||(dx[e]=Fj(e)))(t)}function Ky(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Vh=t=>typeof t<"u",Rs=t=>typeof t=="function",fx=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function jj(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const St=Math.PI,An=2*St,Uj=An+St,Fh=Number.POSITIVE_INFINITY,zj=St/180,In=St/2,qs=St/4,px=St*2/3,XS=Math.log10,Mo=Math.sign;function cl(t,e,n){return Math.abs(t-e)<n}function mx(t){const e=Math.round(t);t=cl(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(XS(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function Bj(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(n|0)&&e.push(n),e.sort((s,i)=>s-i).pop(),e}function Wj(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function Yl(t){return!Wj(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function Hj(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function $j(t,e,n){let r,s,i;for(r=0,s=t.length;r<s;r++)i=t[r][n],isNaN(i)||(e.min=Math.min(e.min,i),e.max=Math.max(e.max,i))}function ii(t){return t*(St/180)}function qj(t){return t*(180/St)}function gx(t){if(!At(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function Yj(t,e){const n=e.x-t.x,r=e.y-t.y,s=Math.sqrt(n*n+r*r);let i=Math.atan2(r,n);return i<-.5*St&&(i+=An),{angle:i,distance:s}}function Dm(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Gj(t,e){return(t-e+Uj)%An-St}function Bn(t){return(t%An+An)%An}function JS(t,e,n,r){const s=Bn(t),i=Bn(e),o=Bn(n),a=Bn(i-s),l=Bn(o-s),c=Bn(s-i),h=Bn(s-o);return s===i||s===o||r&&i===o||a>l&&c<h}function hn(t,e,n){return Math.max(e,Math.min(n,t))}function Kj(t){return hn(t,-32768,32767)}function io(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function Qy(t,e,n){n=n||(o=>t[o]<e);let r=t.length-1,s=0,i;for(;r-s>1;)i=s+r>>1,n(i)?s=i:r=i;return{lo:s,hi:r}}const oi=(t,e,n,r)=>Qy(t,n,r?s=>{const i=t[s][e];return i<n||i===n&&t[s+1][e]===n}:s=>t[s][e]<n),Qj=(t,e,n)=>Qy(t,n,r=>t[r][e]>=n);function Xj(t,e,n){let r=0,s=t.length;for(;r<s&&t[r]<e;)r++;for(;s>r&&t[s-1]>n;)s--;return r>0||s<t.length?t.slice(r,s):t}const ZS=["push","pop","shift","splice","unshift"];function Jj(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),ZS.forEach(n=>{const r="_onData"+Ky(n),s=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...i){const o=s.apply(this,i);return t._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...i)}),o}})})}function yx(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,s=r.indexOf(e);s!==-1&&r.splice(s,1),!(r.length>0)&&(ZS.forEach(i=>{delete t[i]}),delete t._chartjs)}function Zj(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const ek=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function tk(t,e){let n=[],r=!1;return function(...s){n=s,r||(r=!0,ek.call(window,()=>{r=!1,t.apply(e,n)}))}}function e3(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}const nk=t=>t==="start"?"left":t==="end"?"right":"center",Qt=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,t3=(t,e,n,r)=>t===(r?"left":"right")?n:t==="center"?(e+n)/2:e;function n3(t,e,n){const r=e.length;let s=0,i=r;if(t._sorted){const{iScale:o,vScale:a,_parsed:l}=t,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,h=o.axis,{min:d,max:f,minDefined:m,maxDefined:v}=o.getUserBounds();if(m){if(s=Math.min(oi(l,h,d).lo,n?r:oi(e,h,o.getPixelForValue(d)).lo),c){const w=l.slice(0,s+1).reverse().findIndex(T=>!Te(T[a.axis]));s-=Math.max(0,w)}s=hn(s,0,r-1)}if(v){let w=Math.max(oi(l,o.axis,f,!0).hi+1,n?0:oi(e,h,o.getPixelForValue(f),!0).hi+1);if(c){const T=l.slice(w-1).findIndex(_=>!Te(_[a.axis]));w+=Math.max(0,T)}i=hn(w,s,r)-s}else i=r-s}return{start:s,count:i}}function r3(t){const{xScale:e,yScale:n,_scaleRanges:r}=t,s={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!r)return t._scaleRanges=s,!0;const i=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,s),i}const iu=t=>t===0||t===1,_x=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*An/n)),vx=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*An/n)+1,ul={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*In)+1,easeOutSine:t=>Math.sin(t*In),easeInOutSine:t=>-.5*(Math.cos(St*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>iu(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>iu(t)?t:_x(t,.075,.3),easeOutElastic:t=>iu(t)?t:vx(t,.075,.3),easeInOutElastic(t){return iu(t)?t:t<.5?.5*_x(t*2,.1125,.45):.5+.5*vx(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-ul.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?ul.easeInBounce(t*2)*.5:ul.easeOutBounce(t*2-1)*.5+.5};function Xy(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function wx(t){return Xy(t)?t:new $l(t)}function Kf(t){return Xy(t)?t:new $l(t).saturate(.5).darken(.1).hexString()}const s3=["x","y","borderWidth","radius","tension"],i3=["color","borderColor","backgroundColor"];function o3(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:i3},numbers:{type:"number",properties:s3}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function a3(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const xx=new Map;function l3(t,e){e=e||{};const n=t+JSON.stringify(e);let r=xx.get(n);return r||(r=new Intl.NumberFormat(t,e),xx.set(n,r)),r}function rk(t,e,n){return l3(e,n).format(t)}const c3={values(t){return ht(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const r=this.chart.options.locale;let s,i=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(s="scientific"),i=u3(t,n)}const o=XS(Math.abs(i)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:s,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),rk(t,r,l)}};function u3(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var sk={formatters:c3};function h3(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:sk.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Ti=Object.create(null),Om=Object.create(null);function hl(t,e){if(!e)return t;const n=e.split(".");for(let r=0,s=n.length;r<s;++r){const i=n[r];t=t[i]||(t[i]=Object.create(null))}return t}function Qf(t,e,n){return typeof e=="string"?ql(hl(t,e),n):ql(hl(t,""),e)}class d3{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,s)=>Kf(s.backgroundColor),this.hoverBorderColor=(r,s)=>Kf(s.borderColor),this.hoverColor=(r,s)=>Kf(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return Qf(this,e,n)}get(e){return hl(this,e)}describe(e,n){return Qf(Om,e,n)}override(e,n){return Qf(Ti,e,n)}route(e,n,r,s){const i=hl(this,e),o=hl(this,r),a="_"+n;Object.defineProperties(i,{[a]:{value:i[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[s];return de(l)?Object.assign({},c,l):ce(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var qe=new d3({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[o3,a3,h3]);function f3(t){return!t||Te(t.size)||Te(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function Ex(t,e,n,r,s){let i=e[s];return i||(i=e[s]=t.measureText(s).width,n.push(s)),i>r&&(r=i),r}function Ys(t,e,n){const r=t.currentDevicePixelRatio,s=n!==0?Math.max(n/2,.5):0;return Math.round((e-s)*r)/r+s}function Tx(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function Mm(t,e,n,r){ik(t,e,n,r,null)}function ik(t,e,n,r,s){let i,o,a,l,c,h,d,f;const m=e.pointStyle,v=e.rotation,w=e.radius;let T=(v||0)*zj;if(m&&typeof m=="object"&&(i=m.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){t.save(),t.translate(n,r),t.rotate(T),t.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),t.restore();return}if(!(isNaN(w)||w<=0)){switch(t.beginPath(),m){default:s?t.ellipse(n,r,s/2,w,0,0,An):t.arc(n,r,w,0,An),t.closePath();break;case"triangle":h=s?s/2:w,t.moveTo(n+Math.sin(T)*h,r-Math.cos(T)*w),T+=px,t.lineTo(n+Math.sin(T)*h,r-Math.cos(T)*w),T+=px,t.lineTo(n+Math.sin(T)*h,r-Math.cos(T)*w),t.closePath();break;case"rectRounded":c=w*.516,l=w-c,o=Math.cos(T+qs)*l,d=Math.cos(T+qs)*(s?s/2-c:l),a=Math.sin(T+qs)*l,f=Math.sin(T+qs)*(s?s/2-c:l),t.arc(n-d,r-a,c,T-St,T-In),t.arc(n+f,r-o,c,T-In,T),t.arc(n+d,r+a,c,T,T+In),t.arc(n-f,r+o,c,T+In,T+St),t.closePath();break;case"rect":if(!v){l=Math.SQRT1_2*w,h=s?s/2:l,t.rect(n-h,r-l,2*h,2*l);break}T+=qs;case"rectRot":d=Math.cos(T)*(s?s/2:w),o=Math.cos(T)*w,a=Math.sin(T)*w,f=Math.sin(T)*(s?s/2:w),t.moveTo(n-d,r-a),t.lineTo(n+f,r-o),t.lineTo(n+d,r+a),t.lineTo(n-f,r+o),t.closePath();break;case"crossRot":T+=qs;case"cross":d=Math.cos(T)*(s?s/2:w),o=Math.cos(T)*w,a=Math.sin(T)*w,f=Math.sin(T)*(s?s/2:w),t.moveTo(n-d,r-a),t.lineTo(n+d,r+a),t.moveTo(n+f,r-o),t.lineTo(n-f,r+o);break;case"star":d=Math.cos(T)*(s?s/2:w),o=Math.cos(T)*w,a=Math.sin(T)*w,f=Math.sin(T)*(s?s/2:w),t.moveTo(n-d,r-a),t.lineTo(n+d,r+a),t.moveTo(n+f,r-o),t.lineTo(n-f,r+o),T+=qs,d=Math.cos(T)*(s?s/2:w),o=Math.cos(T)*w,a=Math.sin(T)*w,f=Math.sin(T)*(s?s/2:w),t.moveTo(n-d,r-a),t.lineTo(n+d,r+a),t.moveTo(n+f,r-o),t.lineTo(n-f,r+o);break;case"line":o=s?s/2:Math.cos(T)*w,a=Math.sin(T)*w,t.moveTo(n-o,r-a),t.lineTo(n+o,r+a);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(T)*(s?s/2:w),r+Math.sin(T)*w);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Gl(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function Rd(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Nd(t){t.restore()}function p3(t,e,n,r,s){if(!e)return t.lineTo(n.x,n.y);if(s==="middle"){const i=(e.x+n.x)/2;t.lineTo(i,e.y),t.lineTo(i,n.y)}else s==="after"!=!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function m3(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function g3(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),Te(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function y3(t,e,n,r,s){if(s.strikethrough||s.underline){const i=t.measureText(r),o=e-i.actualBoundingBoxLeft,a=e+i.actualBoundingBoxRight,l=n-i.actualBoundingBoxAscent,c=n+i.actualBoundingBoxDescent,h=s.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=s.decorationWidth||2,t.moveTo(o,h),t.lineTo(a,h),t.stroke()}}function _3(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function jh(t,e,n,r,s,i={}){const o=ht(e)?e:[e],a=i.strokeWidth>0&&i.strokeColor!=="";let l,c;for(t.save(),t.font=s.string,g3(t,i),l=0;l<o.length;++l)c=o[l],i.backdrop&&_3(t,i.backdrop),a&&(i.strokeColor&&(t.strokeStyle=i.strokeColor),Te(i.strokeWidth)||(t.lineWidth=i.strokeWidth),t.strokeText(c,n,r,i.maxWidth)),t.fillText(c,n,r,i.maxWidth),y3(t,n,r,c,i),r+=Number(s.lineHeight);t.restore()}function Lm(t,e){const{x:n,y:r,w:s,h:i,radius:o}=e;t.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*St,St,!0),t.lineTo(n,r+i-o.bottomLeft),t.arc(n+o.bottomLeft,r+i-o.bottomLeft,o.bottomLeft,St,In,!0),t.lineTo(n+s-o.bottomRight,r+i),t.arc(n+s-o.bottomRight,r+i-o.bottomRight,o.bottomRight,In,0,!0),t.lineTo(n+s,r+o.topRight),t.arc(n+s-o.topRight,r+o.topRight,o.topRight,0,-In,!0),t.lineTo(n+o.topLeft,r)}const v3=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,w3=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function x3(t,e){const n=(""+t).match(v3);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const E3=t=>+t||0;function ok(t,e){const n={},r=de(e),s=r?Object.keys(e):e,i=de(t)?r?o=>ce(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of s)n[o]=E3(i(o));return n}function T3(t){return ok(t,{top:"y",right:"x",bottom:"y",left:"x"})}function dl(t){return ok(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Dn(t){const e=T3(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Wt(t,e){t=t||{},e=e||qe.font;let n=ce(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let r=ce(t.style,e.style);r&&!(""+r).match(w3)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const s={family:ce(t.family,e.family),lineHeight:x3(ce(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:ce(t.weight,e.weight),string:""};return s.string=f3(s),s}function ou(t,e,n,r){let s,i,o;for(s=0,i=t.length;s<i;++s)if(o=t[s],o!==void 0&&o!==void 0)return o}function b3(t,e,n){const{min:r,max:s}=t,i=Oj(e,(s-r)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(r,-Math.abs(i)),max:o(s,i)}}function Ri(t,e){return Object.assign(Object.create(t),e)}function Jy(t,e=[""],n,r,s=()=>t[0]){const i=n||t;typeof r>"u"&&(r=uk("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:i,_fallback:r,_getTarget:s,override:a=>Jy([a,...t],e,i,r)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return lk(a,l,()=>N3(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return Ix(a).includes(l)},ownKeys(a){return Ix(a)},set(a,l,c){const h=a._storage||(a._storage=s());return a[l]=h[l]=c,delete a._keys,!0}})}function Lo(t,e,n,r){const s={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:ak(t,r),setContext:i=>Lo(t,i,n,r),override:i=>Lo(t.override(i),e,n,r)};return new Proxy(s,{deleteProperty(i,o){return delete i[o],delete t[o],!0},get(i,o,a){return lk(i,o,()=>S3(i,o,a))},getOwnPropertyDescriptor(i,o){return i._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(i,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(i,o,a){return t[o]=a,delete i[o],!0}})}function ak(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:s=e.allKeys}=t;return{allKeys:s,scriptable:n,indexable:r,isScriptable:Rs(n)?n:()=>n,isIndexable:Rs(r)?r:()=>r}}const I3=(t,e)=>t?t+Ky(e):e,Zy=(t,e)=>de(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function lk(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const r=n();return t[e]=r,r}function S3(t,e,n){const{_proxy:r,_context:s,_subProxy:i,_descriptors:o}=t;let a=r[e];return Rs(a)&&o.isScriptable(e)&&(a=k3(e,a,t,n)),ht(a)&&a.length&&(a=P3(e,a,t,o.isIndexable)),Zy(e,a)&&(a=Lo(a,s,i&&i[e],o)),a}function k3(t,e,n,r){const{_proxy:s,_context:i,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(i,o||r);return a.delete(t),Zy(t,l)&&(l=e_(s._scopes,s,t,l)),l}function P3(t,e,n,r){const{_proxy:s,_context:i,_subProxy:o,_descriptors:a}=n;if(typeof i.index<"u"&&r(t))return e[i.index%e.length];if(de(e[0])){const l=e,c=s._scopes.filter(h=>h!==l);e=[];for(const h of l){const d=e_(c,s,t,h);e.push(Lo(d,i,o&&o[t],a))}}return e}function ck(t,e,n){return Rs(t)?t(e,n):t}const A3=(t,e)=>t===!0?e:typeof t=="string"?Lh(e,t):void 0;function C3(t,e,n,r,s){for(const i of e){const o=A3(n,i);if(o){t.add(o);const a=ck(o._fallback,n,s);if(typeof a<"u"&&a!==n&&a!==r)return a}else if(o===!1&&typeof r<"u"&&n!==r)return null}return!1}function e_(t,e,n,r){const s=e._rootScopes,i=ck(e._fallback,n,r),o=[...t,...s],a=new Set;a.add(r);let l=bx(a,o,n,i||n,r);return l===null||typeof i<"u"&&i!==n&&(l=bx(a,o,i,l,r),l===null)?!1:Jy(Array.from(a),[""],s,i,()=>R3(e,n,r))}function bx(t,e,n,r,s){for(;n;)n=C3(t,e,n,r,s);return n}function R3(t,e,n){const r=t._getTarget();e in r||(r[e]={});const s=r[e];return ht(s)&&de(n)?n:s||{}}function N3(t,e,n,r){let s;for(const i of e)if(s=uk(I3(i,t),n),typeof s<"u")return Zy(t,s)?e_(n,r,t,s):s}function uk(t,e){for(const n of e){if(!n)continue;const r=n[t];if(typeof r<"u")return r}}function Ix(t){let e=t._keys;return e||(e=t._keys=D3(t._scopes)),e}function D3(t){const e=new Set;for(const n of t)for(const r of Object.keys(n).filter(s=>!s.startsWith("_")))e.add(r);return Array.from(e)}const O3=Number.EPSILON||1e-14,Vo=(t,e)=>e<t.length&&!t[e].skip&&t[e],hk=t=>t==="x"?"y":"x";function M3(t,e,n,r){const s=t.skip?e:t,i=e,o=n.skip?e:n,a=Dm(i,s),l=Dm(o,i);let c=a/(a+l),h=l/(a+l);c=isNaN(c)?0:c,h=isNaN(h)?0:h;const d=r*c,f=r*h;return{previous:{x:i.x-d*(o.x-s.x),y:i.y-d*(o.y-s.y)},next:{x:i.x+f*(o.x-s.x),y:i.y+f*(o.y-s.y)}}}function L3(t,e,n){const r=t.length;let s,i,o,a,l,c=Vo(t,0);for(let h=0;h<r-1;++h)if(l=c,c=Vo(t,h+1),!(!l||!c)){if(cl(e[h],0,O3)){n[h]=n[h+1]=0;continue}s=n[h]/e[h],i=n[h+1]/e[h],a=Math.pow(s,2)+Math.pow(i,2),!(a<=9)&&(o=3/Math.sqrt(a),n[h]=s*o*e[h],n[h+1]=i*o*e[h])}}function V3(t,e,n="x"){const r=hk(n),s=t.length;let i,o,a,l=Vo(t,0);for(let c=0;c<s;++c){if(o=a,a=l,l=Vo(t,c+1),!a)continue;const h=a[n],d=a[r];o&&(i=(h-o[n])/3,a[`cp1${n}`]=h-i,a[`cp1${r}`]=d-i*e[c]),l&&(i=(l[n]-h)/3,a[`cp2${n}`]=h+i,a[`cp2${r}`]=d+i*e[c])}}function F3(t,e="x"){const n=hk(e),r=t.length,s=Array(r).fill(0),i=Array(r);let o,a,l,c=Vo(t,0);for(o=0;o<r;++o)if(a=l,l=c,c=Vo(t,o+1),!!l){if(c){const h=c[e]-l[e];s[o]=h!==0?(c[n]-l[n])/h:0}i[o]=a?c?Mo(s[o-1])!==Mo(s[o])?0:(s[o-1]+s[o])/2:s[o-1]:s[o]}L3(t,s,i),V3(t,i,e)}function au(t,e,n){return Math.max(Math.min(t,n),e)}function j3(t,e){let n,r,s,i,o,a=Gl(t[0],e);for(n=0,r=t.length;n<r;++n)o=i,i=a,a=n<r-1&&Gl(t[n+1],e),i&&(s=t[n],o&&(s.cp1x=au(s.cp1x,e.left,e.right),s.cp1y=au(s.cp1y,e.top,e.bottom)),a&&(s.cp2x=au(s.cp2x,e.left,e.right),s.cp2y=au(s.cp2y,e.top,e.bottom)))}function U3(t,e,n,r,s){let i,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")F3(t,s);else{let c=r?t[t.length-1]:t[0];for(i=0,o=t.length;i<o;++i)a=t[i],l=M3(c,a,t[Math.min(i+1,o-(r?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&j3(t,n)}function t_(){return typeof window<"u"&&typeof document<"u"}function n_(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Uh(t,e,n){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[n])):r=t,r}const Dd=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function z3(t,e){return Dd(t).getPropertyValue(e)}const B3=["top","right","bottom","left"];function ui(t,e,n){const r={};n=n?"-"+n:"";for(let s=0;s<4;s++){const i=B3[s];r[i]=parseFloat(t[e+"-"+i+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const W3=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function H3(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:s,offsetY:i}=r;let o=!1,a,l;if(W3(s,i,t.target))a=s,l=i;else{const c=e.getBoundingClientRect();a=r.clientX-c.left,l=r.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function Js(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,s=Dd(n),i=s.boxSizing==="border-box",o=ui(s,"padding"),a=ui(s,"border","width"),{x:l,y:c,box:h}=H3(t,n),d=o.left+(h&&a.left),f=o.top+(h&&a.top);let{width:m,height:v}=e;return i&&(m-=o.width+a.width,v-=o.height+a.height),{x:Math.round((l-d)/m*n.width/r),y:Math.round((c-f)/v*n.height/r)}}function $3(t,e,n){let r,s;if(e===void 0||n===void 0){const i=t&&n_(t);if(!i)e=t.clientWidth,n=t.clientHeight;else{const o=i.getBoundingClientRect(),a=Dd(i),l=ui(a,"border","width"),c=ui(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,r=Uh(a.maxWidth,i,"clientWidth"),s=Uh(a.maxHeight,i,"clientHeight")}}return{width:e,height:n,maxWidth:r||Fh,maxHeight:s||Fh}}const ss=t=>Math.round(t*10)/10;function q3(t,e,n,r){const s=Dd(t),i=ui(s,"margin"),o=Uh(s.maxWidth,t,"clientWidth")||Fh,a=Uh(s.maxHeight,t,"clientHeight")||Fh,l=$3(t,e,n);let{width:c,height:h}=l;if(s.boxSizing==="content-box"){const f=ui(s,"border","width"),m=ui(s,"padding");c-=m.width+f.width,h-=m.height+f.height}return c=Math.max(0,c-i.width),h=Math.max(0,r?c/r:h-i.height),c=ss(Math.min(c,o,l.maxWidth)),h=ss(Math.min(h,a,l.maxHeight)),c&&!h&&(h=ss(c/2)),(e!==void 0||n!==void 0)&&r&&l.height&&h>l.height&&(h=l.height,c=ss(Math.floor(h*r))),{width:c,height:h}}function Sx(t,e,n){const r=e||1,s=ss(t.height*r),i=ss(t.width*r);t.height=ss(t.height),t.width=ss(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||o.height!==s||o.width!==i?(t.currentDevicePixelRatio=r,o.height=s,o.width=i,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}const Y3=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};t_()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function kx(t,e){const n=z3(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Zs(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function G3(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:r==="middle"?n<.5?t.y:e.y:r==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function K3(t,e,n,r){const s={x:t.cp2x,y:t.cp2y},i={x:e.cp1x,y:e.cp1y},o=Zs(t,s,n),a=Zs(s,i,n),l=Zs(i,e,n),c=Zs(o,a,n),h=Zs(a,l,n);return Zs(c,h,n)}const Q3=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},X3=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function wo(t,e,n){return t?Q3(e,n):X3()}function dk(t,e){let n,r;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function fk(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function pk(t){return t==="angle"?{between:JS,compare:Gj,normalize:Bn}:{between:io,compare:(e,n)=>e-n,normalize:e=>e}}function Px({start:t,end:e,count:n,loop:r,style:s}){return{start:t%n,end:e%n,loop:r&&(e-t+1)%n===0,style:s}}function J3(t,e,n){const{property:r,start:s,end:i}=n,{between:o,normalize:a}=pk(r),l=e.length;let{start:c,end:h,loop:d}=t,f,m;if(d){for(c+=l,h+=l,f=0,m=l;f<m&&o(a(e[c%l][r]),s,i);++f)c--,h--;c%=l,h%=l}return h<c&&(h+=l),{start:c,end:h,loop:d,style:t.style}}function mk(t,e,n){if(!n)return[t];const{property:r,start:s,end:i}=n,o=e.length,{compare:a,between:l,normalize:c}=pk(r),{start:h,end:d,loop:f,style:m}=J3(t,e,n),v=[];let w=!1,T=null,_,x,b;const R=()=>l(s,b,_)&&a(s,b)!==0,D=()=>a(i,_)===0||l(i,b,_),L=()=>w||R(),I=()=>!w||D();for(let y=h,k=h;y<=d;++y)x=e[y%o],!x.skip&&(_=c(x[r]),_!==b&&(w=l(_,s,i),T===null&&L()&&(T=a(_,s)===0?y:k),T!==null&&I()&&(v.push(Px({start:T,end:y,loop:f,count:o,style:m})),T=null),k=y,b=_));return T!==null&&v.push(Px({start:T,end:d,loop:f,count:o,style:m})),v}function gk(t,e){const n=[],r=t.segments;for(let s=0;s<r.length;s++){const i=mk(r[s],t.points,e);i.length&&n.push(...i)}return n}function Z3(t,e,n,r){let s=0,i=e-1;if(n&&!r)for(;s<e&&!t[s].skip;)s++;for(;s<e&&t[s].skip;)s++;for(s%=e,n&&(i+=s);i>s&&t[i%e].skip;)i--;return i%=e,{start:s,end:i}}function e6(t,e,n,r){const s=t.length,i=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%s];c.skip||c.stop?a.skip||(r=!1,i.push({start:e%s,end:(l-1)%s,loop:r}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&i.push({start:e%s,end:o%s,loop:r}),i}function t6(t,e){const n=t.points,r=t.options.spanGaps,s=n.length;if(!s)return[];const i=!!t._loop,{start:o,end:a}=Z3(n,s,i,r);if(r===!0)return Ax(t,[{start:o,end:a,loop:i}],n,e);const l=a<o?a+s:a,c=!!t._fullLoop&&o===0&&a===s-1;return Ax(t,e6(n,o,l,c),n,e)}function Ax(t,e,n,r){return!r||!r.setContext||!n?e:n6(t,e,n,r)}function n6(t,e,n,r){const s=t._chart.getContext(),i=Cx(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let h=i,d=e[0].start,f=d;function m(v,w,T,_){const x=a?-1:1;if(v!==w){for(v+=l;n[v%l].skip;)v-=x;for(;n[w%l].skip;)w+=x;v%l!==w%l&&(c.push({start:v%l,end:w%l,loop:T,style:_}),h=_,d=w%l)}}for(const v of e){d=a?d:v.start;let w=n[d%l],T;for(f=d+1;f<=v.end;f++){const _=n[f%l];T=Cx(r.setContext(Ri(s,{type:"segment",p0:w,p1:_,p0DataIndex:(f-1)%l,p1DataIndex:f%l,datasetIndex:o}))),r6(T,h)&&m(d,f-1,v.loop,h),w=_,h=T}d<f-1&&m(d,f-1,v.loop,h)}return c}function Cx(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function r6(t,e){if(!e)return!1;const n=[],r=function(s,i){return Xy(i)?(n.includes(i)||n.push(i),n.indexOf(i)):i};return JSON.stringify(t,r)!==JSON.stringify(e,r)}function lu(t,e,n){return t.options.clip?t[n]:e[n]}function s6(t,e){const{xScale:n,yScale:r}=t;return n&&r?{left:lu(n,e,"left"),right:lu(n,e,"right"),top:lu(r,e,"top"),bottom:lu(r,e,"bottom")}:e}function yk(t,e){const n=e._clip;if(n.disabled)return!1;const r=s6(e,t.chartArea);return{left:n.left===!1?0:r.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:r.right+(n.right===!0?0:n.right),top:n.top===!1?0:r.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:r.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class i6{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,r,s){const i=n.listeners[s],o=n.duration;i.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(r-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=ek.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((r,s)=>{if(!r.running||!r.items.length)return;const i=r.items;let o=i.length-1,a=!1,l;for(;o>=0;--o)l=i[o],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(e),a=!0):(i[o]=i[i.length-1],i.pop());a&&(s.draw(),this._notify(s,r,e,"progress")),i.length||(r.running=!1,this._notify(s,r,e,"complete"),r.initial=!1),n+=i.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let r=n.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,r)),r}listen(e,n,r){this._getAnims(e).listeners[n].push(r)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,s)=>Math.max(r,s._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const r=n.items;let s=r.length-1;for(;s>=0;--s)r[s].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var hr=new i6;const Rx="transparent",o6={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const r=wx(t||Rx),s=r.valid&&wx(e||Rx);return s&&s.valid?s.mix(r,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class a6{constructor(e,n,r,s){const i=n[r];s=ou([e.to,s,i,e.from]);const o=ou([e.from,i,s]);this._active=!0,this._fn=e.fn||o6[e.type||typeof o],this._easing=ul[e.easing]||ul.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=r,this._from=o,this._to=s,this._promises=void 0}active(){return this._active}update(e,n,r){if(this._active){this._notify(!1);const s=this._target[this._prop],i=r-this._start,o=this._duration-i;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=ou([e.to,n,s,e.from]),this._from=ou([e.from,s,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,r=this._duration,s=this._prop,i=this._from,o=this._loop,a=this._to;let l;if(this._active=i!==a&&(o||n<r),!this._active){this._target[s]=a,this._notify(!0);return}if(n<0){this._target[s]=i;return}l=n/r%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[s]=this._fn(i,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,r)=>{e.push({res:n,rej:r})})}_notify(e){const n=e?"res":"rej",r=this._promises||[];for(let s=0;s<r.length;s++)r[s][n]()}}class _k{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!de(e))return;const n=Object.keys(qe.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(s=>{const i=e[s];if(!de(i))return;const o={};for(const a of n)o[a]=i[a];(ht(i.properties)&&i.properties||[s]).forEach(a=>{(a===s||!r.has(a))&&r.set(a,o)})})}_animateOptions(e,n){const r=n.options,s=c6(e,r);if(!s)return[];const i=this._createAnimations(s,r);return r.$shared&&l6(e.options.$animations,r).then(()=>{e.options=r},()=>{}),i}_createAnimations(e,n){const r=this._properties,s=[],i=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){s.push(...this._animateOptions(e,n));continue}const h=n[c];let d=i[c];const f=r.get(c);if(d)if(f&&d.active()){d.update(f,h,a);continue}else d.cancel();if(!f||!f.duration){e[c]=h;continue}i[c]=d=new a6(f,e,c,h),s.push(d)}return s}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const r=this._createAnimations(e,n);if(r.length)return hr.add(this._chart,r),!0}}function l6(t,e){const n=[],r=Object.keys(e);for(let s=0;s<r.length;s++){const i=t[r[s]];i&&i.active()&&n.push(i.wait())}return Promise.all(n)}function c6(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function Nx(t,e){const n=t&&t.options||{},r=n.reverse,s=n.min===void 0?e:0,i=n.max===void 0?e:0;return{start:r?i:s,end:r?s:i}}function u6(t,e,n){if(n===!1)return!1;const r=Nx(t,n),s=Nx(e,n);return{top:s.end,right:r.end,bottom:s.start,left:r.start}}function h6(t){let e,n,r,s;return de(t)?(e=t.top,n=t.right,r=t.bottom,s=t.left):e=n=r=s=t,{top:e,right:n,bottom:r,left:s,disabled:t===!1}}function vk(t,e){const n=[],r=t._getSortedDatasetMetas(e);let s,i;for(s=0,i=r.length;s<i;++s)n.push(r[s].index);return n}function Dx(t,e,n,r={}){const s=t.keys,i=r.mode==="single";let o,a,l,c;if(e===null)return;let h=!1;for(o=0,a=s.length;o<a;++o){if(l=+s[o],l===n){if(h=!0,r.all)continue;break}c=t.values[l],At(c)&&(i||e===0||Mo(e)===Mo(c))&&(e+=c)}return!h&&!r.all?0:e}function d6(t,e){const{iScale:n,vScale:r}=e,s=n.axis==="x"?"x":"y",i=r.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,c,h;for(l=0,c=o.length;l<c;++l)h=o[l],a[l]={[s]:h,[i]:t[h]};return a}function Xf(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function f6(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function p6(t){const{min:e,max:n,minDefined:r,maxDefined:s}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:s?n:Number.POSITIVE_INFINITY}}function m6(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function Ox(t,e,n,r){for(const s of e.getMatchingVisibleMetas(r).reverse()){const i=t[s.index];if(n&&i>0||!n&&i<0)return s.index}return null}function Mx(t,e){const{chart:n,_cachedMeta:r}=t,s=n._stacks||(n._stacks={}),{iScale:i,vScale:o,index:a}=r,l=i.axis,c=o.axis,h=f6(i,o,r),d=e.length;let f;for(let m=0;m<d;++m){const v=e[m],{[l]:w,[c]:T}=v,_=v._stacks||(v._stacks={});f=_[c]=m6(s,h,w),f[a]=T,f._top=Ox(f,o,!0,r.type),f._bottom=Ox(f,o,!1,r.type);const x=f._visualValues||(f._visualValues={});x[a]=T}}function Jf(t,e){const n=t.scales;return Object.keys(n).filter(r=>n[r].axis===e).shift()}function g6(t,e){return Ri(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function y6(t,e,n){return Ri(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function Sa(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const s of e){const i=s._stacks;if(!i||i[r]===void 0||i[r][n]===void 0)return;delete i[r][n],i[r]._visualValues!==void 0&&i[r]._visualValues[n]!==void 0&&delete i[r]._visualValues[n]}}}const Zf=t=>t==="reset"||t==="none",Lx=(t,e)=>e?t:Object.assign({},t),_6=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:vk(n,!0),values:null};class fl{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Xf(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Sa(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,r=this.getDataset(),s=(d,f,m,v)=>d==="x"?f:d==="r"?v:m,i=n.xAxisID=ce(r.xAxisID,Jf(e,"x")),o=n.yAxisID=ce(r.yAxisID,Jf(e,"y")),a=n.rAxisID=ce(r.rAxisID,Jf(e,"r")),l=n.indexAxis,c=n.iAxisID=s(l,i,o,a),h=n.vAxisID=s(l,o,i,a);n.xScale=this.getScaleForId(i),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&yx(this._data,this),e._stacked&&Sa(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(de(n)){const s=this._cachedMeta;this._data=d6(n,s)}else if(r!==n){if(r){yx(r,this);const s=this._cachedMeta;Sa(s),s._parsed=[]}n&&Object.isExtensible(n)&&Jj(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,r=this.getDataset();let s=!1;this._dataCheck();const i=n._stacked;n._stacked=Xf(n.vScale,n),n.stack!==r.stack&&(s=!0,Sa(n),n.stack=r.stack),this._resyncElements(e),(s||i!==n._stacked)&&(Mx(this,n._parsed),n._stacked=Xf(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:r,_data:s}=this,{iScale:i,_stacked:o}=r,a=i.axis;let l=e===0&&n===s.length?!0:r._sorted,c=e>0&&r._parsed[e-1],h,d,f;if(this._parsing===!1)r._parsed=s,r._sorted=!0,f=s;else{ht(s[e])?f=this.parseArrayData(r,s,e,n):de(s[e])?f=this.parseObjectData(r,s,e,n):f=this.parsePrimitiveData(r,s,e,n);const m=()=>d[a]===null||c&&d[a]<c[a];for(h=0;h<n;++h)r._parsed[h+e]=d=f[h],l&&(m()&&(l=!1),c=d);r._sorted=l}o&&Mx(this,f)}parsePrimitiveData(e,n,r,s){const{iScale:i,vScale:o}=e,a=i.axis,l=o.axis,c=i.getLabels(),h=i===o,d=new Array(s);let f,m,v;for(f=0,m=s;f<m;++f)v=f+r,d[f]={[a]:h||i.parse(c[v],v),[l]:o.parse(n[v],v)};return d}parseArrayData(e,n,r,s){const{xScale:i,yScale:o}=e,a=new Array(s);let l,c,h,d;for(l=0,c=s;l<c;++l)h=l+r,d=n[h],a[l]={x:i.parse(d[0],h),y:o.parse(d[1],h)};return a}parseObjectData(e,n,r,s){const{xScale:i,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(s);let h,d,f,m;for(h=0,d=s;h<d;++h)f=h+r,m=n[f],c[h]={x:i.parse(Lh(m,a),f),y:o.parse(Lh(m,l),f)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){const s=this.chart,i=this._cachedMeta,o=n[e.axis],a={keys:vk(s,!0),values:n._stacks[e.axis]._visualValues};return Dx(a,o,i.index,{mode:r})}updateRangeFromParsed(e,n,r,s){const i=r[n.axis];let o=i===null?NaN:i;const a=s&&r._stacks[n.axis];s&&a&&(s.values=a,o=Dx(s,i,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const r=this._cachedMeta,s=r._parsed,i=r._sorted&&e===r.iScale,o=s.length,a=this._getOtherScale(e),l=_6(n,r,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:d}=p6(a);let f,m;function v(){m=s[f];const w=m[a.axis];return!At(m[e.axis])||h>w||d<w}for(f=0;f<o&&!(!v()&&(this.updateRangeFromParsed(c,e,m,l),i));++f);if(i){for(f=o-1;f>=0;--f)if(!v()){this.updateRangeFromParsed(c,e,m,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,r=[];let s,i,o;for(s=0,i=n.length;s<i;++s)o=n[s][e.axis],At(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,r=n.iScale,s=n.vScale,i=this.getParsed(e);return{label:r?""+r.getLabelForValue(i[r.axis]):"",value:s?""+s.getLabelForValue(i[s.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=h6(ce(this.options.clip,u6(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,r=this._cachedMeta,s=r.data||[],i=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||s.length-a,c=this.options.drawActiveElementsOnTop;let h;for(r.dataset&&r.dataset.draw(e,i,a,l),h=a;h<a+l;++h){const d=s[h];d.hidden||(d.active&&c?o.push(d):d.draw(e,i))}for(h=0;h<o.length;++h)o[h].draw(e,i)}getStyle(e,n){const r=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){const s=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];i=o.$context||(o.$context=y6(this.getContext(),e,o)),i.parsed=this.getParsed(e),i.raw=s.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=g6(this.chart.getContext(),this.index)),i.dataset=s,i.index=i.datasetIndex=this.index;return i.active=!!n,i.mode=r,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){const s=n==="active",i=this._cachedDataOpts,o=e+"-"+n,a=i[o],l=this.enableOptionSharing&&Vh(r);if(a)return Lx(a,l);const c=this.chart.config,h=c.datasetElementScopeKeys(this._type,e),d=s?[`${e}Hover`,"hover",e,""]:[e,""],f=c.getOptionScopes(this.getDataset(),h),m=Object.keys(qe.elements[e]),v=()=>this.getContext(r,s,n),w=c.resolveNamedOptions(f,m,v,d);return w.$shared&&(w.$shared=l,i[o]=Object.freeze(Lx(w,l))),w}_resolveAnimations(e,n,r){const s=this.chart,i=this._cachedDataOpts,o=`animation-${n}`,a=i[o];if(a)return a;let l;if(s.options.animation!==!1){const h=this.chart.config,d=h.datasetAnimationScopeKeys(this._type,n),f=h.getOptionScopes(this.getDataset(),d);l=h.createResolver(f,this.getContext(e,r,n))}const c=new _k(s,l&&l.animations);return l&&l._cacheable&&(i[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||Zf(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const r=this.resolveDataElementOptions(e,n),s=this._sharedOptions,i=this.getSharedOptions(r),o=this.includeOptions(n,i)||i!==s;return this.updateSharedOptions(i,n,r),{sharedOptions:i,includeOptions:o}}updateElement(e,n,r,s){Zf(s)?Object.assign(e,r):this._resolveAnimations(n,s).update(e,r)}updateSharedOptions(e,n,r){e&&!Zf(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,s){e.active=s;const i=this.getStyle(n,s);this._resolveAnimations(n,r,s).update(e,{options:!s&&this.getSharedOptions(i)||i})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,r=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const s=r.length,i=n.length,o=Math.min(i,s);o&&this.parse(0,o),i>s?this._insertElements(s,i-s,e):i<s&&this._removeElements(i,s-i)}_insertElements(e,n,r=!0){const s=this._cachedMeta,i=s.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(i),a=e;a<o;++a)i[a]=new this.dataElementType;this._parsing&&l(s._parsed),this.parse(e,n),r&&this.updateElements(i,e,n,"reset")}updateElements(e,n,r,s){}_removeElements(e,n){const r=this._cachedMeta;if(this._parsing){const s=r._parsed.splice(e,n);r._stacked&&Sa(r,s)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,r,s]=e;this[n](r,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}z(fl,"defaults",{}),z(fl,"datasetElementType",null),z(fl,"dataElementType",null);class Fu extends fl{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:r,data:s=[],_dataset:i}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=n3(n,s,o);this._drawStart=a,this._drawCount=l,r3(n)&&(a=0,l=s.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!i._decimated,r.points=s;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:c},e),this.updateElements(s,a,l,e)}updateElements(e,n,r,s){const i=s==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:h,includeOptions:d}=this._getSharedOptions(n,s),f=o.axis,m=a.axis,{spanGaps:v,segment:w}=this.options,T=Yl(v)?v:Number.POSITIVE_INFINITY,_=this.chart._animationsDisabled||i||s==="none",x=n+r,b=e.length;let R=n>0&&this.getParsed(n-1);for(let D=0;D<b;++D){const L=e[D],I=_?L:{};if(D<n||D>=x){I.skip=!0;continue}const y=this.getParsed(D),k=Te(y[m]),P=I[f]=o.getPixelForValue(y[f],D),A=I[m]=i||k?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,y,l):y[m],D);I.skip=isNaN(P)||isNaN(A)||k,I.stop=D>0&&Math.abs(y[f]-R[f])>T,w&&(I.parsed=y,I.raw=c.data[D]),d&&(I.options=h||this.resolveDataElementOptions(D,L.active?"active":s)),_||this.updateElement(L,D,I,s),R=y}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,r=n.options&&n.options.borderWidth||0,s=e.data||[];if(!s.length)return r;const i=s[0].size(this.resolveDataElementOptions(0)),o=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(r,i,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}z(Fu,"id","line"),z(Fu,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),z(Fu,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function Gs(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class r_{constructor(e){z(this,"options");this.options=e||{}}static override(e){Object.assign(r_.prototype,e)}init(){}formats(){return Gs()}parse(){return Gs()}format(){return Gs()}add(){return Gs()}diff(){return Gs()}startOf(){return Gs()}endOf(){return Gs()}}var wk={_date:r_};function v6(t,e,n,r){const{controller:s,data:i,_sorted:o}=t,a=s._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&i.length){const c=a._reversePixels?Qj:oi;if(r){if(s._sharedOptions){const h=i[0],d=typeof h.getRange=="function"&&h.getRange(e);if(d){const f=c(i,e,n-d),m=c(i,e,n+d);return{lo:f.lo,hi:m.hi}}}}else{const h=c(i,e,n);if(l){const{vScale:d}=s._cachedMeta,{_parsed:f}=t,m=f.slice(0,h.lo+1).reverse().findIndex(w=>!Te(w[d.axis]));h.lo-=Math.max(0,m);const v=f.slice(h.hi).findIndex(w=>!Te(w[d.axis]));h.hi+=Math.max(0,v)}return h}}return{lo:0,hi:i.length-1}}function Od(t,e,n,r,s){const i=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=i.length;a<l;++a){const{index:c,data:h}=i[a],{lo:d,hi:f}=v6(i[a],e,o,s);for(let m=d;m<=f;++m){const v=h[m];v.skip||r(v,c,m)}}}function w6(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(r,s){const i=e?Math.abs(r.x-s.x):0,o=n?Math.abs(r.y-s.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}function ep(t,e,n,r,s){const i=[];return!s&&!t.isPointInArea(e)||Od(t,n,e,function(a,l,c){!s&&!Gl(a,t.chartArea,0)||a.inRange(e.x,e.y,r)&&i.push({element:a,datasetIndex:l,index:c})},!0),i}function x6(t,e,n,r){let s=[];function i(o,a,l){const{startAngle:c,endAngle:h}=o.getProps(["startAngle","endAngle"],r),{angle:d}=Yj(o,{x:e.x,y:e.y});JS(d,c,h)&&s.push({element:o,datasetIndex:a,index:l})}return Od(t,n,e,i),s}function E6(t,e,n,r,s,i){let o=[];const a=w6(n);let l=Number.POSITIVE_INFINITY;function c(h,d,f){const m=h.inRange(e.x,e.y,s);if(r&&!m)return;const v=h.getCenterPoint(s);if(!(!!i||t.isPointInArea(v))&&!m)return;const T=a(e,v);T<l?(o=[{element:h,datasetIndex:d,index:f}],l=T):T===l&&o.push({element:h,datasetIndex:d,index:f})}return Od(t,n,e,c),o}function tp(t,e,n,r,s,i){return!i&&!t.isPointInArea(e)?[]:n==="r"&&!r?x6(t,e,n,s):E6(t,e,n,r,s,i)}function Vx(t,e,n,r,s){const i=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return Od(t,n,e,(l,c,h)=>{l[o]&&l[o](e[n],s)&&(i.push({element:l,datasetIndex:c,index:h}),a=a||l.inRange(e.x,e.y,s))}),r&&!a?[]:i}var T6={modes:{index(t,e,n,r){const s=Js(e,t),i=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?ep(t,s,i,r,o):tp(t,s,i,!1,r,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const h=a[0].index,d=c.data[h];d&&!d.skip&&l.push({element:d,datasetIndex:c.index,index:h})}),l):[]},dataset(t,e,n,r){const s=Js(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?ep(t,s,i,r,o):tp(t,s,i,!1,r,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let h=0;h<c.length;++h)a.push({element:c[h],datasetIndex:l,index:h})}return a},point(t,e,n,r){const s=Js(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;return ep(t,s,i,r,o)},nearest(t,e,n,r){const s=Js(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;return tp(t,s,i,n.intersect,r,o)},x(t,e,n,r){const s=Js(e,t);return Vx(t,s,"x",n.intersect,r)},y(t,e,n,r){const s=Js(e,t);return Vx(t,s,"y",n.intersect,r)}}};const xk=["left","top","right","bottom"];function ka(t,e){return t.filter(n=>n.pos===e)}function Fx(t,e){return t.filter(n=>xk.indexOf(n.pos)===-1&&n.box.axis===e)}function Pa(t,e){return t.sort((n,r)=>{const s=e?r:n,i=e?n:r;return s.weight===i.weight?s.index-i.index:s.weight-i.weight})}function b6(t){const e=[];let n,r,s,i,o,a;for(n=0,r=(t||[]).length;n<r;++n)s=t[n],{position:i,options:{stack:o,stackWeight:a=1}}=s,e.push({index:n,box:s,pos:i,horizontal:s.isHorizontal(),weight:s.weight,stack:o&&i+o,stackWeight:a});return e}function I6(t){const e={};for(const n of t){const{stack:r,pos:s,stackWeight:i}=n;if(!r||!xk.includes(s))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return e}function S6(t,e){const n=I6(t),{vBoxMaxWidth:r,hBoxMaxHeight:s}=e;let i,o,a;for(i=0,o=t.length;i<o;++i){a=t[i];const{fullSize:l}=a.box,c=n[a.stack],h=c&&a.stackWeight/c.weight;a.horizontal?(a.width=h?h*r:l&&e.availableWidth,a.height=s):(a.width=r,a.height=h?h*s:l&&e.availableHeight)}return n}function k6(t){const e=b6(t),n=Pa(e.filter(c=>c.box.fullSize),!0),r=Pa(ka(e,"left"),!0),s=Pa(ka(e,"right")),i=Pa(ka(e,"top"),!0),o=Pa(ka(e,"bottom")),a=Fx(e,"x"),l=Fx(e,"y");return{fullSize:n,leftAndTop:r.concat(i),rightAndBottom:s.concat(l).concat(o).concat(a),chartArea:ka(e,"chartArea"),vertical:r.concat(s).concat(l),horizontal:i.concat(o).concat(a)}}function jx(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function Ek(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function P6(t,e,n,r){const{pos:s,box:i}=n,o=t.maxPadding;if(!de(s)){n.size&&(t[s]-=n.size);const d=r[n.stack]||{size:0,count:1};d.size=Math.max(d.size,n.horizontal?i.height:i.width),n.size=d.size/d.count,t[s]+=n.size}i.getPadding&&Ek(o,i.getPadding());const a=Math.max(0,e.outerWidth-jx(o,t,"left","right")),l=Math.max(0,e.outerHeight-jx(o,t,"top","bottom")),c=a!==t.w,h=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:h}:{same:h,other:c}}function A6(t){const e=t.maxPadding;function n(r){const s=Math.max(e[r]-t[r],0);return t[r]+=s,s}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function C6(t,e){const n=e.maxPadding;function r(s){const i={left:0,top:0,right:0,bottom:0};return s.forEach(o=>{i[o]=Math.max(e[o],n[o])}),i}return r(t?["left","right"]:["top","bottom"])}function Ha(t,e,n,r){const s=[];let i,o,a,l,c,h;for(i=0,o=t.length,c=0;i<o;++i){a=t[i],l=a.box,l.update(a.width||e.w,a.height||e.h,C6(a.horizontal,e));const{same:d,other:f}=P6(e,n,a,r);c|=d&&s.length,h=h||f,l.fullSize||s.push(a)}return c&&Ha(s,e,n,r)||h}function cu(t,e,n,r,s){t.top=n,t.left=e,t.right=e+r,t.bottom=n+s,t.width=r,t.height=s}function Ux(t,e,n,r){const s=n.padding;let{x:i,y:o}=e;for(const a of t){const l=a.box,c=r[a.stack]||{placed:0,weight:1},h=a.stackWeight/c.weight||1;if(a.horizontal){const d=e.w*h,f=c.size||l.height;Vh(c.start)&&(o=c.start),l.fullSize?cu(l,s.left,o,n.outerWidth-s.right-s.left,f):cu(l,e.left+c.placed,o,d,f),c.start=o,c.placed+=d,o=l.bottom}else{const d=e.h*h,f=c.size||l.width;Vh(c.start)&&(i=c.start),l.fullSize?cu(l,i,s.top,f,n.outerHeight-s.bottom-s.top):cu(l,i,e.top+c.placed,f,d),c.start=i,c.placed+=d,i=l.right}}e.x=i,e.y=o}var is={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const s=Dn(t.options.layout.padding),i=Math.max(e-s.width,0),o=Math.max(n-s.height,0),a=k6(t.boxes),l=a.vertical,c=a.horizontal;ye(t.boxes,w=>{typeof w.beforeLayout=="function"&&w.beforeLayout()});const h=l.reduce((w,T)=>T.box.options&&T.box.options.display===!1?w:w+1,0)||1,d=Object.freeze({outerWidth:e,outerHeight:n,padding:s,availableWidth:i,availableHeight:o,vBoxMaxWidth:i/2/h,hBoxMaxHeight:o/2}),f=Object.assign({},s);Ek(f,Dn(r));const m=Object.assign({maxPadding:f,w:i,h:o,x:s.left,y:s.top},s),v=S6(l.concat(c),d);Ha(a.fullSize,m,d,v),Ha(l,m,d,v),Ha(c,m,d,v)&&Ha(l,m,d,v),A6(m),Ux(a.leftAndTop,m,d,v),m.x+=m.w,m.y+=m.h,Ux(a.rightAndBottom,m,d,v),t.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},ye(a.chartArea,w=>{const T=w.box;Object.assign(T,t.chartArea),T.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}};class Tk{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,r){}removeEventListener(e,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,r,s){return n=Math.max(0,n||e.width),r=r||e.height,{width:n,height:Math.max(0,s?Math.floor(n/s):r)}}isAttached(e){return!0}updateConfig(e){}}class R6 extends Tk{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const ju="$chartjs",N6={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},zx=t=>t===null||t==="";function D6(t,e){const n=t.style,r=t.getAttribute("height"),s=t.getAttribute("width");if(t[ju]={initial:{height:r,width:s,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",zx(s)){const i=kx(t,"width");i!==void 0&&(t.width=i)}if(zx(r))if(t.style.height==="")t.height=t.width/(e||2);else{const i=kx(t,"height");i!==void 0&&(t.height=i)}return t}const bk=Y3?{passive:!0}:!1;function O6(t,e,n){t&&t.addEventListener(e,n,bk)}function M6(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,bk)}function L6(t,e){const n=N6[t.type]||t.type,{x:r,y:s}=Js(t,e);return{type:n,chart:e,native:t,x:r!==void 0?r:null,y:s!==void 0?s:null}}function zh(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function V6(t,e,n){const r=t.canvas,s=new MutationObserver(i=>{let o=!1;for(const a of i)o=o||zh(a.addedNodes,r),o=o&&!zh(a.removedNodes,r);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}function F6(t,e,n){const r=t.canvas,s=new MutationObserver(i=>{let o=!1;for(const a of i)o=o||zh(a.removedNodes,r),o=o&&!zh(a.addedNodes,r);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}const Kl=new Map;let Bx=0;function Ik(){const t=window.devicePixelRatio;t!==Bx&&(Bx=t,Kl.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function j6(t,e){Kl.size||window.addEventListener("resize",Ik),Kl.set(t,e)}function U6(t){Kl.delete(t),Kl.size||window.removeEventListener("resize",Ik)}function z6(t,e,n){const r=t.canvas,s=r&&n_(r);if(!s)return;const i=tk((a,l)=>{const c=s.clientWidth;n(a,l),c<s.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,h=l.contentRect.height;c===0&&h===0||i(c,h)});return o.observe(s),j6(t,i),o}function np(t,e,n){n&&n.disconnect(),e==="resize"&&U6(t)}function B6(t,e,n){const r=t.canvas,s=tk(i=>{t.ctx!==null&&n(L6(i,t))},t);return O6(r,e,s),s}class W6 extends Tk{acquireContext(e,n){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(D6(e,n),r):null}releaseContext(e){const n=e.canvas;if(!n[ju])return!1;const r=n[ju].initial;["height","width"].forEach(i=>{const o=r[i];Te(o)?n.removeAttribute(i):n.setAttribute(i,o)});const s=r.style||{};return Object.keys(s).forEach(i=>{n.style[i]=s[i]}),n.width=n.width,delete n[ju],!0}addEventListener(e,n,r){this.removeEventListener(e,n);const s=e.$proxies||(e.$proxies={}),o={attach:V6,detach:F6,resize:z6}[n]||B6;s[n]=o(e,n,r)}removeEventListener(e,n){const r=e.$proxies||(e.$proxies={}),s=r[n];if(!s)return;({attach:np,detach:np,resize:np}[n]||M6)(e,n,s),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,r,s){return q3(e,n,r,s)}isAttached(e){const n=e&&n_(e);return!!(n&&n.isConnected)}}function H6(t){return!t_()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?R6:W6}class Ns{constructor(){z(this,"x");z(this,"y");z(this,"active",!1);z(this,"options");z(this,"$animations")}tooltipPosition(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}hasValue(){return Yl(this.x)&&Yl(this.y)}getProps(e,n){const r=this.$animations;if(!n||!r)return this;const s={};return e.forEach(i=>{s[i]=r[i]&&r[i].active()?r[i]._to:this[i]}),s}}z(Ns,"defaults",{}),z(Ns,"defaultRoutes");function $6(t,e){const n=t.options.ticks,r=q6(t),s=Math.min(n.maxTicksLimit||r,r),i=n.major.enabled?G6(e):[],o=i.length,a=i[0],l=i[o-1],c=[];if(o>s)return K6(e,c,i,o/s),c;const h=Y6(i,e,s);if(o>0){let d,f;const m=o>1?Math.round((l-a)/(o-1)):null;for(uu(e,c,h,Te(m)?0:a-m,a),d=0,f=o-1;d<f;d++)uu(e,c,h,i[d],i[d+1]);return uu(e,c,h,l,Te(m)?e.length:l+m),c}return uu(e,c,h),c}function q6(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),s=t._maxLength/n;return Math.floor(Math.min(r,s))}function Y6(t,e,n){const r=Q6(t),s=e.length/n;if(!r)return Math.max(s,1);const i=Bj(r);for(let o=0,a=i.length-1;o<a;o++){const l=i[o];if(l>s)return l}return Math.max(s,1)}function G6(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}function K6(t,e,n,r){let s=0,i=n[0],o;for(r=Math.ceil(r),o=0;o<t.length;o++)o===i&&(e.push(t[o]),s++,i=n[s*r])}function uu(t,e,n,r,s){const i=ce(r,0),o=Math.min(ce(s,t.length),t.length);let a=0,l,c,h;for(n=Math.ceil(n),s&&(l=s-r,n=l/Math.floor(l/n)),h=i;h<0;)a++,h=Math.round(i+a*n);for(c=Math.max(i,0);c<o;c++)c===h&&(e.push(t[c]),a++,h=Math.round(i+a*n))}function Q6(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}const X6=t=>t==="left"?"right":t==="right"?"left":t,Wx=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,Hx=(t,e)=>Math.min(e||t,t);function $x(t,e){const n=[],r=t.length/e,s=t.length;let i=0;for(;i<s;i+=r)n.push(t[Math.floor(i)]);return n}function J6(t,e,n){const r=t.ticks.length,s=Math.min(e,r-1),i=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(s),c;if(!(n&&(r===1?c=Math.max(l-i,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(s-1))/2,l+=s<e?c:-c,l<i-a||l>o+a)))return l}function Z6(t,e){ye(t,n=>{const r=n.gc,s=r.length/2;let i;if(s>e){for(i=0;i<s;++i)delete n.data[r[i]];r.splice(0,s)}})}function Aa(t){return t.drawTicks?t.tickLength:0}function qx(t,e){if(!t.display)return 0;const n=Wt(t.font,e),r=Dn(t.padding);return(ht(t.text)?t.text.length:1)*n.lineHeight+r.height}function eU(t,e){return Ri(t,{scale:e,type:"scale"})}function tU(t,e,n){return Ri(t,{tick:n,index:e,type:"tick"})}function nU(t,e,n){let r=nk(t);return(n&&e!=="right"||!n&&e==="right")&&(r=X6(r)),r}function rU(t,e,n,r){const{top:s,left:i,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:h}=l;let d=0,f,m,v;const w=o-s,T=a-i;if(t.isHorizontal()){if(m=Qt(r,i,a),de(n)){const _=Object.keys(n)[0],x=n[_];v=h[_].getPixelForValue(x)+w-e}else n==="center"?v=(c.bottom+c.top)/2+w-e:v=Wx(t,n,e);f=a-i}else{if(de(n)){const _=Object.keys(n)[0],x=n[_];m=h[_].getPixelForValue(x)-T+e}else n==="center"?m=(c.left+c.right)/2-T+e:m=Wx(t,n,e);v=Qt(r,o,s),d=n==="left"?-In:In}return{titleX:m,titleY:v,maxWidth:f,rotation:d}}class Jo extends Ns{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:r,_suggestedMax:s}=this;return e=Vn(e,Number.POSITIVE_INFINITY),n=Vn(n,Number.NEGATIVE_INFINITY),r=Vn(r,Number.POSITIVE_INFINITY),s=Vn(s,Number.NEGATIVE_INFINITY),{min:Vn(e,r),max:Vn(n,s),minDefined:At(e),maxDefined:At(n)}}getMinMax(e){let{min:n,max:r,minDefined:s,maxDefined:i}=this.getUserBounds(),o;if(s&&i)return{min:n,max:r};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),s||(n=Math.min(n,o.min)),i||(r=Math.max(r,o.max));return n=i&&n>r?r:n,r=s&&n>r?n:r,{min:Vn(n,Vn(r,n)),max:Vn(r,Vn(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Se(this.options.beforeUpdate,[this])}update(e,n,r){const{beginAtZero:s,grace:i,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=b3(this,i,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?$x(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=$6(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,e=!e),this._startPixel=n,this._endPixel=r,this._reversePixels=e,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Se(this.options.afterUpdate,[this])}beforeSetDimensions(){Se(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Se(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Se(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Se(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let r,s,i;for(r=0,s=e.length;r<s;r++)i=e[r],i.label=Se(n.callback,[i.value,r,e],this)}afterTickToLabelConversion(){Se(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Se(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,r=Hx(this.ticks.length,e.ticks.maxTicksLimit),s=n.minRotation||0,i=n.maxRotation;let o=s,a,l,c;if(!this._isVisible()||!n.display||s>=i||r<=1||!this.isHorizontal()){this.labelRotation=s;return}const h=this._getLabelSizes(),d=h.widest.width,f=h.highest.height,m=hn(this.chart.width-d,0,this.maxWidth);a=e.offset?this.maxWidth/r:m/(r-1),d+6>a&&(a=m/(r-(e.offset?.5:1)),l=this.maxHeight-Aa(e.grid)-n.padding-qx(e.title,this.chart.options.font),c=Math.sqrt(d*d+f*f),o=qj(Math.min(Math.asin(hn((h.highest.height+6)/a,-1,1)),Math.asin(hn(l/c,-1,1))-Math.asin(hn(f/c,-1,1)))),o=Math.max(s,Math.min(i,o))),this.labelRotation=o}afterCalculateLabelRotation(){Se(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Se(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:r,title:s,grid:i}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=qx(s,n.options.font);if(a?(e.width=this.maxWidth,e.height=Aa(i)+l):(e.height=this.maxHeight,e.width=Aa(i)+l),r.display&&this.ticks.length){const{first:c,last:h,widest:d,highest:f}=this._getLabelSizes(),m=r.padding*2,v=ii(this.labelRotation),w=Math.cos(v),T=Math.sin(v);if(a){const _=r.mirror?0:T*d.width+w*f.height;e.height=Math.min(this.maxHeight,e.height+_+m)}else{const _=r.mirror?0:w*d.width+T*f.height;e.width=Math.min(this.maxWidth,e.width+_+m)}this._calculatePadding(c,h,T,w)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,r,s){const{ticks:{align:i,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const h=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,m=0;l?c?(f=s*e.width,m=r*n.height):(f=r*e.height,m=s*n.width):i==="start"?m=n.width:i==="end"?f=e.width:i!=="inner"&&(f=e.width/2,m=n.width/2),this.paddingLeft=Math.max((f-h+o)*this.width/(this.width-h),0),this.paddingRight=Math.max((m-d+o)*this.width/(this.width-d),0)}else{let h=n.height/2,d=e.height/2;i==="start"?(h=0,d=e.height):i==="end"&&(h=n.height,d=0),this.paddingTop=h+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Se(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,r;for(n=0,r=e.length;n<r;n++)Te(e[n].label)&&(e.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=$x(r,n)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,r){const{ctx:s,_longestTextCache:i}=this,o=[],a=[],l=Math.floor(n/Hx(n,r));let c=0,h=0,d,f,m,v,w,T,_,x,b,R,D;for(d=0;d<n;d+=l){if(v=e[d].label,w=this._resolveTickFontOptions(d),s.font=T=w.string,_=i[T]=i[T]||{data:{},gc:[]},x=w.lineHeight,b=R=0,!Te(v)&&!ht(v))b=Ex(s,_.data,_.gc,b,v),R=x;else if(ht(v))for(f=0,m=v.length;f<m;++f)D=v[f],!Te(D)&&!ht(D)&&(b=Ex(s,_.data,_.gc,b,D),R+=x);o.push(b),a.push(R),c=Math.max(b,c),h=Math.max(R,h)}Z6(i,n);const L=o.indexOf(c),I=a.indexOf(h),y=k=>({width:o[k]||0,height:a[k]||0});return{first:y(0),last:y(n-1),widest:y(L),highest:y(I),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return Kj(this._alignToPixels?Ys(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const r=n[e];return r.$context||(r.$context=tU(this.getContext(),e,r))}return this.$context||(this.$context=eU(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=ii(this.labelRotation),r=Math.abs(Math.cos(n)),s=Math.abs(Math.sin(n)),i=this._getLabelSizes(),o=e.autoSkipPadding||0,a=i?i.widest.width+o:0,l=i?i.highest.height+o:0;return this.isHorizontal()?l*r>a*s?a/r:l/s:l*s<a*r?l/r:a/s}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,r=this.chart,s=this.options,{grid:i,position:o,border:a}=s,l=i.offset,c=this.isHorizontal(),d=this.ticks.length+(l?1:0),f=Aa(i),m=[],v=a.setContext(this.getContext()),w=v.display?v.width:0,T=w/2,_=function(we){return Ys(r,we,w)};let x,b,R,D,L,I,y,k,P,A,N,C;if(o==="top")x=_(this.bottom),I=this.bottom-f,k=x-T,A=_(e.top)+T,C=e.bottom;else if(o==="bottom")x=_(this.top),A=e.top,C=_(e.bottom)-T,I=x+T,k=this.top+f;else if(o==="left")x=_(this.right),L=this.right-f,y=x-T,P=_(e.left)+T,N=e.right;else if(o==="right")x=_(this.left),P=e.left,N=_(e.right)-T,L=x+T,y=this.left+f;else if(n==="x"){if(o==="center")x=_((e.top+e.bottom)/2+.5);else if(de(o)){const we=Object.keys(o)[0],We=o[we];x=_(this.chart.scales[we].getPixelForValue(We))}A=e.top,C=e.bottom,I=x+T,k=I+f}else if(n==="y"){if(o==="center")x=_((e.left+e.right)/2);else if(de(o)){const we=Object.keys(o)[0],We=o[we];x=_(this.chart.scales[we].getPixelForValue(We))}L=x-T,y=L-f,P=e.left,N=e.right}const le=ce(s.ticks.maxTicksLimit,d),re=Math.max(1,Math.ceil(d/le));for(b=0;b<d;b+=re){const we=this.getContext(b),We=i.setContext(we),F=a.setContext(we),Y=We.lineWidth,G=We.color,J=F.dash||[],ue=F.dashOffset,Yt=We.tickWidth,Ke=We.tickColor,Gt=We.tickBorderDash||[],tt=We.tickBorderDashOffset;R=J6(this,b,l),R!==void 0&&(D=Ys(r,R,Y),c?L=y=P=N=D:I=k=A=C=D,m.push({tx1:L,ty1:I,tx2:y,ty2:k,x1:P,y1:A,x2:N,y2:C,width:Y,color:G,borderDash:J,borderDashOffset:ue,tickWidth:Yt,tickColor:Ke,tickBorderDash:Gt,tickBorderDashOffset:tt}))}return this._ticksLength=d,this._borderValue=x,m}_computeLabelItems(e){const n=this.axis,r=this.options,{position:s,ticks:i}=r,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:h,mirror:d}=i,f=Aa(r.grid),m=f+h,v=d?-h:m,w=-ii(this.labelRotation),T=[];let _,x,b,R,D,L,I,y,k,P,A,N,C="middle";if(s==="top")L=this.bottom-v,I=this._getXAxisLabelAlignment();else if(s==="bottom")L=this.top+v,I=this._getXAxisLabelAlignment();else if(s==="left"){const re=this._getYAxisLabelAlignment(f);I=re.textAlign,D=re.x}else if(s==="right"){const re=this._getYAxisLabelAlignment(f);I=re.textAlign,D=re.x}else if(n==="x"){if(s==="center")L=(e.top+e.bottom)/2+m;else if(de(s)){const re=Object.keys(s)[0],we=s[re];L=this.chart.scales[re].getPixelForValue(we)+m}I=this._getXAxisLabelAlignment()}else if(n==="y"){if(s==="center")D=(e.left+e.right)/2-m;else if(de(s)){const re=Object.keys(s)[0],we=s[re];D=this.chart.scales[re].getPixelForValue(we)}I=this._getYAxisLabelAlignment(f).textAlign}n==="y"&&(l==="start"?C="top":l==="end"&&(C="bottom"));const le=this._getLabelSizes();for(_=0,x=a.length;_<x;++_){b=a[_],R=b.label;const re=i.setContext(this.getContext(_));y=this.getPixelForTick(_)+i.labelOffset,k=this._resolveTickFontOptions(_),P=k.lineHeight,A=ht(R)?R.length:1;const we=A/2,We=re.color,F=re.textStrokeColor,Y=re.textStrokeWidth;let G=I;o?(D=y,I==="inner"&&(_===x-1?G=this.options.reverse?"left":"right":_===0?G=this.options.reverse?"right":"left":G="center"),s==="top"?c==="near"||w!==0?N=-A*P+P/2:c==="center"?N=-le.highest.height/2-we*P+P:N=-le.highest.height+P/2:c==="near"||w!==0?N=P/2:c==="center"?N=le.highest.height/2-we*P:N=le.highest.height-A*P,d&&(N*=-1),w!==0&&!re.showLabelBackdrop&&(D+=P/2*Math.sin(w))):(L=y,N=(1-A)*P/2);let J;if(re.showLabelBackdrop){const ue=Dn(re.backdropPadding),Yt=le.heights[_],Ke=le.widths[_];let Gt=N-ue.top,tt=0-ue.left;switch(C){case"middle":Gt-=Yt/2;break;case"bottom":Gt-=Yt;break}switch(I){case"center":tt-=Ke/2;break;case"right":tt-=Ke;break;case"inner":_===x-1?tt-=Ke:_>0&&(tt-=Ke/2);break}J={left:tt,top:Gt,width:Ke+ue.width,height:Yt+ue.height,color:re.backdropColor}}T.push({label:R,font:k,textOffset:N,options:{rotation:w,color:We,strokeColor:F,strokeWidth:Y,textAlign:G,textBaseline:C,translation:[D,L],backdrop:J}})}return T}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-ii(this.labelRotation))return e==="top"?"left":"right";let s="center";return n.align==="start"?s="left":n.align==="end"?s="right":n.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:r,mirror:s,padding:i}}=this.options,o=this._getLabelSizes(),a=e+i,l=o.widest.width;let c,h;return n==="left"?s?(h=this.right+i,r==="near"?c="left":r==="center"?(c="center",h+=l/2):(c="right",h+=l)):(h=this.right-a,r==="near"?c="right":r==="center"?(c="center",h-=l/2):(c="left",h=this.left)):n==="right"?s?(h=this.left+i,r==="near"?c="right":r==="center"?(c="center",h-=l/2):(c="left",h-=l)):(h=this.left+a,r==="near"?c="left":r==="center"?(c="center",h+=l/2):(c="right",h=this.right)):c="right",{textAlign:c,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:r,top:s,width:i,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(r,s,i,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const s=this.ticks.findIndex(i=>i.value===e);return s>=0?n.setContext(this.getContext(s)).lineWidth:0}drawGrid(e){const n=this.options.grid,r=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,o;const a=(l,c,h)=>{!h.width||!h.color||(r.save(),r.lineWidth=h.width,r.strokeStyle=h.color,r.setLineDash(h.borderDash||[]),r.lineDashOffset=h.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(c.x,c.y),r.stroke(),r.restore())};if(n.display)for(i=0,o=s.length;i<o;++i){const l=s[i];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:r,grid:s}}=this,i=r.setContext(this.getContext()),o=r.display?i.width:0;if(!o)return;const a=s.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,h,d,f;this.isHorizontal()?(c=Ys(e,this.left,o)-o/2,h=Ys(e,this.right,a)+a/2,d=f=l):(d=Ys(e,this.top,o)-o/2,f=Ys(e,this.bottom,a)+a/2,c=h=l),n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.beginPath(),n.moveTo(c,d),n.lineTo(h,f),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,s=this._computeLabelArea();s&&Rd(r,s);const i=this.getLabelItems(e);for(const o of i){const a=o.options,l=o.font,c=o.label,h=o.textOffset;jh(r,c,0,h,l,a)}s&&Nd(r)}drawTitle(){const{ctx:e,options:{position:n,title:r,reverse:s}}=this;if(!r.display)return;const i=Wt(r.font),o=Dn(r.padding),a=r.align;let l=i.lineHeight/2;n==="bottom"||n==="center"||de(n)?(l+=o.bottom,ht(r.text)&&(l+=i.lineHeight*(r.text.length-1))):l+=o.top;const{titleX:c,titleY:h,maxWidth:d,rotation:f}=rU(this,l,n,a);jh(e,r.text,0,0,i,{color:r.color,maxWidth:d,rotation:f,textAlign:nU(a,n,s),textBaseline:"middle",translation:[c,h]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,r=ce(e.grid&&e.grid.z,-1),s=ce(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Jo.prototype.draw?[{z:n,draw:i=>{this.draw(i)}}]:[{z:r,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:n,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",s=[];let i,o;for(i=0,o=n.length;i<o;++i){const a=n[i];a[r]===this.id&&(!e||a.type===e)&&s.push(a)}return s}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return Wt(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class hu{constructor(e,n,r){this.type=e,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let r;oU(n)&&(r=this.register(n));const s=this.items,i=e.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in s||(s[i]=e,sU(e,o,r),this.override&&qe.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,r=e.id,s=this.scope;r in n&&delete n[r],s&&r in qe[s]&&(delete qe[s][r],this.override&&delete Ti[r])}}function sU(t,e,n){const r=ql(Object.create(null),[n?qe.get(n):{},qe.get(e),t.defaults]);qe.set(e,r),t.defaultRoutes&&iU(e,t.defaultRoutes),t.descriptors&&qe.describe(e,t.descriptors)}function iU(t,e){Object.keys(e).forEach(n=>{const r=n.split("."),s=r.pop(),i=[t].concat(r).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");qe.route(i,s,l,a)})}function oU(t){return"id"in t&&"defaults"in t}class aU{constructor(){this.controllers=new hu(fl,"datasets",!0),this.elements=new hu(Ns,"elements"),this.plugins=new hu(Object,"plugins"),this.scales=new hu(Jo,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,r){[...n].forEach(s=>{const i=r||this._getRegistryForType(s);r||i.isForType(s)||i===this.plugins&&s.id?this._exec(e,i,s):ye(s,o=>{const a=r||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,r){const s=Ky(e);Se(r["before"+s],[],r),n[e](r),Se(r["after"+s],[],r)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(e))return r}return this.plugins}_get(e,n,r){const s=n.get(e);if(s===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return s}}var Un=new aU;class lU{constructor(){this._init=void 0}notify(e,n,r,s){if(n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const i=s?this._descriptors(e).filter(s):this._descriptors(e),o=this._notify(i,e,n,r);return n==="afterDestroy"&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),o}_notify(e,n,r,s){s=s||{};for(const i of e){const o=i.plugin,a=o[r],l=[n,s,i.options];if(Se(a,l,o)===!1&&s.cancelable)return!1}return!0}invalidate(){Te(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const r=e&&e.config,s=ce(r.options&&r.options.plugins,{}),i=cU(r);return s===!1&&!n?[]:hU(e,i,s,n)}_notifyStateChanges(e){const n=this._oldCache||[],r=this._cache,s=(i,o)=>i.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(s(n,r),e,"stop"),this._notify(s(r,n),e,"start")}}function cU(t){const e={},n=[],r=Object.keys(Un.plugins.items);for(let i=0;i<r.length;i++)n.push(Un.getPlugin(r[i]));const s=t.plugins||[];for(let i=0;i<s.length;i++){const o=s[i];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function uU(t,e){return!e&&t===!1?null:t===!0?{}:t}function hU(t,{plugins:e,localIds:n},r,s){const i=[],o=t.getContext();for(const a of e){const l=a.id,c=uU(r[l],s);c!==null&&i.push({plugin:a,options:dU(t.config,{plugin:a,local:n[l]},c,o)})}return i}function dU(t,{plugin:e,local:n},r,s){const i=t.pluginScopeKeys(e),o=t.getOptionScopes(r,i);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Vm(t,e){const n=qe.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function fU(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function pU(t,e){return t===e?"_index_":"_value_"}function Yx(t){if(t==="x"||t==="y"||t==="r")return t}function mU(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Fm(t,...e){if(Yx(t))return t;for(const n of e){const r=n.axis||mU(n.position)||t.length>1&&Yx(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function Gx(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function gU(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(n.length)return Gx(t,"x",n[0])||Gx(t,"y",n[0])}return{}}function yU(t,e){const n=Ti[t.type]||{scales:{}},r=e.scales||{},s=Vm(t.type,e),i=Object.create(null);return Object.keys(r).forEach(o=>{const a=r[o];if(!de(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=Fm(o,a,gU(o,t),qe.scales[a.type]),c=pU(l,s),h=n.scales||{};i[o]=ll(Object.create(null),[{axis:l},a,h[l],h[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||Vm(a,e),h=(Ti[a]||{}).scales||{};Object.keys(h).forEach(d=>{const f=fU(d,l),m=o[f+"AxisID"]||f;i[m]=i[m]||Object.create(null),ll(i[m],[{axis:f},r[m],h[d]])})}),Object.keys(i).forEach(o=>{const a=i[o];ll(a,[qe.scales[a.type],qe.scale])}),i}function Sk(t){const e=t.options||(t.options={});e.plugins=ce(e.plugins,{}),e.scales=yU(t,e)}function kk(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function _U(t){return t=t||{},t.data=kk(t.data),Sk(t),t}const Kx=new Map,Pk=new Set;function du(t,e){let n=Kx.get(t);return n||(n=e(),Kx.set(t,n),Pk.add(n)),n}const Ca=(t,e,n)=>{const r=Lh(e,n);r!==void 0&&t.add(r)};class vU{constructor(e){this._config=_U(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=kk(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),Sk(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return du(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return du(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return du(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,r=this.type;return du(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const r=this._scopeCache;let s=r.get(e);return(!s||n)&&(s=new Map,r.set(e,s)),s}getOptionScopes(e,n,r){const{options:s,type:i}=this,o=this._cachedScopes(e,r),a=o.get(n);if(a)return a;const l=new Set;n.forEach(h=>{e&&(l.add(e),h.forEach(d=>Ca(l,e,d))),h.forEach(d=>Ca(l,s,d)),h.forEach(d=>Ca(l,Ti[i]||{},d)),h.forEach(d=>Ca(l,qe,d)),h.forEach(d=>Ca(l,Om,d))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),Pk.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,Ti[n]||{},qe.datasets[n]||{},{type:n},qe,Om]}resolveNamedOptions(e,n,r,s=[""]){const i={$shared:!0},{resolver:o,subPrefixes:a}=Qx(this._resolverCache,e,s);let l=o;if(xU(o,n)){i.$shared=!1,r=Rs(r)?r():r;const c=this.createResolver(e,r,a);l=Lo(o,r,c)}for(const c of n)i[c]=l[c];return i}createResolver(e,n,r=[""],s){const{resolver:i}=Qx(this._resolverCache,e,r);return de(n)?Lo(i,n,void 0,s):i}}function Qx(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const s=n.join();let i=r.get(s);return i||(i={resolver:Jy(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},r.set(s,i)),i}const wU=t=>de(t)&&Object.getOwnPropertyNames(t).some(e=>Rs(t[e]));function xU(t,e){const{isScriptable:n,isIndexable:r}=ak(t);for(const s of e){const i=n(s),o=r(s),a=(o||i)&&t[s];if(i&&(Rs(a)||wU(a))||o&&ht(a))return!0}return!1}var EU="4.5.1";const TU=["top","bottom","left","right","chartArea"];function Xx(t,e){return t==="top"||t==="bottom"||TU.indexOf(t)===-1&&e==="x"}function Jx(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function Zx(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),Se(n&&n.onComplete,[t],e)}function bU(t){const e=t.chart,n=e.options.animation;Se(n&&n.onProgress,[t],e)}function Ak(t){return t_()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Uu={},eE=t=>{const e=Ak(t);return Object.values(Uu).filter(n=>n.canvas===e).pop()};function IU(t,e,n){const r=Object.keys(t);for(const s of r){const i=+s;if(i>=e){const o=t[s];delete t[s],(n>0||i>e)&&(t[i+n]=o)}}}function SU(t,e,n,r){return!n||t.type==="mouseout"?null:r?e:t}var Wr;let Md=(Wr=class{static register(...e){Un.add(...e),tE()}static unregister(...e){Un.remove(...e),tE()}constructor(e,n){const r=this.config=new vU(n),s=Ak(e),i=eE(s);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||H6(s)),this.platform.updateConfig(r);const a=this.platform.acquireContext(s,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,h=l&&l.width;if(this.id=Dj(),this.ctx=a,this.canvas=l,this.width=h,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new lU,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=e3(d=>this.update(d),o.resizeDelay||0),this._dataChanges=[],Uu[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}hr.listen(this,"complete",Zx),hr.listen(this,"progress",bU),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:r,height:s,_aspectRatio:i}=this;return Te(e)?n&&i?i:s?r/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Un}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Sx(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Tx(this.canvas,this.ctx),this}stop(){return hr.stop(this),this}resize(e,n){hr.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const r=this.options,s=this.canvas,i=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(s,e,n,i),a=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,Sx(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),Se(r.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};ye(n,(r,s)=>{r.id=s})}buildOrUpdateScales(){const e=this.options,n=e.scales,r=this.scales,s=Object.keys(r).reduce((o,a)=>(o[a]=!1,o),{});let i=[];n&&(i=i.concat(Object.keys(n).map(o=>{const a=n[o],l=Fm(o,a),c=l==="r",h=l==="x";return{options:a,dposition:c?"chartArea":h?"bottom":"left",dtype:c?"radialLinear":h?"category":"linear"}}))),ye(i,o=>{const a=o.options,l=a.id,c=Fm(l,a),h=ce(a.type,o.dtype);(a.position===void 0||Xx(a.position,c)!==Xx(o.dposition))&&(a.position=o.dposition),s[l]=!0;let d=null;if(l in r&&r[l].type===h)d=r[l];else{const f=Un.getScale(h);d=new f({id:l,type:h,ctx:this.ctx,chart:this}),r[d.id]=d}d.init(a,e)}),ye(s,(o,a)=>{o||delete r[a]}),ye(r,o=>{is.configure(this,o,o.options),is.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,r=e.length;if(e.sort((s,i)=>s.index-i.index),r>n){for(let s=n;s<r;++s)this._destroyDatasetMeta(s);e.splice(n,r-n)}this._sortedMetasets=e.slice(0).sort(Jx("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((r,s)=>{n.filter(i=>i===r._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let r,s;for(this._removeUnreferencedMetasets(),r=0,s=n.length;r<s;r++){const i=n[r];let o=this.getDatasetMeta(r);const a=i.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=a,o.indexAxis=i.indexAxis||Vm(a,this.options),o.order=i.order||0,o.index=r,o.label=""+i.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const l=Un.getController(a),{datasetElementType:c,dataElementType:h}=qe.datasets[a];Object.assign(l,{dataElementType:Un.getElement(h),datasetElementType:c&&Un.getElement(c)}),o.controller=new l(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){ye(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,h=this.data.datasets.length;c<h;c++){const{controller:d}=this.getDatasetMeta(c),f=!s&&i.indexOf(d)===-1;d.buildOrUpdateElements(f),o=Math.max(+d.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),s||ye(i,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Jx("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){ye(this.scales,e=>{is.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!fx(n,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:s,count:i}of n){const o=r==="_removeElements"?-i:i;IU(e,s,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=i=>new Set(e.filter(o=>o[0]===i).map((o,a)=>a+","+o.splice(1).join(","))),s=r(0);for(let i=1;i<n;i++)if(!fx(s,r(i)))return;return Array.from(s).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;is.update(this,this.width,this.height,e);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],ye(this.boxes,s=>{r&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,i)=>{s._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,Rs(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const r=this.getDatasetMeta(e),s={meta:r,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(r.controller._update(n),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(hr.has(this)?this.attached&&!hr.running(this)&&hr.start(this):(this.draw(),Zx({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,r=[];let s,i;for(s=0,i=n.length;s<i;++s){const o=n[s];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,r={meta:e,index:e.index,cancelable:!0},s=yk(this,e);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(s&&Rd(n,s),e.controller.draw(),s&&Nd(n),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return Gl(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,r,s){const i=T6.modes[n];return typeof i=="function"?i(this,e,r,s):[]}getDatasetMeta(e){const n=this.data.datasets[e],r=this._metasets;let s=r.filter(i=>i&&i._dataset===n).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},r.push(s)),s}getContext(){return this.$context||(this.$context=Ri(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(e,n){const r=this.getDatasetMeta(e);r.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,r){const s=r?"show":"hide",i=this.getDatasetMeta(e),o=i.controller._resolveAnimations(void 0,s);Vh(n)?(i.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(i,{visible:r}),this.update(a=>a.datasetIndex===e?s:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),hr.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Tx(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Uu[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,r=(i,o)=>{n.addEventListener(this,i,o),e[i]=o},s=(i,o,a)=>{i.offsetX=o,i.offsetY=a,this._eventHandler(i)};ye(this.options.events,i=>r(i,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,r=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},s=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},i=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{s("attach",a),this.attached=!0,this.resize(),r("resize",i),r("detach",o)};o=()=>{this.attached=!1,s("resize",i),this._stop(),this._resize(0,0),r("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){ye(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},ye(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,r){const s=r?"set":"remove";let i,o,a,l;for(n==="dataset"&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+s+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[s+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],r=e.map(({datasetIndex:i,index:o})=>{const a=this.getDatasetMeta(i);if(!a)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:a.data[o],index:o}});!Oh(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(e,n,r){return this._plugins.notify(this,e,n,r)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,r){const s=this.options.hover,i=(l,c)=>l.filter(h=>!c.some(d=>h.datasetIndex===d.datasetIndex&&h.index===d.index)),o=i(n,e),a=r?e:i(e,n);o.length&&this.updateHoverStyle(o,s.mode,!1),a.length&&s.mode&&this.updateHoverStyle(a,s.mode,!0)}_eventHandler(e,n){const r={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},s=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,s)===!1)return;const i=this._handleEvent(e,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,s),(i||r.changed)&&this.render(),this}_handleEvent(e,n,r){const{_active:s=[],options:i}=this,o=n,a=this._getActiveElements(e,s,r,o),l=jj(e),c=SU(e,this._lastEvent,r,l);r&&(this._lastEvent=null,Se(i.onHover,[e,a,this],this),l&&Se(i.onClick,[e,a,this],this));const h=!Oh(a,s);return(h||n)&&(this._active=a,this._updateHoverStyles(a,s,n)),this._lastEvent=c,h}_getActiveElements(e,n,r,s){if(e.type==="mouseout")return[];if(!r)return n;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,s)}},z(Wr,"defaults",qe),z(Wr,"instances",Uu),z(Wr,"overrides",Ti),z(Wr,"registry",Un),z(Wr,"version",EU),z(Wr,"getChart",eE),Wr);function tE(){return ye(Md.instances,t=>t._plugins.invalidate())}function Ck(t,e,n=e){t.lineCap=ce(n.borderCapStyle,e.borderCapStyle),t.setLineDash(ce(n.borderDash,e.borderDash)),t.lineDashOffset=ce(n.borderDashOffset,e.borderDashOffset),t.lineJoin=ce(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=ce(n.borderWidth,e.borderWidth),t.strokeStyle=ce(n.borderColor,e.borderColor)}function kU(t,e,n){t.lineTo(n.x,n.y)}function PU(t){return t.stepped?p3:t.tension||t.cubicInterpolationMode==="monotone"?m3:kU}function Rk(t,e,n={}){const r=t.length,{start:s=0,end:i=r-1}=n,{start:o,end:a}=e,l=Math.max(s,o),c=Math.min(i,a),h=s<o&&i<o||s>a&&i>a;return{count:r,start:l,loop:e.loop,ilen:c<l&&!h?r+c-l:c-l}}function AU(t,e,n,r){const{points:s,options:i}=e,{count:o,start:a,loop:l,ilen:c}=Rk(s,n,r),h=PU(i);let{move:d=!0,reverse:f}=r||{},m,v,w;for(m=0;m<=c;++m)v=s[(a+(f?c-m:m))%o],!v.skip&&(d?(t.moveTo(v.x,v.y),d=!1):h(t,w,v,f,i.stepped),w=v);return l&&(v=s[(a+(f?c:0))%o],h(t,w,v,f,i.stepped)),!!l}function CU(t,e,n,r){const s=e.points,{count:i,start:o,ilen:a}=Rk(s,n,r),{move:l=!0,reverse:c}=r||{};let h=0,d=0,f,m,v,w,T,_;const x=R=>(o+(c?a-R:R))%i,b=()=>{w!==T&&(t.lineTo(h,T),t.lineTo(h,w),t.lineTo(h,_))};for(l&&(m=s[x(0)],t.moveTo(m.x,m.y)),f=0;f<=a;++f){if(m=s[x(f)],m.skip)continue;const R=m.x,D=m.y,L=R|0;L===v?(D<w?w=D:D>T&&(T=D),h=(d*h+R)/++d):(b(),t.lineTo(R,D),v=L,d=0,w=T=D),_=D}b()}function jm(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?CU:AU}function RU(t){return t.stepped?G3:t.tension||t.cubicInterpolationMode==="monotone"?K3:Zs}function NU(t,e,n,r){let s=e._path;s||(s=e._path=new Path2D,e.path(s,n,r)&&s.closePath()),Ck(t,e.options),t.stroke(s)}function DU(t,e,n,r){const{segments:s,options:i}=e,o=jm(e);for(const a of s)Ck(t,i,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}const OU=typeof Path2D=="function";function MU(t,e,n,r){OU&&!e.options.segment?NU(t,e,n,r):DU(t,e,n,r)}class os extends Ns{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const s=r.spanGaps?this._loop:this._fullLoop;U3(this._points,r,e,s,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=t6(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,r=e.length;return r&&n[e[r-1].end]}interpolate(e,n){const r=this.options,s=e[n],i=this.points,o=gk(this,{property:n,start:s,end:s});if(!o.length)return;const a=[],l=RU(r);let c,h;for(c=0,h=o.length;c<h;++c){const{start:d,end:f}=o[c],m=i[d],v=i[f];if(m===v){a.push(m);continue}const w=Math.abs((s-m[n])/(v[n]-m[n])),T=l(m,v,w,r.stepped);T[n]=e[n],a.push(T)}return a.length===1?a[0]:a}pathSegment(e,n,r){return jm(this)(e,this,n,r)}path(e,n,r){const s=this.segments,i=jm(this);let o=this._loop;n=n||0,r=r||this.points.length-n;for(const a of s)o&=i(e,this,a,{start:n,end:n+r-1});return!!o}draw(e,n,r,s){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(e.save(),MU(e,this,r,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}z(os,"id","line"),z(os,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),z(os,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),z(os,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function nE(t,e,n,r){const s=t.options,{[n]:i}=t.getProps([n],r);return Math.abs(e-i)<s.radius+s.hitRadius}class zu extends Ns{constructor(n){super();z(this,"parsed");z(this,"skip");z(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,r,s){const i=this.options,{x:o,y:a}=this.getProps(["x","y"],s);return Math.pow(n-o,2)+Math.pow(r-a,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(n,r){return nE(this,n,"x",r)}inYRange(n,r){return nE(this,n,"y",r)}getCenterPoint(n){const{x:r,y:s}=this.getProps(["x","y"],n);return{x:r,y:s}}size(n){n=n||this.options||{};let r=n.radius||0;r=Math.max(r,r&&n.hoverRadius||0);const s=r&&n.borderWidth||0;return(r+s)*2}draw(n,r){const s=this.options;this.skip||s.radius<.1||!Gl(this,r,this.size(s)/2)||(n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.fillStyle=s.backgroundColor,Mm(n,s,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}z(zu,"id","point"),z(zu,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),z(zu,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function LU(t,e,n){const r=t.segments,s=t.points,i=e.points,o=[];for(const a of r){let{start:l,end:c}=a;c=Ld(l,c,s);const h=Um(n,s[l],s[c],a.loop);if(!e.segments){o.push({source:a,target:h,start:s[l],end:s[c]});continue}const d=gk(e,h);for(const f of d){const m=Um(n,i[f.start],i[f.end],f.loop),v=mk(a,s,m);for(const w of v)o.push({source:w,target:f,start:{[n]:rE(h,m,"start",Math.max)},end:{[n]:rE(h,m,"end",Math.min)}})}}return o}function Um(t,e,n,r){if(r)return;let s=e[t],i=n[t];return t==="angle"&&(s=Bn(s),i=Bn(i)),{property:t,start:s,end:i}}function VU(t,e){const{x:n=null,y:r=null}=t||{},s=e.points,i=[];return e.segments.forEach(({start:o,end:a})=>{a=Ld(o,a,s);const l=s[o],c=s[a];r!==null?(i.push({x:l.x,y:r}),i.push({x:c.x,y:r})):n!==null&&(i.push({x:n,y:l.y}),i.push({x:n,y:c.y}))}),i}function Ld(t,e,n){for(;e>t;e--){const r=n[e];if(!isNaN(r.x)&&!isNaN(r.y))break}return e}function rE(t,e,n,r){return t&&e?r(t[n],e[n]):t?t[n]:e?e[n]:0}function Nk(t,e){let n=[],r=!1;return ht(t)?(r=!0,n=t):n=VU(t,e),n.length?new os({points:n,options:{tension:0},_loop:r,_fullLoop:r}):null}function sE(t){return t&&t.fill!==!1}function FU(t,e,n){let s=t[e].fill;const i=[e];let o;if(!n)return s;for(;s!==!1&&i.indexOf(s)===-1;){if(!At(s))return s;if(o=t[s],!o)return!1;if(o.visible)return s;i.push(s),s=o.fill}return!1}function jU(t,e,n){const r=WU(t);if(de(r))return isNaN(r.value)?!1:r;let s=parseFloat(r);return At(s)&&Math.floor(s)===s?UU(r[0],e,s,n):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function UU(t,e,n,r){return(t==="-"||t==="+")&&(n=e+n),n===e||n<0||n>=r?!1:n}function zU(t,e){let n=null;return t==="start"?n=e.bottom:t==="end"?n=e.top:de(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}function BU(t,e,n){let r;return t==="start"?r=n:t==="end"?r=e.options.reverse?e.min:e.max:de(t)?r=t.value:r=e.getBaseValue(),r}function WU(t){const e=t.options,n=e.fill;let r=ce(n&&n.target,n);return r===void 0&&(r=!!e.backgroundColor),r===!1||r===null?!1:r===!0?"origin":r}function HU(t){const{scale:e,index:n,line:r}=t,s=[],i=r.segments,o=r.points,a=$U(e,n);a.push(Nk({x:null,y:e.bottom},r));for(let l=0;l<i.length;l++){const c=i[l];for(let h=c.start;h<=c.end;h++)qU(s,o[h],a)}return new os({points:s,options:{}})}function $U(t,e){const n=[],r=t.getMatchingVisibleMetas("line");for(let s=0;s<r.length;s++){const i=r[s];if(i.index===e)break;i.hidden||n.unshift(i.dataset)}return n}function qU(t,e,n){const r=[];for(let s=0;s<n.length;s++){const i=n[s],{first:o,last:a,point:l}=YU(i,e,"x");if(!(!l||o&&a)){if(o)r.unshift(l);else if(t.push(l),!a)break}}t.push(...r)}function YU(t,e,n){const r=t.interpolate(e,n);if(!r)return{};const s=r[n],i=t.segments,o=t.points;let a=!1,l=!1;for(let c=0;c<i.length;c++){const h=i[c],d=o[h.start][n],f=o[h.end][n];if(io(s,d,f)){a=s===d,l=s===f;break}}return{first:a,last:l,point:r}}class Dk{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,n,r){const{x:s,y:i,radius:o}=this;return n=n||{start:0,end:An},e.arc(s,i,o,n.end,n.start,!0),!r.bounds}interpolate(e){const{x:n,y:r,radius:s}=this,i=e.angle;return{x:n+Math.cos(i)*s,y:r+Math.sin(i)*s,angle:i}}}function GU(t){const{chart:e,fill:n,line:r}=t;if(At(n))return KU(e,n);if(n==="stack")return HU(t);if(n==="shape")return!0;const s=QU(t);return s instanceof Dk?s:Nk(s,r)}function KU(t,e){const n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}function QU(t){return(t.scale||{}).getPointPositionForValue?JU(t):XU(t)}function XU(t){const{scale:e={},fill:n}=t,r=zU(n,e);if(At(r)){const s=e.isHorizontal();return{x:s?r:null,y:s?null:r}}return null}function JU(t){const{scale:e,fill:n}=t,r=e.options,s=e.getLabels().length,i=r.reverse?e.max:e.min,o=BU(n,e,i),a=[];if(r.grid.circular){const l=e.getPointPositionForValue(0,i);return new Dk({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(o)})}for(let l=0;l<s;++l)a.push(e.getPointPositionForValue(l,o));return a}function rp(t,e,n){const r=GU(e),{chart:s,index:i,line:o,scale:a,axis:l}=e,c=o.options,h=c.fill,d=c.backgroundColor,{above:f=d,below:m=d}=h||{},v=s.getDatasetMeta(i),w=yk(s,v);r&&o.points.length&&(Rd(t,n),ZU(t,{line:o,target:r,above:f,below:m,area:n,scale:a,axis:l,clip:w}),Nd(t))}function ZU(t,e){const{line:n,target:r,above:s,below:i,area:o,scale:a,clip:l}=e,c=n._loop?"angle":e.axis;t.save();let h=i;i!==s&&(c==="x"?(iE(t,r,o.top),sp(t,{line:n,target:r,color:s,scale:a,property:c,clip:l}),t.restore(),t.save(),iE(t,r,o.bottom)):c==="y"&&(oE(t,r,o.left),sp(t,{line:n,target:r,color:i,scale:a,property:c,clip:l}),t.restore(),t.save(),oE(t,r,o.right),h=s)),sp(t,{line:n,target:r,color:h,scale:a,property:c,clip:l}),t.restore()}function iE(t,e,n){const{segments:r,points:s}=e;let i=!0,o=!1;t.beginPath();for(const a of r){const{start:l,end:c}=a,h=s[l],d=s[Ld(l,c,s)];i?(t.moveTo(h.x,h.y),i=!1):(t.lineTo(h.x,n),t.lineTo(h.x,h.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(d.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function oE(t,e,n){const{segments:r,points:s}=e;let i=!0,o=!1;t.beginPath();for(const a of r){const{start:l,end:c}=a,h=s[l],d=s[Ld(l,c,s)];i?(t.moveTo(h.x,h.y),i=!1):(t.lineTo(n,h.y),t.lineTo(h.x,h.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(n,d.y)}t.lineTo(n,e.first().y),t.closePath(),t.clip()}function sp(t,e){const{line:n,target:r,property:s,color:i,scale:o,clip:a}=e,l=LU(n,r,s);for(const{source:c,target:h,start:d,end:f}of l){const{style:{backgroundColor:m=i}={}}=c,v=r!==!0;t.save(),t.fillStyle=m,e5(t,o,a,v&&Um(s,d,f)),t.beginPath();const w=!!n.pathSegment(t,c);let T;if(v){w?t.closePath():aE(t,r,f,s);const _=!!r.pathSegment(t,h,{move:w,reverse:!0});T=w&&_,T||aE(t,r,d,s)}t.closePath(),t.fill(T?"evenodd":"nonzero"),t.restore()}}function e5(t,e,n,r){const s=e.chart.chartArea,{property:i,start:o,end:a}=r||{};if(i==="x"||i==="y"){let l,c,h,d;i==="x"?(l=o,c=s.top,h=a,d=s.bottom):(l=s.left,c=o,h=s.right,d=a),t.beginPath(),n&&(l=Math.max(l,n.left),h=Math.min(h,n.right),c=Math.max(c,n.top),d=Math.min(d,n.bottom)),t.rect(l,c,h-l,d-c),t.clip()}}function aE(t,e,n,r){const s=e.interpolate(n,r);s&&t.lineTo(s.x,s.y)}var t5={id:"filler",afterDatasetsUpdate(t,e,n){const r=(t.data.datasets||[]).length,s=[];let i,o,a,l;for(o=0;o<r;++o)i=t.getDatasetMeta(o),a=i.dataset,l=null,a&&a.options&&a instanceof os&&(l={visible:t.isDatasetVisible(o),index:o,fill:jU(a,o,r),chart:t,axis:i.controller.options.indexAxis,scale:i.vScale,line:a}),i.$filler=l,s.push(l);for(o=0;o<r;++o)l=s[o],!(!l||l.fill===!1)&&(l.fill=FU(s,o,n.propagate))},beforeDraw(t,e,n){const r=n.drawTime==="beforeDraw",s=t.getSortedVisibleDatasetMetas(),i=t.chartArea;for(let o=s.length-1;o>=0;--o){const a=s[o].$filler;a&&(a.line.updateControlPoints(i,a.axis),r&&a.fill&&rp(t.ctx,a,i))}},beforeDatasetsDraw(t,e,n){if(n.drawTime!=="beforeDatasetsDraw")return;const r=t.getSortedVisibleDatasetMetas();for(let s=r.length-1;s>=0;--s){const i=r[s].$filler;sE(i)&&rp(t.ctx,i,t.chartArea)}},beforeDatasetDraw(t,e,n){const r=e.meta.$filler;!sE(r)||n.drawTime!=="beforeDatasetDraw"||rp(t.ctx,r,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const lE=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}},n5=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class cE extends Ns{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,r){this.maxWidth=e,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=Se(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(r=>e.filter(r,this.chart.data))),e.sort&&(n=n.sort((r,s)=>e.sort(r,s,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,s=Wt(r.font),i=s.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=lE(r,i);let c,h;n.font=s.string,this.isHorizontal()?(c=this.maxWidth,h=this._fitRows(o,i,a,l)+10):(h=this.maxHeight,c=this._fitCols(o,s,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(h,e.maxHeight||this.maxHeight)}_fitRows(e,n,r,s){const{ctx:i,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],h=s+a;let d=e;i.textAlign="left",i.textBaseline="middle";let f=-1,m=-h;return this.legendItems.forEach((v,w)=>{const T=r+n/2+i.measureText(v.text).width;(w===0||c[c.length-1]+T+2*a>o)&&(d+=h,c[c.length-(w>0?0:1)]=0,m+=h,f++),l[w]={left:0,top:m,row:f,width:T,height:s},c[c.length-1]+=T+a}),d}_fitCols(e,n,r,s){const{ctx:i,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],h=o-e;let d=a,f=0,m=0,v=0,w=0;return this.legendItems.forEach((T,_)=>{const{itemWidth:x,itemHeight:b}=r5(r,n,i,T,s);_>0&&m+b+2*a>h&&(d+=f+a,c.push({width:f,height:m}),v+=f+a,w++,f=m=0),l[_]={left:v,top:m,col:w,width:x,height:b},f=Math.max(f,x),m+=b+a}),d+=f,c.push({width:f,height:m}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:s},rtl:i}}=this,o=wo(i,this.left,this.width);if(this.isHorizontal()){let a=0,l=Qt(r,this.left+s,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=Qt(r,this.left+s,this.right-this.lineWidths[a])),c.top+=this.top+e+s,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+s}else{let a=0,l=Qt(r,this.top+e+s,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=Qt(r,this.top+e+s,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+s,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Rd(e,this),this._draw(),Nd(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:r,ctx:s}=this,{align:i,labels:o}=e,a=qe.color,l=wo(e.rtl,this.left,this.width),c=Wt(o.font),{padding:h}=o,d=c.size,f=d/2;let m;this.drawTitle(),s.textAlign=l.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=c.string;const{boxWidth:v,boxHeight:w,itemHeight:T}=lE(o,d),_=function(L,I,y){if(isNaN(v)||v<=0||isNaN(w)||w<0)return;s.save();const k=ce(y.lineWidth,1);if(s.fillStyle=ce(y.fillStyle,a),s.lineCap=ce(y.lineCap,"butt"),s.lineDashOffset=ce(y.lineDashOffset,0),s.lineJoin=ce(y.lineJoin,"miter"),s.lineWidth=k,s.strokeStyle=ce(y.strokeStyle,a),s.setLineDash(ce(y.lineDash,[])),o.usePointStyle){const P={radius:w*Math.SQRT2/2,pointStyle:y.pointStyle,rotation:y.rotation,borderWidth:k},A=l.xPlus(L,v/2),N=I+f;ik(s,P,A,N,o.pointStyleWidth&&v)}else{const P=I+Math.max((d-w)/2,0),A=l.leftForLtr(L,v),N=dl(y.borderRadius);s.beginPath(),Object.values(N).some(C=>C!==0)?Lm(s,{x:A,y:P,w:v,h:w,radius:N}):s.rect(A,P,v,w),s.fill(),k!==0&&s.stroke()}s.restore()},x=function(L,I,y){jh(s,y.text,L,I+T/2,c,{strikethrough:y.hidden,textAlign:l.textAlign(y.textAlign)})},b=this.isHorizontal(),R=this._computeTitleHeight();b?m={x:Qt(i,this.left+h,this.right-r[0]),y:this.top+h+R,line:0}:m={x:this.left+h,y:Qt(i,this.top+R+h,this.bottom-n[0].height),line:0},dk(this.ctx,e.textDirection);const D=T+h;this.legendItems.forEach((L,I)=>{s.strokeStyle=L.fontColor,s.fillStyle=L.fontColor;const y=s.measureText(L.text).width,k=l.textAlign(L.textAlign||(L.textAlign=o.textAlign)),P=v+f+y;let A=m.x,N=m.y;l.setWidth(this.width),b?I>0&&A+P+h>this.right&&(N=m.y+=D,m.line++,A=m.x=Qt(i,this.left+h,this.right-r[m.line])):I>0&&N+D>this.bottom&&(A=m.x=A+n[m.line].width+h,m.line++,N=m.y=Qt(i,this.top+R+h,this.bottom-n[m.line].height));const C=l.x(A);if(_(C,N,L),A=t3(k,A+v+f,b?A+P:this.right,e.rtl),x(l.x(A),N,L),b)m.x+=P+h;else if(typeof L.text!="string"){const le=c.lineHeight;m.y+=Ok(L,le)+h}else m.y+=D}),fk(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,r=Wt(n.font),s=Dn(n.padding);if(!n.display)return;const i=wo(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=r.size/2,c=s.top+l;let h,d=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),h=this.top+c,d=Qt(e.align,d,this.right-f);else{const v=this.columnSizes.reduce((w,T)=>Math.max(w,T.height),0);h=c+Qt(e.align,this.top,this.bottom-v-e.labels.padding-this._computeTitleHeight())}const m=Qt(a,d,d+f);o.textAlign=i.textAlign(nk(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=r.string,jh(o,n.text,m,h,r)}_computeTitleHeight(){const e=this.options.title,n=Wt(e.font),r=Dn(e.padding);return e.display?n.lineHeight+r.height:0}_getLegendItemAt(e,n){let r,s,i;if(io(e,this.left,this.right)&&io(n,this.top,this.bottom)){for(i=this.legendHitBoxes,r=0;r<i.length;++r)if(s=i[r],io(e,s.left,s.left+s.width)&&io(n,s.top,s.top+s.height))return this.legendItems[r]}return null}handleEvent(e){const n=this.options;if(!o5(e.type,n))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const s=this._hoveredItem,i=n5(s,r);s&&!i&&Se(n.onLeave,[e,s,this],this),this._hoveredItem=r,r&&!i&&Se(n.onHover,[e,r,this],this)}else r&&Se(n.onClick,[e,r,this],this)}}function r5(t,e,n,r,s){const i=s5(r,t,e,n),o=i5(s,r,e.lineHeight);return{itemWidth:i,itemHeight:o}}function s5(t,e,n,r){let s=t.text;return s&&typeof s!="string"&&(s=s.reduce((i,o)=>i.length>o.length?i:o)),e+n.size/2+r.measureText(s).width}function i5(t,e,n){let r=t;return typeof e.text!="string"&&(r=Ok(e,n)),r}function Ok(t,e){const n=t.text?t.text.length:0;return e*n}function o5(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var a5={id:"legend",_element:cE,start(t,e,n){const r=t.legend=new cE({ctx:t.ctx,options:n,chart:t});is.configure(t,r,n),is.addBox(t,r)},stop(t){is.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;is.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,s=n.chart;s.isDatasetVisible(r)?(s.hide(r),e.hidden=!0):(s.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:s,color:i,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),h=Dn(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:i,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:c.borderColor,pointStyle:r||c.pointStyle,rotation:c.rotation,textAlign:s||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};const $a={average(t){if(!t.length)return!1;let e,n,r=new Set,s=0,i=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();r.add(l.x),s+=l.y,++i}}return i===0||r.size===0?!1:{x:[...r].reduce((a,l)=>a+l)/r.size,y:s/i}},nearest(t,e){if(!t.length)return!1;let n=e.x,r=e.y,s=Number.POSITIVE_INFINITY,i,o,a;for(i=0,o=t.length;i<o;++i){const l=t[i].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),h=Dm(e,c);h<s&&(s=h,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,r=l.y}return{x:n,y:r}}};function Fn(t,e){return e&&(ht(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function dr(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function l5(t,e){const{element:n,datasetIndex:r,index:s}=e,i=t.getDatasetMeta(r).controller,{label:o,value:a}=i.getLabelAndValue(s);return{chart:t,label:o,parsed:i.getParsed(s),raw:t.data.datasets[r].data[s],formattedValue:a,dataset:i.getDataset(),dataIndex:s,datasetIndex:r,element:n}}function uE(t,e){const n=t.chart.ctx,{body:r,footer:s,title:i}=t,{boxWidth:o,boxHeight:a}=e,l=Wt(e.bodyFont),c=Wt(e.titleFont),h=Wt(e.footerFont),d=i.length,f=s.length,m=r.length,v=Dn(e.padding);let w=v.height,T=0,_=r.reduce((R,D)=>R+D.before.length+D.lines.length+D.after.length,0);if(_+=t.beforeBody.length+t.afterBody.length,d&&(w+=d*c.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),_){const R=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;w+=m*R+(_-m)*l.lineHeight+(_-1)*e.bodySpacing}f&&(w+=e.footerMarginTop+f*h.lineHeight+(f-1)*e.footerSpacing);let x=0;const b=function(R){T=Math.max(T,n.measureText(R).width+x)};return n.save(),n.font=c.string,ye(t.title,b),n.font=l.string,ye(t.beforeBody.concat(t.afterBody),b),x=e.displayColors?o+2+e.boxPadding:0,ye(r,R=>{ye(R.before,b),ye(R.lines,b),ye(R.after,b)}),x=0,n.font=h.string,ye(t.footer,b),n.restore(),T+=v.width,{width:T,height:w}}function c5(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}function u5(t,e,n,r){const{x:s,width:i}=r,o=n.caretSize+n.caretPadding;if(t==="left"&&s+i+o>e.width||t==="right"&&s-i-o<0)return!0}function h5(t,e,n,r){const{x:s,width:i}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return r==="center"?c=s<=(a+l)/2?"left":"right":s<=i/2?c="left":s>=o-i/2&&(c="right"),u5(c,t,e,n)&&(c="center"),c}function hE(t,e,n){const r=n.yAlign||e.yAlign||c5(t,n);return{xAlign:n.xAlign||e.xAlign||h5(t,e,n,r),yAlign:r}}function d5(t,e){let{x:n,width:r}=t;return e==="right"?n-=r:e==="center"&&(n-=r/2),n}function f5(t,e,n){let{y:r,height:s}=t;return e==="top"?r+=n:e==="bottom"?r-=s+n:r-=s/2,r}function dE(t,e,n,r){const{caretSize:s,caretPadding:i,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=s+i,{topLeft:h,topRight:d,bottomLeft:f,bottomRight:m}=dl(o);let v=d5(e,a);const w=f5(e,l,c);return l==="center"?a==="left"?v+=c:a==="right"&&(v-=c):a==="left"?v-=Math.max(h,f)+s:a==="right"&&(v+=Math.max(d,m)+s),{x:hn(v,0,r.width-e.width),y:hn(w,0,r.height-e.height)}}function fu(t,e,n){const r=Dn(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-r.right:t.x+r.left}function fE(t){return Fn([],dr(t))}function p5(t,e,n){return Ri(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function pE(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const Mk={beforeTitle:ur,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:ur,beforeBody:ur,beforeLabel:ur,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return Te(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:ur,afterBody:ur,beforeFooter:ur,footer:ur,afterFooter:ur};function Vt(t,e,n,r){const s=t[e].call(n,r);return typeof s>"u"?Mk[e].call(n,r):s}class zm extends Ns{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,r=this.options.setContext(this.getContext()),s=r.enabled&&n.options.animation&&r.animations,i=new _k(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=p5(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:r}=n,s=Vt(r,"beforeTitle",this,e),i=Vt(r,"title",this,e),o=Vt(r,"afterTitle",this,e);let a=[];return a=Fn(a,dr(s)),a=Fn(a,dr(i)),a=Fn(a,dr(o)),a}getBeforeBody(e,n){return fE(Vt(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:r}=n,s=[];return ye(e,i=>{const o={before:[],lines:[],after:[]},a=pE(r,i);Fn(o.before,dr(Vt(a,"beforeLabel",this,i))),Fn(o.lines,Vt(a,"label",this,i)),Fn(o.after,dr(Vt(a,"afterLabel",this,i))),s.push(o)}),s}getAfterBody(e,n){return fE(Vt(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:r}=n,s=Vt(r,"beforeFooter",this,e),i=Vt(r,"footer",this,e),o=Vt(r,"afterFooter",this,e);let a=[];return a=Fn(a,dr(s)),a=Fn(a,dr(i)),a=Fn(a,dr(o)),a}_createItems(e){const n=this._active,r=this.chart.data,s=[],i=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(l5(this.chart,n[l]));return e.filter&&(a=a.filter((h,d,f)=>e.filter(h,d,f,r))),e.itemSort&&(a=a.sort((h,d)=>e.itemSort(h,d,r))),ye(a,h=>{const d=pE(e.callbacks,h);s.push(Vt(d,"labelColor",this,h)),i.push(Vt(d,"labelPointStyle",this,h)),o.push(Vt(d,"labelTextColor",this,h))}),this.labelColors=s,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const r=this.options.setContext(this.getContext()),s=this._active;let i,o=[];if(!s.length)this.opacity!==0&&(i={opacity:0});else{const a=$a[r.position].call(this,s,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const l=this._size=uE(this,r),c=Object.assign({},a,l),h=hE(this.chart,r,c),d=dE(r,c,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,i={opacity:1,x:d.x,y:d.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,s){const i=this.getCaretPosition(e,r,s);n.lineTo(i.x1,i.y1),n.lineTo(i.x2,i.y2),n.lineTo(i.x3,i.y3)}getCaretPosition(e,n,r){const{xAlign:s,yAlign:i}=this,{caretSize:o,cornerRadius:a}=r,{topLeft:l,topRight:c,bottomLeft:h,bottomRight:d}=dl(a),{x:f,y:m}=e,{width:v,height:w}=n;let T,_,x,b,R,D;return i==="center"?(R=m+w/2,s==="left"?(T=f,_=T-o,b=R+o,D=R-o):(T=f+v,_=T+o,b=R-o,D=R+o),x=T):(s==="left"?_=f+Math.max(l,h)+o:s==="right"?_=f+v-Math.max(c,d)-o:_=this.caretX,i==="top"?(b=m,R=b-o,T=_-o,x=_+o):(b=m+w,R=b+o,T=_+o,x=_-o),D=b),{x1:T,x2:_,x3:x,y1:b,y2:R,y3:D}}drawTitle(e,n,r){const s=this.title,i=s.length;let o,a,l;if(i){const c=wo(r.rtl,this.x,this.width);for(e.x=fu(this,r.titleAlign,r),n.textAlign=c.textAlign(r.titleAlign),n.textBaseline="middle",o=Wt(r.titleFont),a=r.titleSpacing,n.fillStyle=r.titleColor,n.font=o.string,l=0;l<i;++l)n.fillText(s[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===i&&(e.y+=r.titleMarginBottom-a)}}_drawColorBox(e,n,r,s,i){const o=this.labelColors[r],a=this.labelPointStyles[r],{boxHeight:l,boxWidth:c}=i,h=Wt(i.bodyFont),d=fu(this,"left",i),f=s.x(d),m=l<h.lineHeight?(h.lineHeight-l)/2:0,v=n.y+m;if(i.usePointStyle){const w={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},T=s.leftForLtr(f,c)+c/2,_=v+l/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,Mm(e,w,T,_),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,Mm(e,w,T,_)}else{e.lineWidth=de(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const w=s.leftForLtr(f,c),T=s.leftForLtr(s.xPlus(f,1),c-2),_=dl(o.borderRadius);Object.values(_).some(x=>x!==0)?(e.beginPath(),e.fillStyle=i.multiKeyBackground,Lm(e,{x:w,y:v,w:c,h:l,radius:_}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Lm(e,{x:T,y:v+1,w:c-2,h:l-2,radius:_}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(w,v,c,l),e.strokeRect(w,v,c,l),e.fillStyle=o.backgroundColor,e.fillRect(T,v+1,c-2,l-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){const{body:s}=this,{bodySpacing:i,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:h}=r,d=Wt(r.bodyFont);let f=d.lineHeight,m=0;const v=wo(r.rtl,this.x,this.width),w=function(y){n.fillText(y,v.x(e.x+m),e.y+f/2),e.y+=f+i},T=v.textAlign(o);let _,x,b,R,D,L,I;for(n.textAlign=o,n.textBaseline="middle",n.font=d.string,e.x=fu(this,T,r),n.fillStyle=r.bodyColor,ye(this.beforeBody,w),m=a&&T!=="right"?o==="center"?c/2+h:c+2+h:0,R=0,L=s.length;R<L;++R){for(_=s[R],x=this.labelTextColors[R],n.fillStyle=x,ye(_.before,w),b=_.lines,a&&b.length&&(this._drawColorBox(n,e,R,v,r),f=Math.max(d.lineHeight,l)),D=0,I=b.length;D<I;++D)w(b[D]),f=d.lineHeight;ye(_.after,w)}m=0,f=d.lineHeight,ye(this.afterBody,w),e.y-=i}drawFooter(e,n,r){const s=this.footer,i=s.length;let o,a;if(i){const l=wo(r.rtl,this.x,this.width);for(e.x=fu(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=l.textAlign(r.footerAlign),n.textBaseline="middle",o=Wt(r.footerFont),n.fillStyle=r.footerColor,n.font=o.string,a=0;a<i;++a)n.fillText(s[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,n,r,s){const{xAlign:i,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:h}=r,{topLeft:d,topRight:f,bottomLeft:m,bottomRight:v}=dl(s.cornerRadius);n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.beginPath(),n.moveTo(a+d,l),o==="top"&&this.drawCaret(e,n,r,s),n.lineTo(a+c-f,l),n.quadraticCurveTo(a+c,l,a+c,l+f),o==="center"&&i==="right"&&this.drawCaret(e,n,r,s),n.lineTo(a+c,l+h-v),n.quadraticCurveTo(a+c,l+h,a+c-v,l+h),o==="bottom"&&this.drawCaret(e,n,r,s),n.lineTo(a+m,l+h),n.quadraticCurveTo(a,l+h,a,l+h-m),o==="center"&&i==="left"&&this.drawCaret(e,n,r,s),n.lineTo(a,l+d),n.quadraticCurveTo(a,l,a+d,l),n.closePath(),n.fill(),s.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,r=this.$animations,s=r&&r.x,i=r&&r.y;if(s||i){const o=$a[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=uE(this,e),l=Object.assign({},o,this._size),c=hE(n,e,l),h=dE(e,l,c,n);(s._to!==h.x||i._to!==h.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const s={width:this.width,height:this.height},i={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=Dn(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=r,this.drawBackground(i,e,s,n),dk(e,n.textDirection),i.y+=o.top,this.drawTitle(i,e,n),this.drawBody(i,e,n),this.drawFooter(i,e,n),fk(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const r=this._active,s=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),i=!Oh(r,s),o=this._positionChanged(s,n);(i||o)&&(this._active=s,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,i=this._active||[],o=this._getActiveElements(e,i,n,r),a=this._positionChanged(o,e),l=n||!Oh(o,i)||a;return l&&(this._active=o,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,r,s){const i=this.options;if(e.type==="mouseout")return[];if(!s)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,i.mode,i,r);return i.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:r,caretY:s,options:i}=this,o=$a[i.position].call(this,e,n);return o!==!1&&(r!==o.x||s!==o.y)}}z(zm,"positioners",$a);var m5={id:"tooltip",_element:zm,positioners:$a,afterInit(t,e,n){n&&(t.tooltip=new zm({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Mk},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const g5=(t,e,n,r)=>(typeof e=="string"?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function y5(t,e,n,r){const s=t.indexOf(e);if(s===-1)return g5(t,e,n,r);const i=t.lastIndexOf(e);return s!==i?n:s}const _5=(t,e)=>t===null?null:hn(Math.round(t),0,e);function mE(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class Bm extends Jo{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:s,label:i}of n)r[s]===i&&r.splice(s,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(Te(e))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===e?n:y5(r,e,ce(n,e),this._addedLabels),_5(n,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),n||(s=this.getLabels().length-1)),this.min=r,this.max=s}buildTicks(){const e=this.min,n=this.max,r=this.options.offset,s=[];let i=this.getLabels();i=e===0&&n===i.length-1?i:i.slice(e,n+1),this._valueRange=Math.max(i.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=n;o++)s.push({value:o});return s}getLabelForValue(e){return mE.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}z(Bm,"id","category"),z(Bm,"defaults",{ticks:{callback:mE}});function v5(t,e){const n=[],{bounds:s,step:i,min:o,max:a,precision:l,count:c,maxTicks:h,maxDigits:d,includeBounds:f}=t,m=i||1,v=h-1,{min:w,max:T}=e,_=!Te(o),x=!Te(a),b=!Te(c),R=(T-w)/(d+1);let D=mx((T-w)/v/m)*m,L,I,y,k;if(D<1e-14&&!_&&!x)return[{value:w},{value:T}];k=Math.ceil(T/D)-Math.floor(w/D),k>v&&(D=mx(k*D/v/m)*m),Te(l)||(L=Math.pow(10,l),D=Math.ceil(D*L)/L),s==="ticks"?(I=Math.floor(w/D)*D,y=Math.ceil(T/D)*D):(I=w,y=T),_&&x&&i&&Hj((a-o)/i,D/1e3)?(k=Math.round(Math.min((a-o)/D,h)),D=(a-o)/k,I=o,y=a):b?(I=_?o:I,y=x?a:y,k=c-1,D=(y-I)/k):(k=(y-I)/D,cl(k,Math.round(k),D/1e3)?k=Math.round(k):k=Math.ceil(k));const P=Math.max(gx(D),gx(I));L=Math.pow(10,Te(l)?P:l),I=Math.round(I*L)/L,y=Math.round(y*L)/L;let A=0;for(_&&(f&&I!==o?(n.push({value:o}),I<o&&A++,cl(Math.round((I+A*D)*L)/L,o,gE(o,R,t))&&A++):I<o&&A++);A<k;++A){const N=Math.round((I+A*D)*L)/L;if(x&&N>a)break;n.push({value:N})}return x&&f&&y!==a?n.length&&cl(n[n.length-1].value,a,gE(a,R,t))?n[n.length-1].value=a:n.push({value:a}):(!x||y===a)&&n.push({value:y}),n}function gE(t,e,{horizontal:n,minRotation:r}){const s=ii(r),i=(n?Math.sin(s):Math.cos(s))||.001,o=.75*e*(""+t).length;return Math.min(e/i,o)}class w5 extends Jo{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return Te(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:s,max:i}=this;const o=l=>s=n?s:l,a=l=>i=r?i:l;if(e){const l=Mo(s),c=Mo(i);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(s===i){let l=i===0?1:Math.abs(i*.05);a(i+l),e||o(s-l)}this.min=s,this.max=i}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=e,s;return r?(s=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),n=n||11),n&&(s=Math.min(n,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const s={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},i=this._range||this,o=v5(s,i);return e.bounds==="ticks"&&$j(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const s=(r-n)/Math.max(e.length-1,1)/2;n-=s,r+=s}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(e){return rk(e,this.chart.options.locale,this.options.ticks.format)}}class Wm extends w5{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=At(e)?e:0,this.max=At(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,r=ii(this.options.ticks.minRotation),s=(e?Math.sin(r):Math.cos(r))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,i.lineHeight/s))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}z(Wm,"id","linear"),z(Wm,"defaults",{ticks:{callback:sk.formatters.numeric}});const Vd={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},zt=Object.keys(Vd);function yE(t,e){return t-e}function _E(t,e){if(Te(e))return null;const n=t._adapter,{parser:r,round:s,isoWeekday:i}=t._parseOpts;let o=e;return typeof r=="function"&&(o=r(o)),At(o)||(o=typeof r=="string"?n.parse(o,r):n.parse(o)),o===null?null:(s&&(o=s==="week"&&(Yl(i)||i===!0)?n.startOf(o,"isoWeek",i):n.startOf(o,s)),+o)}function vE(t,e,n,r){const s=zt.length;for(let i=zt.indexOf(t);i<s-1;++i){const o=Vd[zt[i]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=r)return zt[i]}return zt[s-1]}function x5(t,e,n,r,s){for(let i=zt.length-1;i>=zt.indexOf(n);i--){const o=zt[i];if(Vd[o].common&&t._adapter.diff(s,r,o)>=e-1)return o}return zt[n?zt.indexOf(n):0]}function E5(t){for(let e=zt.indexOf(t)+1,n=zt.length;e<n;++e)if(Vd[zt[e]].common)return zt[e]}function wE(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:r,hi:s}=Qy(n,e),i=n[r]>=e?n[r]:n[s];t[i]=!0}}function T5(t,e,n,r){const s=t._adapter,i=+s.startOf(e[0].value,r),o=e[e.length-1].value;let a,l;for(a=i;a<=o;a=+s.add(a,1,r))l=n[a],l>=0&&(e[l].major=!0);return e}function xE(t,e,n){const r=[],s={},i=e.length;let o,a;for(o=0;o<i;++o)a=e[o],s[a]=o,r.push({value:a,major:!1});return i===0||!n?r:T5(t,r,s,n)}class Ql extends Jo{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const r=e.time||(e.time={}),s=this._adapter=new wk._date(e.adapters.date);s.init(n),ll(r.displayFormats,s.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:_E(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,r=e.time.unit||"day";let{min:s,max:i,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(s=Math.min(s,c.min)),!a&&!isNaN(c.max)&&(i=Math.max(i,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),s=At(s)&&!isNaN(s)?s:+n.startOf(Date.now(),r),i=At(i)&&!isNaN(i)?i:+n.endOf(Date.now(),r)+1,this.min=Math.min(s,i-1),this.max=Math.max(s+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){const e=this.options,n=e.time,r=e.ticks,s=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const i=this.min,o=this.max,a=Xj(s,i,o);return this._unit=n.unit||(r.autoSkip?vE(n.minUnit,this.min,this.max,this._getLabelCapacity(i)):x5(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:E5(this._unit),this.initOffsets(s),e.reverse&&a.reverse(),xE(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,r=0,s,i;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),e.length===1?n=1-s:n=(this.getDecimalForValue(e[1])-s)/2,i=this.getDecimalForValue(e[e.length-1]),e.length===1?r=i:r=(i-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=hn(n,0,o),r=hn(r,0,o),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,n=this.min,r=this.max,s=this.options,i=s.time,o=i.unit||vE(i.minUnit,n,r,this._getLabelCapacity(n)),a=ce(s.ticks.stepSize,1),l=o==="week"?i.isoWeekday:!1,c=Yl(l)||l===!0,h={};let d=n,f,m;if(c&&(d=+e.startOf(d,"isoWeek",l)),d=+e.startOf(d,c?"day":o),e.diff(r,n,o)>1e5*a)throw new Error(n+" and "+r+" are too far apart with stepSize of "+a+" "+o);const v=s.ticks.source==="data"&&this.getDataTimestamps();for(f=d,m=0;f<r;f=+e.add(f,a,o),m++)wE(h,f,v);return(f===r||s.bounds==="ticks"||m===1)&&wE(h,f,v),Object.keys(h).sort(yE).map(w=>+w)}getLabelForValue(e){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(e,r.tooltipFormat):n.format(e,r.displayFormats.datetime)}format(e,n){const s=this.options.time.displayFormats,i=this._unit,o=n||s[i];return this._adapter.format(e,o)}_tickFormatFunction(e,n,r,s){const i=this.options,o=i.ticks.callback;if(o)return Se(o,[e,n,r],this);const a=i.time.displayFormats,l=this._unit,c=this._majorUnit,h=l&&a[l],d=c&&a[c],f=r[n],m=c&&d&&f&&f.major;return this._adapter.format(e,s||(m?d:h))}generateTickLabels(e){let n,r,s;for(n=0,r=e.length;n<r;++n)s=e[n],s.label=this._tickFormatFunction(s.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,r=this.ctx.measureText(e).width,s=ii(this.isHorizontal()?n.maxRotation:n.minRotation),i=Math.cos(s),o=Math.sin(s),a=this._resolveTickFontOptions(0).size;return{w:r*i+a*o,h:r*o+a*i}}_getLabelCapacity(e){const n=this.options.time,r=n.displayFormats,s=r[n.unit]||r.millisecond,i=this._tickFormatFunction(e,0,xE(this,[e],this._majorUnit),s),o=this._getLabelSize(i),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,r;if(e.length)return e;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(n=0,r=s.length;n<r;++n)e=e.concat(s[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,r;if(e.length)return e;const s=this.getLabels();for(n=0,r=s.length;n<r;++n)e.push(_E(this,s[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return Zj(e.sort(yE))}}z(Ql,"id","time"),z(Ql,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function pu(t,e,n){let r=0,s=t.length-1,i,o,a,l;n?(e>=t[r].pos&&e<=t[s].pos&&({lo:r,hi:s}=oi(t,"pos",e)),{pos:i,time:a}=t[r],{pos:o,time:l}=t[s]):(e>=t[r].time&&e<=t[s].time&&({lo:r,hi:s}=oi(t,"time",e)),{time:i,pos:a}=t[r],{time:o,pos:l}=t[s]);const c=o-i;return c?a+(l-a)*(e-i)/c:a}class EE extends Ql{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=pu(n,this.min),this._tableRange=pu(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:r}=this,s=[],i=[];let o,a,l,c,h;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=r&&s.push(c);if(s.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(o=0,a=s.length;o<a;++o)h=s[o+1],l=s[o-1],c=s[o],Math.round((h+l)/2)!==c&&i.push({time:c,pos:o/(a-1)});return i}_generate(){const e=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((s,i)=>s-i)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?e=this.normalize(n.concat(r)):e=n.length?n:r,e=this._cache.all=e,e}getDecimalForValue(e){return(pu(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return pu(this._table,r*this._tableRange+this._minPos,!0)}}z(EE,"id","timeseries"),z(EE,"defaults",Ql.defaults);const Lk=6048e5,b5=864e5,mc=6e4,gc=36e5,I5=1e3,TE=Symbol.for("constructDateFrom");function Ue(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&TE in t?t[TE](e):t instanceof Date?new t.constructor(e):new Date(e)}function te(t,e){return Ue(e||t,t)}function Fd(t,e,n){const r=te(t,n==null?void 0:n.in);return isNaN(e)?Ue((n==null?void 0:n.in)||t,NaN):(e&&r.setDate(r.getDate()+e),r)}function s_(t,e,n){const r=te(t,n==null?void 0:n.in);if(isNaN(e))return Ue(t,NaN);if(!e)return r;const s=r.getDate(),i=Ue(t,r.getTime());i.setMonth(r.getMonth()+e+1,0);const o=i.getDate();return s>=o?i:(r.setFullYear(i.getFullYear(),i.getMonth(),s),r)}function i_(t,e,n){return Ue(t,+te(t)+e)}function S5(t,e,n){return i_(t,e*gc)}let k5={};function Ni(){return k5}function ir(t,e){var a,l,c,h;const n=Ni(),r=(e==null?void 0:e.weekStartsOn)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((h=(c=n.locale)==null?void 0:c.options)==null?void 0:h.weekStartsOn)??0,s=te(t,e==null?void 0:e.in),i=s.getDay(),o=(i<r?7:0)+i-r;return s.setDate(s.getDate()-o),s.setHours(0,0,0,0),s}function Fo(t,e){return ir(t,{...e,weekStartsOn:1})}function Vk(t,e){const n=te(t,e==null?void 0:e.in),r=n.getFullYear(),s=Ue(n,0);s.setFullYear(r+1,0,4),s.setHours(0,0,0,0);const i=Fo(s),o=Ue(n,0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);const a=Fo(o);return n.getTime()>=i.getTime()?r+1:n.getTime()>=a.getTime()?r:r-1}function Bh(t){const e=te(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function Di(t,...e){const n=Ue.bind(null,e.find(r=>typeof r=="object"));return e.map(n)}function Hm(t,e){const n=te(t,e==null?void 0:e.in);return n.setHours(0,0,0,0),n}function Fk(t,e,n){const[r,s]=Di(n==null?void 0:n.in,t,e),i=Hm(r),o=Hm(s),a=+i-Bh(i),l=+o-Bh(o);return Math.round((a-l)/b5)}function P5(t,e){const n=Vk(t,e),r=Ue(t,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),Fo(r)}function A5(t,e,n){const r=te(t,n==null?void 0:n.in);return r.setTime(r.getTime()+e*mc),r}function C5(t,e,n){return s_(t,e*3,n)}function R5(t,e,n){return i_(t,e*1e3)}function N5(t,e,n){return Fd(t,e*7,n)}function D5(t,e,n){return s_(t,e*12,n)}function pl(t,e){const n=+te(t)-+te(e);return n<0?-1:n>0?1:n}function O5(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function jk(t){return!(!O5(t)&&typeof t!="number"||isNaN(+te(t)))}function M5(t,e,n){const[r,s]=Di(n==null?void 0:n.in,t,e),i=r.getFullYear()-s.getFullYear(),o=r.getMonth()-s.getMonth();return i*12+o}function L5(t,e,n){const[r,s]=Di(n==null?void 0:n.in,t,e);return r.getFullYear()-s.getFullYear()}function Uk(t,e,n){const[r,s]=Di(n==null?void 0:n.in,t,e),i=bE(r,s),o=Math.abs(Fk(r,s));r.setDate(r.getDate()-i*o);const a=+(bE(r,s)===-i),l=i*(o-a);return l===0?0:l}function bE(t,e){const n=t.getFullYear()-e.getFullYear()||t.getMonth()-e.getMonth()||t.getDate()-e.getDate()||t.getHours()-e.getHours()||t.getMinutes()-e.getMinutes()||t.getSeconds()-e.getSeconds()||t.getMilliseconds()-e.getMilliseconds();return n<0?-1:n>0?1:n}function yc(t){return e=>{const r=(t?Math[t]:Math.trunc)(e);return r===0?0:r}}function V5(t,e,n){const[r,s]=Di(n==null?void 0:n.in,t,e),i=(+r-+s)/gc;return yc(n==null?void 0:n.roundingMethod)(i)}function o_(t,e){return+te(t)-+te(e)}function F5(t,e,n){const r=o_(t,e)/mc;return yc(n==null?void 0:n.roundingMethod)(r)}function zk(t,e){const n=te(t,e==null?void 0:e.in);return n.setHours(23,59,59,999),n}function Bk(t,e){const n=te(t,e==null?void 0:e.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function j5(t,e){const n=te(t,e==null?void 0:e.in);return+zk(n,e)==+Bk(n,e)}function Wk(t,e,n){const[r,s,i]=Di(n==null?void 0:n.in,t,t,e),o=pl(s,i),a=Math.abs(M5(s,i));if(a<1)return 0;s.getMonth()===1&&s.getDate()>27&&s.setDate(30),s.setMonth(s.getMonth()-o*a);let l=pl(s,i)===-o;j5(r)&&a===1&&pl(r,i)===1&&(l=!1);const c=o*(a-+l);return c===0?0:c}function U5(t,e,n){const r=Wk(t,e,n)/3;return yc(n==null?void 0:n.roundingMethod)(r)}function z5(t,e,n){const r=o_(t,e)/1e3;return yc(n==null?void 0:n.roundingMethod)(r)}function B5(t,e,n){const r=Uk(t,e,n)/7;return yc(n==null?void 0:n.roundingMethod)(r)}function W5(t,e,n){const[r,s]=Di(n==null?void 0:n.in,t,e),i=pl(r,s),o=Math.abs(L5(r,s));r.setFullYear(1584),s.setFullYear(1584);const a=pl(r,s)===-i,l=i*(o-+a);return l===0?0:l}function H5(t,e){const n=te(t,e==null?void 0:e.in),r=n.getMonth(),s=r-r%3;return n.setMonth(s,1),n.setHours(0,0,0,0),n}function $5(t,e){const n=te(t,e==null?void 0:e.in);return n.setDate(1),n.setHours(0,0,0,0),n}function q5(t,e){const n=te(t,e==null?void 0:e.in),r=n.getFullYear();return n.setFullYear(r+1,0,0),n.setHours(23,59,59,999),n}function Hk(t,e){const n=te(t,e==null?void 0:e.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}function Y5(t,e){const n=te(t,e==null?void 0:e.in);return n.setMinutes(59,59,999),n}function G5(t,e){var a,l;const n=Ni(),r=n.weekStartsOn??((l=(a=n.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??0,s=te(t,e==null?void 0:e.in),i=s.getDay(),o=(i<r?-7:0)+6-(i-r);return s.setDate(s.getDate()+o),s.setHours(23,59,59,999),s}function K5(t,e){const n=te(t,e==null?void 0:e.in);return n.setSeconds(59,999),n}function Q5(t,e){const n=te(t,e==null?void 0:e.in),r=n.getMonth(),s=r-r%3+3;return n.setMonth(s,0),n.setHours(23,59,59,999),n}function X5(t,e){const n=te(t,e==null?void 0:e.in);return n.setMilliseconds(999),n}const J5={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Z5=(t,e,n)=>{let r;const s=J5[t];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function ip(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const e9={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},t9={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},n9={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},r9={date:ip({formats:e9,defaultWidth:"full"}),time:ip({formats:t9,defaultWidth:"full"}),dateTime:ip({formats:n9,defaultWidth:"full"})},s9={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},i9=(t,e,n,r)=>s9[t];function Ra(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let s;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,a=n!=null&&n.width?String(n.width):o;s=t.formattingValues[a]||t.formattingValues[o]}else{const o=t.defaultWidth,a=n!=null&&n.width?String(n.width):t.defaultWidth;s=t.values[a]||t.values[o]}const i=t.argumentCallback?t.argumentCallback(e):e;return s[i]}}const o9={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},a9={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},l9={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},c9={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},u9={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},h9={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},d9=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},f9={ordinalNumber:d9,era:Ra({values:o9,defaultWidth:"wide"}),quarter:Ra({values:a9,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Ra({values:l9,defaultWidth:"wide"}),day:Ra({values:c9,defaultWidth:"wide"}),dayPeriod:Ra({values:u9,defaultWidth:"wide",formattingValues:h9,defaultFormattingWidth:"wide"})};function Na(t){return(e,n={})=>{const r=n.width,s=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],i=e.match(s);if(!i)return null;const o=i[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?m9(a,d=>d.test(o)):p9(a,d=>d.test(o));let c;c=t.valueCallback?t.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;const h=e.slice(o.length);return{value:c,rest:h}}}function p9(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function m9(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function g9(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const s=r[0],i=e.match(t.parsePattern);if(!i)return null;let o=t.valueCallback?t.valueCallback(i[0]):i[0];o=n.valueCallback?n.valueCallback(o):o;const a=e.slice(s.length);return{value:o,rest:a}}}const y9=/^(\d+)(th|st|nd|rd)?/i,_9=/\d+/i,v9={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},w9={any:[/^b/i,/^(a|c)/i]},x9={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},E9={any:[/1/i,/2/i,/3/i,/4/i]},T9={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},b9={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},I9={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},S9={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},k9={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},P9={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},A9={ordinalNumber:g9({matchPattern:y9,parsePattern:_9,valueCallback:t=>parseInt(t,10)}),era:Na({matchPatterns:v9,defaultMatchWidth:"wide",parsePatterns:w9,defaultParseWidth:"any"}),quarter:Na({matchPatterns:x9,defaultMatchWidth:"wide",parsePatterns:E9,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Na({matchPatterns:T9,defaultMatchWidth:"wide",parsePatterns:b9,defaultParseWidth:"any"}),day:Na({matchPatterns:I9,defaultMatchWidth:"wide",parsePatterns:S9,defaultParseWidth:"any"}),dayPeriod:Na({matchPatterns:k9,defaultMatchWidth:"any",parsePatterns:P9,defaultParseWidth:"any"})},$k={code:"en-US",formatDistance:Z5,formatLong:r9,formatRelative:i9,localize:f9,match:A9,options:{weekStartsOn:0,firstWeekContainsDate:1}};function C9(t,e){const n=te(t,e==null?void 0:e.in);return Fk(n,Hk(n))+1}function qk(t,e){const n=te(t,e==null?void 0:e.in),r=+Fo(n)-+P5(n);return Math.round(r/Lk)+1}function a_(t,e){var h,d,f,m;const n=te(t,e==null?void 0:e.in),r=n.getFullYear(),s=Ni(),i=(e==null?void 0:e.firstWeekContainsDate)??((d=(h=e==null?void 0:e.locale)==null?void 0:h.options)==null?void 0:d.firstWeekContainsDate)??s.firstWeekContainsDate??((m=(f=s.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??1,o=Ue((e==null?void 0:e.in)||t,0);o.setFullYear(r+1,0,i),o.setHours(0,0,0,0);const a=ir(o,e),l=Ue((e==null?void 0:e.in)||t,0);l.setFullYear(r,0,i),l.setHours(0,0,0,0);const c=ir(l,e);return+n>=+a?r+1:+n>=+c?r:r-1}function R9(t,e){var a,l,c,h;const n=Ni(),r=(e==null?void 0:e.firstWeekContainsDate)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.firstWeekContainsDate)??n.firstWeekContainsDate??((h=(c=n.locale)==null?void 0:c.options)==null?void 0:h.firstWeekContainsDate)??1,s=a_(t,e),i=Ue((e==null?void 0:e.in)||t,0);return i.setFullYear(s,0,r),i.setHours(0,0,0,0),ir(i,e)}function Yk(t,e){const n=te(t,e==null?void 0:e.in),r=+ir(n,e)-+R9(n,e);return Math.round(r/Lk)+1}function ge(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const Br={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return ge(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):ge(n+1,2)},d(t,e){return ge(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return ge(t.getHours()%12||12,e.length)},H(t,e){return ge(t.getHours(),e.length)},m(t,e){return ge(t.getMinutes(),e.length)},s(t,e){return ge(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),s=Math.trunc(r*Math.pow(10,n-3));return ge(s,e.length)}},Ui={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},IE={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),s=r>0?r:1-r;return n.ordinalNumber(s,{unit:"year"})}return Br.y(t,e)},Y:function(t,e,n,r){const s=a_(t,r),i=s>0?s:1-s;if(e==="YY"){const o=i%100;return ge(o,2)}return e==="Yo"?n.ordinalNumber(i,{unit:"year"}):ge(i,e.length)},R:function(t,e){const n=Vk(t);return ge(n,e.length)},u:function(t,e){const n=t.getFullYear();return ge(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return ge(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return ge(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return Br.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return ge(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const s=Yk(t,r);return e==="wo"?n.ordinalNumber(s,{unit:"week"}):ge(s,e.length)},I:function(t,e,n){const r=qk(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):ge(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Br.d(t,e)},D:function(t,e,n){const r=C9(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):ge(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const s=t.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return ge(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const s=t.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return ge(i,e.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),s=r===0?7:r;switch(e){case"i":return String(s);case"ii":return ge(s,e.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let s;switch(r===12?s=Ui.noon:r===0?s=Ui.midnight:s=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let s;switch(r>=17?s=Ui.evening:r>=12?s=Ui.afternoon:r>=4?s=Ui.morning:s=Ui.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Br.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Br.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):ge(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):ge(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Br.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Br.s(t,e)},S:function(t,e){return Br.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return kE(r);case"XXXX":case"XX":return ei(r);case"XXXXX":case"XXX":default:return ei(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return kE(r);case"xxxx":case"xx":return ei(r);case"xxxxx":case"xxx":default:return ei(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+SE(r,":");case"OOOO":default:return"GMT"+ei(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+SE(r,":");case"zzzz":default:return"GMT"+ei(r,":")}},t:function(t,e,n){const r=Math.trunc(+t/1e3);return ge(r,e.length)},T:function(t,e,n){return ge(+t,e.length)}};function SE(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=Math.trunc(r/60),i=r%60;return i===0?n+String(s):n+String(s)+e+ge(i,2)}function kE(t,e){return t%60===0?(t>0?"-":"+")+ge(Math.abs(t)/60,2):ei(t,e)}function ei(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=ge(Math.trunc(r/60),2),i=ge(r%60,2);return n+s+e+i}const PE=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},Gk=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},N9=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return PE(t,e);let i;switch(r){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",PE(r,e)).replace("{{time}}",Gk(s,e))},$m={p:Gk,P:N9},D9=/^D+$/,O9=/^Y+$/,M9=["D","DD","YY","YYYY"];function Kk(t){return D9.test(t)}function Qk(t){return O9.test(t)}function qm(t,e,n){const r=L9(t,e,n);if(console.warn(r),M9.includes(t))throw new RangeError(r)}function L9(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const V9=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,F9=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,j9=/^'([^]*?)'?$/,U9=/''/g,z9=/[a-zA-Z]/;function B9(t,e,n){var h,d,f,m,v,w,T,_;const r=Ni(),s=(n==null?void 0:n.locale)??r.locale??$k,i=(n==null?void 0:n.firstWeekContainsDate)??((d=(h=n==null?void 0:n.locale)==null?void 0:h.options)==null?void 0:d.firstWeekContainsDate)??r.firstWeekContainsDate??((m=(f=r.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??1,o=(n==null?void 0:n.weekStartsOn)??((w=(v=n==null?void 0:n.locale)==null?void 0:v.options)==null?void 0:w.weekStartsOn)??r.weekStartsOn??((_=(T=r.locale)==null?void 0:T.options)==null?void 0:_.weekStartsOn)??0,a=te(t,n==null?void 0:n.in);if(!jk(a))throw new RangeError("Invalid time value");let l=e.match(F9).map(x=>{const b=x[0];if(b==="p"||b==="P"){const R=$m[b];return R(x,s.formatLong)}return x}).join("").match(V9).map(x=>{if(x==="''")return{isToken:!1,value:"'"};const b=x[0];if(b==="'")return{isToken:!1,value:W9(x)};if(IE[b])return{isToken:!0,value:x};if(b.match(z9))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");return{isToken:!1,value:x}});s.localize.preprocessor&&(l=s.localize.preprocessor(a,l));const c={firstWeekContainsDate:i,weekStartsOn:o,locale:s};return l.map(x=>{if(!x.isToken)return x.value;const b=x.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&Qk(b)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&Kk(b))&&qm(b,e,String(t));const R=IE[b[0]];return R(a,b,s.localize,c)}).join("")}function W9(t){const e=t.match(j9);return e?e[1].replace(U9,"'"):t}function H9(){return Object.assign({},Ni())}function $9(t,e){const n=te(t,e==null?void 0:e.in).getDay();return n===0?7:n}function q9(t,e){const n=Y9(e)?new e(0):Ue(e,0);return n.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),n.setHours(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()),n}function Y9(t){var e;return typeof t=="function"&&((e=t.prototype)==null?void 0:e.constructor)===t}const G9=10;class Xk{constructor(){z(this,"subPriority",0)}validate(e,n){return!0}}class K9 extends Xk{constructor(e,n,r,s,i){super(),this.value=e,this.validateValue=n,this.setValue=r,this.priority=s,i&&(this.subPriority=i)}validate(e,n){return this.validateValue(e,this.value,n)}set(e,n,r){return this.setValue(e,n,this.value,r)}}class Q9 extends Xk{constructor(n,r){super();z(this,"priority",G9);z(this,"subPriority",-1);this.context=n||(s=>Ue(r,s))}set(n,r){return r.timestampIsSet?n:Ue(n,q9(n,this.context))}}class pe{run(e,n,r,s){const i=this.parse(e,n,r,s);return i?{setter:new K9(i.value,this.validate,this.set,this.priority,this.subPriority),rest:i.rest}:null}validate(e,n,r){return!0}}class X9 extends pe{constructor(){super(...arguments);z(this,"priority",140);z(this,"incompatibleTokens",["R","u","t","T"])}parse(n,r,s){switch(r){case"G":case"GG":case"GGG":return s.era(n,{width:"abbreviated"})||s.era(n,{width:"narrow"});case"GGGGG":return s.era(n,{width:"narrow"});case"GGGG":default:return s.era(n,{width:"wide"})||s.era(n,{width:"abbreviated"})||s.era(n,{width:"narrow"})}}set(n,r,s){return r.era=s,n.setFullYear(s,0,1),n.setHours(0,0,0,0),n}}const Ye={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Hn={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Ge(t,e){return t&&{value:e(t.value),rest:t.rest}}function Re(t,e){const n=e.match(t);return n?{value:parseInt(n[0],10),rest:e.slice(n[0].length)}:null}function $n(t,e){const n=e.match(t);if(!n)return null;if(n[0]==="Z")return{value:0,rest:e.slice(1)};const r=n[1]==="+"?1:-1,s=n[2]?parseInt(n[2],10):0,i=n[3]?parseInt(n[3],10):0,o=n[5]?parseInt(n[5],10):0;return{value:r*(s*gc+i*mc+o*I5),rest:e.slice(n[0].length)}}function Jk(t){return Re(Ye.anyDigitsSigned,t)}function ze(t,e){switch(t){case 1:return Re(Ye.singleDigit,e);case 2:return Re(Ye.twoDigits,e);case 3:return Re(Ye.threeDigits,e);case 4:return Re(Ye.fourDigits,e);default:return Re(new RegExp("^\\d{1,"+t+"}"),e)}}function Wh(t,e){switch(t){case 1:return Re(Ye.singleDigitSigned,e);case 2:return Re(Ye.twoDigitsSigned,e);case 3:return Re(Ye.threeDigitsSigned,e);case 4:return Re(Ye.fourDigitsSigned,e);default:return Re(new RegExp("^-?\\d{1,"+t+"}"),e)}}function l_(t){switch(t){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function Zk(t,e){const n=e>0,r=n?e:1-e;let s;if(r<=50)s=t||100;else{const i=r+50,o=Math.trunc(i/100)*100,a=t>=i%100;s=t+o-(a?100:0)}return n?s:1-s}function eP(t){return t%400===0||t%4===0&&t%100!==0}class J9 extends pe{constructor(){super(...arguments);z(this,"priority",130);z(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(n,r,s){const i=o=>({year:o,isTwoDigitYear:r==="yy"});switch(r){case"y":return Ge(ze(4,n),i);case"yo":return Ge(s.ordinalNumber(n,{unit:"year"}),i);default:return Ge(ze(r.length,n),i)}}validate(n,r){return r.isTwoDigitYear||r.year>0}set(n,r,s){const i=n.getFullYear();if(s.isTwoDigitYear){const a=Zk(s.year,i);return n.setFullYear(a,0,1),n.setHours(0,0,0,0),n}const o=!("era"in r)||r.era===1?s.year:1-s.year;return n.setFullYear(o,0,1),n.setHours(0,0,0,0),n}}class Z9 extends pe{constructor(){super(...arguments);z(this,"priority",130);z(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(n,r,s){const i=o=>({year:o,isTwoDigitYear:r==="YY"});switch(r){case"Y":return Ge(ze(4,n),i);case"Yo":return Ge(s.ordinalNumber(n,{unit:"year"}),i);default:return Ge(ze(r.length,n),i)}}validate(n,r){return r.isTwoDigitYear||r.year>0}set(n,r,s,i){const o=a_(n,i);if(s.isTwoDigitYear){const l=Zk(s.year,o);return n.setFullYear(l,0,i.firstWeekContainsDate),n.setHours(0,0,0,0),ir(n,i)}const a=!("era"in r)||r.era===1?s.year:1-s.year;return n.setFullYear(a,0,i.firstWeekContainsDate),n.setHours(0,0,0,0),ir(n,i)}}class ez extends pe{constructor(){super(...arguments);z(this,"priority",130);z(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(n,r){return Wh(r==="R"?4:r.length,n)}set(n,r,s){const i=Ue(n,0);return i.setFullYear(s,0,4),i.setHours(0,0,0,0),Fo(i)}}class tz extends pe{constructor(){super(...arguments);z(this,"priority",130);z(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(n,r){return Wh(r==="u"?4:r.length,n)}set(n,r,s){return n.setFullYear(s,0,1),n.setHours(0,0,0,0),n}}class nz extends pe{constructor(){super(...arguments);z(this,"priority",120);z(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(n,r,s){switch(r){case"Q":case"QQ":return ze(r.length,n);case"Qo":return s.ordinalNumber(n,{unit:"quarter"});case"QQQ":return s.quarter(n,{width:"abbreviated",context:"formatting"})||s.quarter(n,{width:"narrow",context:"formatting"});case"QQQQQ":return s.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return s.quarter(n,{width:"wide",context:"formatting"})||s.quarter(n,{width:"abbreviated",context:"formatting"})||s.quarter(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=1&&r<=4}set(n,r,s){return n.setMonth((s-1)*3,1),n.setHours(0,0,0,0),n}}class rz extends pe{constructor(){super(...arguments);z(this,"priority",120);z(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(n,r,s){switch(r){case"q":case"qq":return ze(r.length,n);case"qo":return s.ordinalNumber(n,{unit:"quarter"});case"qqq":return s.quarter(n,{width:"abbreviated",context:"standalone"})||s.quarter(n,{width:"narrow",context:"standalone"});case"qqqqq":return s.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return s.quarter(n,{width:"wide",context:"standalone"})||s.quarter(n,{width:"abbreviated",context:"standalone"})||s.quarter(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=1&&r<=4}set(n,r,s){return n.setMonth((s-1)*3,1),n.setHours(0,0,0,0),n}}class sz extends pe{constructor(){super(...arguments);z(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);z(this,"priority",110)}parse(n,r,s){const i=o=>o-1;switch(r){case"M":return Ge(Re(Ye.month,n),i);case"MM":return Ge(ze(2,n),i);case"Mo":return Ge(s.ordinalNumber(n,{unit:"month"}),i);case"MMM":return s.month(n,{width:"abbreviated",context:"formatting"})||s.month(n,{width:"narrow",context:"formatting"});case"MMMMM":return s.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return s.month(n,{width:"wide",context:"formatting"})||s.month(n,{width:"abbreviated",context:"formatting"})||s.month(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=11}set(n,r,s){return n.setMonth(s,1),n.setHours(0,0,0,0),n}}class iz extends pe{constructor(){super(...arguments);z(this,"priority",110);z(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(n,r,s){const i=o=>o-1;switch(r){case"L":return Ge(Re(Ye.month,n),i);case"LL":return Ge(ze(2,n),i);case"Lo":return Ge(s.ordinalNumber(n,{unit:"month"}),i);case"LLL":return s.month(n,{width:"abbreviated",context:"standalone"})||s.month(n,{width:"narrow",context:"standalone"});case"LLLLL":return s.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return s.month(n,{width:"wide",context:"standalone"})||s.month(n,{width:"abbreviated",context:"standalone"})||s.month(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=0&&r<=11}set(n,r,s){return n.setMonth(s,1),n.setHours(0,0,0,0),n}}function oz(t,e,n){const r=te(t,n==null?void 0:n.in),s=Yk(r,n)-e;return r.setDate(r.getDate()-s*7),te(r,n==null?void 0:n.in)}class az extends pe{constructor(){super(...arguments);z(this,"priority",100);z(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(n,r,s){switch(r){case"w":return Re(Ye.week,n);case"wo":return s.ordinalNumber(n,{unit:"week"});default:return ze(r.length,n)}}validate(n,r){return r>=1&&r<=53}set(n,r,s,i){return ir(oz(n,s,i),i)}}function lz(t,e,n){const r=te(t,n==null?void 0:n.in),s=qk(r,n)-e;return r.setDate(r.getDate()-s*7),r}class cz extends pe{constructor(){super(...arguments);z(this,"priority",100);z(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(n,r,s){switch(r){case"I":return Re(Ye.week,n);case"Io":return s.ordinalNumber(n,{unit:"week"});default:return ze(r.length,n)}}validate(n,r){return r>=1&&r<=53}set(n,r,s){return Fo(lz(n,s))}}const uz=[31,28,31,30,31,30,31,31,30,31,30,31],hz=[31,29,31,30,31,30,31,31,30,31,30,31];class dz extends pe{constructor(){super(...arguments);z(this,"priority",90);z(this,"subPriority",1);z(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(n,r,s){switch(r){case"d":return Re(Ye.date,n);case"do":return s.ordinalNumber(n,{unit:"date"});default:return ze(r.length,n)}}validate(n,r){const s=n.getFullYear(),i=eP(s),o=n.getMonth();return i?r>=1&&r<=hz[o]:r>=1&&r<=uz[o]}set(n,r,s){return n.setDate(s),n.setHours(0,0,0,0),n}}class fz extends pe{constructor(){super(...arguments);z(this,"priority",90);z(this,"subpriority",1);z(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(n,r,s){switch(r){case"D":case"DD":return Re(Ye.dayOfYear,n);case"Do":return s.ordinalNumber(n,{unit:"date"});default:return ze(r.length,n)}}validate(n,r){const s=n.getFullYear();return eP(s)?r>=1&&r<=366:r>=1&&r<=365}set(n,r,s){return n.setMonth(0,s),n.setHours(0,0,0,0),n}}function c_(t,e,n){var d,f,m,v;const r=Ni(),s=(n==null?void 0:n.weekStartsOn)??((f=(d=n==null?void 0:n.locale)==null?void 0:d.options)==null?void 0:f.weekStartsOn)??r.weekStartsOn??((v=(m=r.locale)==null?void 0:m.options)==null?void 0:v.weekStartsOn)??0,i=te(t,n==null?void 0:n.in),o=i.getDay(),l=(e%7+7)%7,c=7-s,h=e<0||e>6?e-(o+c)%7:(l+c)%7-(o+c)%7;return Fd(i,h,n)}class pz extends pe{constructor(){super(...arguments);z(this,"priority",90);z(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(n,r,s){switch(r){case"E":case"EE":case"EEE":return s.day(n,{width:"abbreviated",context:"formatting"})||s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"});case"EEEEE":return s.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"});case"EEEE":default:return s.day(n,{width:"wide",context:"formatting"})||s.day(n,{width:"abbreviated",context:"formatting"})||s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=6}set(n,r,s,i){return n=c_(n,s,i),n.setHours(0,0,0,0),n}}class mz extends pe{constructor(){super(...arguments);z(this,"priority",90);z(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(n,r,s,i){const o=a=>{const l=Math.floor((a-1)/7)*7;return(a+i.weekStartsOn+6)%7+l};switch(r){case"e":case"ee":return Ge(ze(r.length,n),o);case"eo":return Ge(s.ordinalNumber(n,{unit:"day"}),o);case"eee":return s.day(n,{width:"abbreviated",context:"formatting"})||s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"});case"eeeee":return s.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"});case"eeee":default:return s.day(n,{width:"wide",context:"formatting"})||s.day(n,{width:"abbreviated",context:"formatting"})||s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=6}set(n,r,s,i){return n=c_(n,s,i),n.setHours(0,0,0,0),n}}class gz extends pe{constructor(){super(...arguments);z(this,"priority",90);z(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(n,r,s,i){const o=a=>{const l=Math.floor((a-1)/7)*7;return(a+i.weekStartsOn+6)%7+l};switch(r){case"c":case"cc":return Ge(ze(r.length,n),o);case"co":return Ge(s.ordinalNumber(n,{unit:"day"}),o);case"ccc":return s.day(n,{width:"abbreviated",context:"standalone"})||s.day(n,{width:"short",context:"standalone"})||s.day(n,{width:"narrow",context:"standalone"});case"ccccc":return s.day(n,{width:"narrow",context:"standalone"});case"cccccc":return s.day(n,{width:"short",context:"standalone"})||s.day(n,{width:"narrow",context:"standalone"});case"cccc":default:return s.day(n,{width:"wide",context:"standalone"})||s.day(n,{width:"abbreviated",context:"standalone"})||s.day(n,{width:"short",context:"standalone"})||s.day(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=0&&r<=6}set(n,r,s,i){return n=c_(n,s,i),n.setHours(0,0,0,0),n}}function yz(t,e,n){const r=te(t,n==null?void 0:n.in),s=$9(r,n),i=e-s;return Fd(r,i,n)}class _z extends pe{constructor(){super(...arguments);z(this,"priority",90);z(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(n,r,s){const i=o=>o===0?7:o;switch(r){case"i":case"ii":return ze(r.length,n);case"io":return s.ordinalNumber(n,{unit:"day"});case"iii":return Ge(s.day(n,{width:"abbreviated",context:"formatting"})||s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"}),i);case"iiiii":return Ge(s.day(n,{width:"narrow",context:"formatting"}),i);case"iiiiii":return Ge(s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"}),i);case"iiii":default:return Ge(s.day(n,{width:"wide",context:"formatting"})||s.day(n,{width:"abbreviated",context:"formatting"})||s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"}),i)}}validate(n,r){return r>=1&&r<=7}set(n,r,s){return n=yz(n,s),n.setHours(0,0,0,0),n}}class vz extends pe{constructor(){super(...arguments);z(this,"priority",80);z(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(n,r,s){switch(r){case"a":case"aa":case"aaa":return s.dayPeriod(n,{width:"abbreviated",context:"formatting"})||s.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaaa":return s.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return s.dayPeriod(n,{width:"wide",context:"formatting"})||s.dayPeriod(n,{width:"abbreviated",context:"formatting"})||s.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,s){return n.setHours(l_(s),0,0,0),n}}class wz extends pe{constructor(){super(...arguments);z(this,"priority",80);z(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(n,r,s){switch(r){case"b":case"bb":case"bbb":return s.dayPeriod(n,{width:"abbreviated",context:"formatting"})||s.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbbb":return s.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return s.dayPeriod(n,{width:"wide",context:"formatting"})||s.dayPeriod(n,{width:"abbreviated",context:"formatting"})||s.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,s){return n.setHours(l_(s),0,0,0),n}}class xz extends pe{constructor(){super(...arguments);z(this,"priority",80);z(this,"incompatibleTokens",["a","b","t","T"])}parse(n,r,s){switch(r){case"B":case"BB":case"BBB":return s.dayPeriod(n,{width:"abbreviated",context:"formatting"})||s.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBBB":return s.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return s.dayPeriod(n,{width:"wide",context:"formatting"})||s.dayPeriod(n,{width:"abbreviated",context:"formatting"})||s.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,s){return n.setHours(l_(s),0,0,0),n}}class Ez extends pe{constructor(){super(...arguments);z(this,"priority",70);z(this,"incompatibleTokens",["H","K","k","t","T"])}parse(n,r,s){switch(r){case"h":return Re(Ye.hour12h,n);case"ho":return s.ordinalNumber(n,{unit:"hour"});default:return ze(r.length,n)}}validate(n,r){return r>=1&&r<=12}set(n,r,s){const i=n.getHours()>=12;return i&&s<12?n.setHours(s+12,0,0,0):!i&&s===12?n.setHours(0,0,0,0):n.setHours(s,0,0,0),n}}class Tz extends pe{constructor(){super(...arguments);z(this,"priority",70);z(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(n,r,s){switch(r){case"H":return Re(Ye.hour23h,n);case"Ho":return s.ordinalNumber(n,{unit:"hour"});default:return ze(r.length,n)}}validate(n,r){return r>=0&&r<=23}set(n,r,s){return n.setHours(s,0,0,0),n}}class bz extends pe{constructor(){super(...arguments);z(this,"priority",70);z(this,"incompatibleTokens",["h","H","k","t","T"])}parse(n,r,s){switch(r){case"K":return Re(Ye.hour11h,n);case"Ko":return s.ordinalNumber(n,{unit:"hour"});default:return ze(r.length,n)}}validate(n,r){return r>=0&&r<=11}set(n,r,s){return n.getHours()>=12&&s<12?n.setHours(s+12,0,0,0):n.setHours(s,0,0,0),n}}class Iz extends pe{constructor(){super(...arguments);z(this,"priority",70);z(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(n,r,s){switch(r){case"k":return Re(Ye.hour24h,n);case"ko":return s.ordinalNumber(n,{unit:"hour"});default:return ze(r.length,n)}}validate(n,r){return r>=1&&r<=24}set(n,r,s){const i=s<=24?s%24:s;return n.setHours(i,0,0,0),n}}class Sz extends pe{constructor(){super(...arguments);z(this,"priority",60);z(this,"incompatibleTokens",["t","T"])}parse(n,r,s){switch(r){case"m":return Re(Ye.minute,n);case"mo":return s.ordinalNumber(n,{unit:"minute"});default:return ze(r.length,n)}}validate(n,r){return r>=0&&r<=59}set(n,r,s){return n.setMinutes(s,0,0),n}}class kz extends pe{constructor(){super(...arguments);z(this,"priority",50);z(this,"incompatibleTokens",["t","T"])}parse(n,r,s){switch(r){case"s":return Re(Ye.second,n);case"so":return s.ordinalNumber(n,{unit:"second"});default:return ze(r.length,n)}}validate(n,r){return r>=0&&r<=59}set(n,r,s){return n.setSeconds(s,0),n}}class Pz extends pe{constructor(){super(...arguments);z(this,"priority",30);z(this,"incompatibleTokens",["t","T"])}parse(n,r){const s=i=>Math.trunc(i*Math.pow(10,-r.length+3));return Ge(ze(r.length,n),s)}set(n,r,s){return n.setMilliseconds(s),n}}class Az extends pe{constructor(){super(...arguments);z(this,"priority",10);z(this,"incompatibleTokens",["t","T","x"])}parse(n,r){switch(r){case"X":return $n(Hn.basicOptionalMinutes,n);case"XX":return $n(Hn.basic,n);case"XXXX":return $n(Hn.basicOptionalSeconds,n);case"XXXXX":return $n(Hn.extendedOptionalSeconds,n);case"XXX":default:return $n(Hn.extended,n)}}set(n,r,s){return r.timestampIsSet?n:Ue(n,n.getTime()-Bh(n)-s)}}class Cz extends pe{constructor(){super(...arguments);z(this,"priority",10);z(this,"incompatibleTokens",["t","T","X"])}parse(n,r){switch(r){case"x":return $n(Hn.basicOptionalMinutes,n);case"xx":return $n(Hn.basic,n);case"xxxx":return $n(Hn.basicOptionalSeconds,n);case"xxxxx":return $n(Hn.extendedOptionalSeconds,n);case"xxx":default:return $n(Hn.extended,n)}}set(n,r,s){return r.timestampIsSet?n:Ue(n,n.getTime()-Bh(n)-s)}}class Rz extends pe{constructor(){super(...arguments);z(this,"priority",40);z(this,"incompatibleTokens","*")}parse(n){return Jk(n)}set(n,r,s){return[Ue(n,s*1e3),{timestampIsSet:!0}]}}class Nz extends pe{constructor(){super(...arguments);z(this,"priority",20);z(this,"incompatibleTokens","*")}parse(n){return Jk(n)}set(n,r,s){return[Ue(n,s),{timestampIsSet:!0}]}}const Dz={G:new X9,y:new J9,Y:new Z9,R:new ez,u:new tz,Q:new nz,q:new rz,M:new sz,L:new iz,w:new az,I:new cz,d:new dz,D:new fz,E:new pz,e:new mz,c:new gz,i:new _z,a:new vz,b:new wz,B:new xz,h:new Ez,H:new Tz,K:new bz,k:new Iz,m:new Sz,s:new kz,S:new Pz,X:new Az,x:new Cz,t:new Rz,T:new Nz},Oz=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Mz=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Lz=/^'([^]*?)'?$/,Vz=/''/g,Fz=/\S/,jz=/[a-zA-Z]/;function Uz(t,e,n,r){var T,_,x,b,R,D,L,I;const s=()=>Ue((r==null?void 0:r.in)||n,NaN),i=H9(),o=(r==null?void 0:r.locale)??i.locale??$k,a=(r==null?void 0:r.firstWeekContainsDate)??((_=(T=r==null?void 0:r.locale)==null?void 0:T.options)==null?void 0:_.firstWeekContainsDate)??i.firstWeekContainsDate??((b=(x=i.locale)==null?void 0:x.options)==null?void 0:b.firstWeekContainsDate)??1,l=(r==null?void 0:r.weekStartsOn)??((D=(R=r==null?void 0:r.locale)==null?void 0:R.options)==null?void 0:D.weekStartsOn)??i.weekStartsOn??((I=(L=i.locale)==null?void 0:L.options)==null?void 0:I.weekStartsOn)??0;if(!e)return t?s():te(n,r==null?void 0:r.in);const c={firstWeekContainsDate:a,weekStartsOn:l,locale:o},h=[new Q9(r==null?void 0:r.in,n)],d=e.match(Mz).map(y=>{const k=y[0];if(k in $m){const P=$m[k];return P(y,o.formatLong)}return y}).join("").match(Oz),f=[];for(let y of d){!(r!=null&&r.useAdditionalWeekYearTokens)&&Qk(y)&&qm(y,e,t),!(r!=null&&r.useAdditionalDayOfYearTokens)&&Kk(y)&&qm(y,e,t);const k=y[0],P=Dz[k];if(P){const{incompatibleTokens:A}=P;if(Array.isArray(A)){const C=f.find(le=>A.includes(le.token)||le.token===k);if(C)throw new RangeError(`The format string mustn't contain \`${C.fullToken}\` and \`${y}\` at the same time`)}else if(P.incompatibleTokens==="*"&&f.length>0)throw new RangeError(`The format string mustn't contain \`${y}\` and any other token at the same time`);f.push({token:k,fullToken:y});const N=P.run(t,y,o.match,c);if(!N)return s();h.push(N.setter),t=N.rest}else{if(k.match(jz))throw new RangeError("Format string contains an unescaped latin alphabet character `"+k+"`");if(y==="''"?y="'":k==="'"&&(y=zz(y)),t.indexOf(y)===0)t=t.slice(y.length);else return s()}}if(t.length>0&&Fz.test(t))return s();const m=h.map(y=>y.priority).sort((y,k)=>k-y).filter((y,k,P)=>P.indexOf(y)===k).map(y=>h.filter(k=>k.priority===y).sort((k,P)=>P.subPriority-k.subPriority)).map(y=>y[0]);let v=te(n,r==null?void 0:r.in);if(isNaN(+v))return s();const w={};for(const y of m){if(!y.validate(v,c))return s();const k=y.set(v,w,c);Array.isArray(k)?(v=k[0],Object.assign(w,k[1])):v=k}return v}function zz(t){return t.match(Lz)[1].replace(Vz,"'")}function Bz(t,e){const n=te(t,e==null?void 0:e.in);return n.setMinutes(0,0,0),n}function Wz(t,e){const n=te(t,e==null?void 0:e.in);return n.setSeconds(0,0),n}function Hz(t,e){const n=te(t,e==null?void 0:e.in);return n.setMilliseconds(0),n}function $z(t,e){const n=()=>Ue(e==null?void 0:e.in,NaN),r=(e==null?void 0:e.additionalDigits)??2,s=Kz(t);let i;if(s.date){const c=Qz(s.date,r);i=Xz(c.restDateString,c.year)}if(!i||isNaN(+i))return n();const o=+i;let a=0,l;if(s.time&&(a=Jz(s.time),isNaN(a)))return n();if(s.timezone){if(l=Zz(s.timezone),isNaN(l))return n()}else{const c=new Date(o+a),h=te(0,e==null?void 0:e.in);return h.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),h.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),h}return te(o+a+l,e==null?void 0:e.in)}const mu={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},qz=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Yz=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Gz=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Kz(t){const e={},n=t.split(mu.dateTimeDelimiter);let r;if(n.length>2)return e;if(/:/.test(n[0])?r=n[0]:(e.date=n[0],r=n[1],mu.timeZoneDelimiter.test(e.date)&&(e.date=t.split(mu.timeZoneDelimiter)[0],r=t.substr(e.date.length,t.length))),r){const s=mu.timezone.exec(r);s?(e.time=r.replace(s[1],""),e.timezone=s[1]):e.time=r}return e}function Qz(t,e){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),r=t.match(n);if(!r)return{year:NaN,restDateString:""};const s=r[1]?parseInt(r[1]):null,i=r[2]?parseInt(r[2]):null;return{year:i===null?s:i*100,restDateString:t.slice((r[1]||r[2]).length)}}function Xz(t,e){if(e===null)return new Date(NaN);const n=t.match(qz);if(!n)return new Date(NaN);const r=!!n[4],s=Da(n[1]),i=Da(n[2])-1,o=Da(n[3]),a=Da(n[4]),l=Da(n[5])-1;if(r)return sB(e,a,l)?eB(e,a,l):new Date(NaN);{const c=new Date(0);return!nB(e,i,o)||!rB(e,s)?new Date(NaN):(c.setUTCFullYear(e,i,Math.max(s,o)),c)}}function Da(t){return t?parseInt(t):1}function Jz(t){const e=t.match(Yz);if(!e)return NaN;const n=op(e[1]),r=op(e[2]),s=op(e[3]);return iB(n,r,s)?n*gc+r*mc+s*1e3:NaN}function op(t){return t&&parseFloat(t.replace(",","."))||0}function Zz(t){if(t==="Z")return 0;const e=t.match(Gz);if(!e)return 0;const n=e[1]==="+"?-1:1,r=parseInt(e[2]),s=e[3]&&parseInt(e[3])||0;return oB(r,s)?n*(r*gc+s*mc):NaN}function eB(t,e,n){const r=new Date(0);r.setUTCFullYear(t,0,4);const s=r.getUTCDay()||7,i=(e-1)*7+n+1-s;return r.setUTCDate(r.getUTCDate()+i),r}const tB=[31,null,31,30,31,30,31,31,30,31,30,31];function tP(t){return t%400===0||t%4===0&&t%100!==0}function nB(t,e,n){return e>=0&&e<=11&&n>=1&&n<=(tB[e]||(tP(t)?29:28))}function rB(t,e){return e>=1&&e<=(tP(t)?366:365)}function sB(t,e,n){return e>=1&&e<=53&&n>=0&&n<=6}function iB(t,e,n){return t===24?e===0&&n===0:n>=0&&n<60&&e>=0&&e<60&&t>=0&&t<25}function oB(t,e){return e>=0&&e<=59}/*!
 * chartjs-adapter-date-fns v3.0.0
 * https://www.chartjs.org
 * (c) 2022 chartjs-adapter-date-fns Contributors
 * Released under the MIT license
 */const aB={datetime:"MMM d, yyyy, h:mm:ss aaaa",millisecond:"h:mm:ss.SSS aaaa",second:"h:mm:ss aaaa",minute:"h:mm aaaa",hour:"ha",day:"MMM d",week:"PP",month:"MMM yyyy",quarter:"qqq - yyyy",year:"yyyy"};wk._date.override({_id:"date-fns",formats:function(){return aB},parse:function(t,e){if(t===null||typeof t>"u")return null;const n=typeof t;return n==="number"||t instanceof Date?t=te(t):n==="string"&&(typeof e=="string"?t=Uz(t,e,new Date,this.options):t=$z(t,this.options)),jk(t)?t.getTime():null},format:function(t,e){return B9(t,e,this.options)},add:function(t,e,n){switch(n){case"millisecond":return i_(t,e);case"second":return R5(t,e);case"minute":return A5(t,e);case"hour":return S5(t,e);case"day":return Fd(t,e);case"week":return N5(t,e);case"month":return s_(t,e);case"quarter":return C5(t,e);case"year":return D5(t,e);default:return t}},diff:function(t,e,n){switch(n){case"millisecond":return o_(t,e);case"second":return z5(t,e);case"minute":return F5(t,e);case"hour":return V5(t,e);case"day":return Uk(t,e);case"week":return B5(t,e);case"month":return Wk(t,e);case"quarter":return U5(t,e);case"year":return W5(t,e);default:return 0}},startOf:function(t,e,n){switch(e){case"second":return Hz(t);case"minute":return Wz(t);case"hour":return Bz(t);case"day":return Hm(t);case"week":return ir(t);case"isoWeek":return ir(t,{weekStartsOn:+n});case"month":return $5(t);case"quarter":return H5(t);case"year":return Hk(t);default:return t}},endOf:function(t,e){switch(e){case"second":return X5(t);case"minute":return K5(t);case"hour":return Y5(t);case"day":return zk(t);case"week":return G5(t);case"month":return Bk(t);case"quarter":return Q5(t);case"year":return q5(t);default:return t}}});const nP="label";function AE(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function lB(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function rP(t,e){t.labels=e}function sP(t,e,n=nP){const r=[];t.datasets=e.map(s=>{const i=t.datasets.find(o=>o[n]===s[n]);return!i||!s.data||r.includes(i)?{...s}:(r.push(i),Object.assign(i,s),i)})}function cB(t,e=nP){const n={labels:[],datasets:[]};return rP(n,t.labels),sP(n,t.datasets,e),n}function uB(t,e){const{height:n=150,width:r=300,redraw:s=!1,datasetIdKey:i,type:o,data:a,options:l,plugins:c=[],fallbackContent:h,updateMode:d,...f}=t,m=M.useRef(null),v=M.useRef(null),w=()=>{m.current&&(v.current=new Md(m.current,{type:o,data:cB(a,i),options:l&&{...l},plugins:c}),AE(e,v.current))},T=()=>{AE(e,null),v.current&&(v.current.destroy(),v.current=null)};return M.useEffect(()=>{!s&&v.current&&l&&lB(v.current,l)},[s,l]),M.useEffect(()=>{!s&&v.current&&rP(v.current.config.data,a.labels)},[s,a.labels]),M.useEffect(()=>{!s&&v.current&&a.datasets&&sP(v.current.config.data,a.datasets,i)},[s,a.datasets]),M.useEffect(()=>{v.current&&(s?(T(),setTimeout(w)):v.current.update(d))},[s,l,a.labels,a.datasets,d]),M.useEffect(()=>{v.current&&(T(),setTimeout(w))},[o]),M.useEffect(()=>(w(),()=>T()),[]),E.jsx("canvas",{ref:m,role:"img",height:n,width:r,...f,children:h})}const hB=M.forwardRef(uB);function dB(t,e){return Md.register(e),M.forwardRef((n,r)=>E.jsx(hB,{...n,ref:r,type:t}))}const fB=dB("line",Fu);Md.register(Bm,Wm,zu,os,m5,a5,Ql,t5);const iP=({data:t})=>{const e={labels:t.map(r=>r.timestamp),datasets:[{label:"Velocity (m/s)",data:t.map(r=>r.velocity),borderColor:"#0EA5E9",backgroundColor:"rgba(14,165,233,0.1)",tension:.3,fill:!0,pointRadius:2}]},n={responsive:!0,plugins:{legend:{position:"top"},tooltip:{intersect:!1,mode:"index"}},scales:{x:{type:"time",time:{unit:"minute"}},y:{title:{display:!0,text:"m/s"}}}};return E.jsx(fB,{options:n,data:e})},Zo=({columns:t,rows:e})=>E.jsx("div",{className:"overflow-x-auto",children:E.jsxs("table",{className:"min-w-full text-left text-sm",children:[E.jsx("thead",{children:E.jsx("tr",{className:"text-slate-600",children:t.map(n=>E.jsx("th",{className:"px-3 py-2 border-b border-slate-200 font-medium",children:n.header},n.header))})}),E.jsxs("tbody",{children:[e.map((n,r)=>E.jsx("tr",{className:"border-b border-slate-100",children:t.map(s=>E.jsx("td",{className:"px-3 py-2 text-slate-800",children:s.accessor(n)},s.header))},r)),e.length===0&&E.jsx("tr",{children:E.jsx("td",{colSpan:t.length,className:"px-3 py-4 text-center text-slate-500",children:"No data"})})]})]})}),pB=()=>{var t;return(t=$i.currentUser)==null?void 0:t.uid},mn=()=>pB()||"guest",gn=()=>new Date().toISOString(),yn=()=>typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():Math.random().toString(36).slice(2),Hh=async(t,e,n=15e3)=>{const r=Z4(ij,t),s=new AbortController,i=setTimeout(()=>s.abort("upload-timeout"),n);try{return await Promise.race([X4(r,e,{contentType:e.type}),new Promise((a,l)=>s.signal.addEventListener("abort",()=>l(new Error("Upload timed out"))))]),await J4(r)}finally{clearTimeout(i)}},CE=async(t,e)=>{const r=(await cr(ar(et(Fe,t),lr(e,"desc"),Xo(1)))).docs.at(0);return r?r.data():null},RE={upload:async t=>{const e=yn(),n=`videos/${e}-${t.name}`,r=await Hh(n,t),s={id:e,name:t.name,url:r,storagePath:n,contentType:t.type,size:t.size,createdAt:gn(),userId:mn()};return await sr(et(Fe,"videos"),s),{data:{data:s}}},list:async()=>({data:{data:(await cr(ar(et(Fe,"videos"),lr("createdAt","desc")))).docs.map(n=>n.data())}})},Bu={upload:async t=>{const e=yn(),n=`datasets/${e}-${t.name}`,r=await Hh(n,t),s={id:e,name:t.name,url:r,storagePath:n,contentType:t.type,size:t.size,createdAt:gn(),userId:mn()};return await sr(et(Fe,"datasets"),s),{data:{data:s}}},list:async()=>({data:{data:(await cr(ar(et(Fe,"datasets"),lr("createdAt","desc")))).docs.map(n=>n.data())}})},Ym={create:async(t,e,n)=>{const s={id:yn(),velocity:t,source:e,timestamp:n||gn(),userId:mn()};return await sr(et(Fe,"velocity_logs"),s),{data:{data:s}}},list:async()=>({data:{data:(await cr(ar(et(Fe,"velocity_logs"),lr("timestamp","desc"),Xo(200)))).docs.map(n=>n.data())}})},Xl={create:async(t,e,n)=>{const s={id:yn(),threshold:t,velocity:e,status:n,triggeredAt:gn(),userId:mn()};if(await sr(et(Fe,"alerts"),s),n==="danger")try{await sr(et(Fe,"notifications"),{id:yn(),type:"municipality_alert",message:`High flood alert: velocity ${e} m/s (threshold ${t} m/s)`,channel:"simulated",delivered:!0,createdAt:gn(),userId:mn()}),console.info("Simulated notification dispatched to municipality")}catch(i){console.error("Notification write failed",i)}return{data:{data:s}}},list:async()=>({data:{data:(await cr(ar(et(Fe,"alerts"),lr("triggeredAt","desc"),Xo(200)))).docs.map(n=>n.data())}})},$h={velocity:async(t,e)=>{const n=await CE("models","uploadedAt"),r=await CE("datasets","createdAt");let s=+"2.5";const i=void 0;let o=i?Number(i):s*1.5;n&&(s*=.95,o*=.95),r!=null&&r.size&&r.size>3e6&&(s*=.9,o*=.9);let a="normal";t>=o?a="danger":t>=s&&(a="warning");const l=Math.min(1,Math.max(0,t/o)),c={velocity:t,source:e,label:a,score:l,thresholds:{warn:s,danger:o},explanation:`Heuristic: warn >= ${s.toFixed(2)} m/s, danger >= ${o.toFixed(2)} m/s${n?` | model: ${n.name}`:""}${r?` | dataset: ${r.name}`:""}`};try{await sr(et(Fe,"inference_logs"),{id:yn(),...c,modelId:n==null?void 0:n.id,datasetId:r==null?void 0:r.id,userId:mn(),createdAt:gn()})}catch(h){console.error("Inference log write failed",h)}if(a==="warning")try{await Xl.create(s,t,"warning")}catch(h){console.error("Alert write failed (warning)",h)}if(a==="danger")try{await Xl.create(o,t,"danger")}catch(h){console.error("Alert write failed (danger)",h)}return{data:{data:c}}}},ap={upload:async(t,e,n)=>{const r=yn(),s=e||`v-${new Date().toISOString()}`,i=`models/${r}-${t.name}`,o=await Hh(i,t),a={id:r,name:t.name,version:s,status:"staged",uploadedAt:gn(),sourceUrl:o,mainFilePath:i,notes:n,userId:mn()};return await nx(Cm(Fe,"models",r),a),{data:{data:a}}},uploadBundle:async(t,e,n)=>{var c;const r=yn(),s=e||`v-${new Date().toISOString()}`,i=[".onnx",".json",".bin",".tflite"],o=[];for(const h of t){const d=h.webkitRelativePath||h.name,f=`models/${r}/${d}`,m=await Hh(f,h);o.push({name:h.name,path:f,size:h.size,contentType:h.type,url:m})}const a=o.find(h=>i.some(d=>h.name.toLowerCase().endsWith(d)))||o[0],l={id:r,name:(a==null?void 0:a.name)||((c=t[0])==null?void 0:c.name)||"bundle",version:s,status:"staged",uploadedAt:gn(),sourceUrl:a==null?void 0:a.url,mainFilePath:a==null?void 0:a.path,files:o.map(({url:h,...d})=>d),notes:n,userId:mn()};return await nx(Cm(Fe,"models",r),l),{data:{data:l}}},list:async()=>({data:{data:(await cr(ar(et(Fe,"models"),lr("uploadedAt","desc")))).docs.map(n=>n.data())}})},Gm={create:async(t,e="simulated",n="test")=>{const s={id:yn(),type:n,message:t,channel:e,delivered:!0,createdAt:gn(),userId:mn()};return await sr(et(Fe,"notifications"),s),{data:{data:s}}},list:async()=>({data:{data:(await cr(ar(et(Fe,"notifications"),lr("createdAt","desc"),Xo(200)))).docs.map(n=>n.data())}})},NE={seed:async()=>{const t=yn(),e={id:t,name:`Site ${t.slice(0,4)}`,location:"Sample River Bend",lat:0,lon:0,status:"online",alertStatus:"normal",lastVelocity:Math.random()*3,lastWaterLevel:.4+Math.random()*.6,lastRainRate:Math.random()*10,lastHeartbeat:gn(),userId:mn()};return await sr(et(Fe,"sites"),e),{data:{data:e}}},list:async()=>({data:{data:(await cr(ar(et(Fe,"sites"),lr("lastHeartbeat","desc")))).docs.map(n=>n.data())}})},oP={create:async(t,e,n)=>{const s={id:yn(),siteId:e,level:t,timestamp:n||gn(),userId:mn()};return await sr(et(Fe,"water_levels"),s),{data:{data:s}}},list:async()=>({data:{data:(await cr(ar(et(Fe,"water_levels"),lr("timestamp","desc"),Xo(200)))).docs.map(n=>n.data())}})},aP={create:async(t,e,n)=>{const s={id:yn(),siteId:e,rate:t,timestamp:n||gn(),userId:mn()};return await sr(et(Fe,"rain_logs"),s),{data:{data:s}}},list:async()=>({data:{data:(await cr(ar(et(Fe,"rain_logs"),lr("timestamp","desc"),Xo(200)))).docs.map(n=>n.data())}})},mB=()=>{var T,_,x;const[t,e]=M.useState([]),[n,r]=M.useState([]),[s,i]=M.useState([]),[o,a]=M.useState([]),[l,c]=M.useState(!1);M.useEffect(()=>{(async()=>{c(!0);try{const[R,D,L,I]=await Promise.all([Ym.list(),Xl.list(),oP.list(),aP.list()]);e(R.data.data||[]),r(D.data.data||[]),i(L.data.data||[]),a(I.data.data||[])}catch(R){console.error(R)}finally{c(!1)}})()},[]);const h=((T=t.at(0))==null?void 0:T.velocity)??0,d=((_=s.at(0))==null?void 0:_.level)??0,f=((x=o.at(0))==null?void 0:x.rate)??0,m=h>0?"Online":"Offline",v=M.useMemo(()=>n.length===0?"Normal":n[0].status,[n]),w=M.useMemo(()=>{const b=h,R=d,D=f,L=b*.5+R*.3+D*.2;return L>6?"danger":L>3?"warning":"normal"},[h,d,f]);return E.jsxs("div",{className:"space-y-6",children:[E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsxs("div",{children:[E.jsx("h2",{className:"text-2xl font-semibold text-slate-900",children:"Overview"}),E.jsx("p",{className:"text-sm text-slate-500",children:"Realtime snapshot of water velocity system"})]}),l&&E.jsx("span",{className:"text-sm text-slate-500",children:"Refreshing..."})]}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[E.jsx(Fi,{title:"System Status",value:m,hint:"Derived from latest reading",tone:m==="Online"?"success":"warning"}),E.jsx(Fi,{title:"Latest Velocity",value:`${h.toFixed(2)} m/s`}),E.jsx(Fi,{title:"Alert State",value:v,hint:"Most recent alert",tone:v==="danger"?"danger":v==="warning"?"warning":"default"})]}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[E.jsx(Fi,{title:"Water Level",value:`${d.toFixed(2)} m`,hint:"Latest water level"}),E.jsx(Fi,{title:"Rainfall",value:`${f.toFixed(1)} mm/hr`,hint:"Latest rain rate"}),E.jsx(Fi,{title:"Fused Risk",value:w,hint:"Velocity + water + rain",tone:w==="danger"?"danger":w==="warning"?"warning":"default"})]}),E.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[E.jsxs("div",{className:"lg:col-span-2 rounded-lg border border-slate-200 bg-white p-4 shadow-sm",children:[E.jsxs("div",{className:"flex items-center justify-between mb-4",children:[E.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Velocity over time"}),E.jsx("span",{className:"text-xs text-slate-500",children:"Recent 50 readings"})]}),E.jsx(iP,{data:t.slice(0,50).reverse()})]}),E.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-4 shadow-sm",children:[E.jsxs("div",{className:"flex items-center justify-between mb-4",children:[E.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Recent alerts"}),E.jsx("span",{className:"text-xs text-slate-500",children:"Last 5"})]}),E.jsx(Zo,{columns:[{header:"Status",accessor:b=>b.status},{header:"Velocity",accessor:b=>`${b.velocity} m/s`},{header:"Threshold",accessor:b=>`${b.threshold} m/s`},{header:"At",accessor:b=>new Date(b.triggeredAt).toLocaleString()}],rows:n.slice(0,5)})]})]})]})},u_=({label:t,accept:e,multiple:n,allowDirectory:r,onChange:s,onChangeFiles:i})=>E.jsxs("label",{className:"flex flex-col items-center justify-center border-2 border-dashed border-slate-300 rounded-lg p-6 text-center hover:border-sky-400 cursor-pointer bg-white",children:[E.jsx("p",{className:"text-sm text-slate-700",children:t}),E.jsxs("p",{className:"text-xs text-slate-500",children:["Click to choose file",n||r?"s/folder":""]}),E.jsx("input",{type:"file",accept:e,className:"hidden",multiple:n,...r?{webkitdirectory:"",directory:""}:{},onChange:o=>{const a=o.target.files?Array.from(o.target.files):[];a.length!==0&&(i?i(a):s&&s(a[0]))}})]}),gB=()=>{const[t,e]=M.useState([]),[n,r]=M.useState(!1),[s,i]=M.useState(null),[o,a]=M.useState(""),[l,c]=M.useState(!1),h=M.useRef(null),d=M.useRef(null),f=async()=>{try{const T=(await RE.list()).data.data||[];e(T),i(T[0]||null)}catch(w){console.error(w)}};M.useEffect(()=>{f()},[]),M.useEffect(()=>{const w=d.current,T=h.current;if(!w||!T)return;const _=()=>{w.width=T.clientWidth,w.height=T.clientHeight};_();const x=()=>_();window.addEventListener("resize",x);let b=0;const R=()=>{const D=w.getContext("2d");if(!D)return;D.clearRect(0,0,w.width,w.height);const L=Date.now()/1e3,I=18;for(let y=0;y<I;y++){const k=y*73%w.width+Math.sin(L+y)*20,P=y*37%w.height+Math.cos(L*.5+y)*10,A=30+y*11%40,N=(L*.6+y)%(Math.PI*2),C=k+Math.cos(N)*A,le=P+Math.sin(N)*A,re=A>50;D.strokeStyle=re?"rgba(244, 63, 94, 0.8)":"rgba(56, 189, 248, 0.8)",D.lineWidth=re?2.4:1.4,D.beginPath(),D.moveTo(k,P),D.lineTo(C,le),D.stroke()}b=requestAnimationFrame(R)};return b=requestAnimationFrame(R),()=>{window.removeEventListener("resize",x),cancelAnimationFrame(b)}},[s]);const m=async w=>{var T,_;a(""),r(!0);try{await RE.upload(w);const x=Math.min(6,Math.max(.3,w.size/1e6));await $h.velocity(x,"video-upload"),await f()}catch(x){a(((_=(T=x==null?void 0:x.response)==null?void 0:T.data)==null?void 0:_.message)||"Upload failed")}finally{r(!1)}},v=async()=>{var w,T;if(s){c(!0),a("");try{const _=Math.max(.1,Math.random()*4.5);await $h.velocity(_,"neuromorphic-camera-demo")}catch(_){a(((T=(w=_==null?void 0:_.response)==null?void 0:w.data)==null?void 0:T.message)||"Inference failed")}finally{c(!1)}}};return E.jsxs("div",{className:"space-y-6",children:[E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsxs("div",{children:[E.jsx("h2",{className:"text-2xl font-semibold text-slate-900",children:"Live Feed"}),E.jsx("p",{className:"text-sm text-slate-500",children:"Manage video inputs and playback"})]}),E.jsx("span",{className:"text-xs text-slate-400",children:"// TODO: Camera stream integration"})]}),E.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[E.jsx("div",{className:"lg:col-span-2 rounded-lg border border-slate-200 bg-black aspect-video overflow-hidden",children:s?E.jsxs("div",{className:"relative w-full h-full",children:[E.jsx("video",{ref:h,src:s.url,controls:!0,className:"w-full h-full object-contain bg-black"}),E.jsx("canvas",{ref:d,className:"absolute inset-0 pointer-events-none mix-blend-screen"})]}):E.jsx("div",{className:"h-full flex items-center justify-center text-slate-200",children:"No video selected"})}),E.jsxs("div",{className:"space-y-4",children:[E.jsx(u_,{label:n?"Uploading...":"Upload video (mp4/avi)",accept:"video/mp4,video/x-msvideo,video/avi",onChange:m}),o&&E.jsx("p",{className:"text-sm text-rose-600",children:o}),E.jsx("button",{disabled:!s||l,onClick:v,className:"w-full rounded-md border-2 border-slate-900 bg-amber-200 text-slate-900 py-2 text-sm font-semibold hover:shadow-[4px_4px_0_#0f172a] disabled:opacity-50",children:l?"Estimating...":"Estimate velocity (neuromorphic demo)"}),E.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white divide-y divide-slate-100",children:[t.map(w=>E.jsxs("button",{className:`w-full text-left px-4 py-3 text-sm hover:bg-slate-50 ${(s==null?void 0:s.id)===w.id?"bg-slate-100":""}`,onClick:()=>i(w),children:[E.jsx("div",{className:"font-medium text-slate-900",children:w.name}),E.jsx("div",{className:"text-xs text-slate-500",children:new Date(w.createdAt).toLocaleString()})]},w.id)),t.length===0&&E.jsx("p",{className:"p-4 text-sm text-slate-500",children:"No uploads yet"})]})]})]})]})},yB=()=>{const[t,e]=M.useState([]),[n,r]=M.useState("0"),[s,i]=M.useState("sensor"),[o,a]=M.useState(""),[l,c]=M.useState("0.0"),[h,d]=M.useState("0.0"),[f,m]=M.useState(""),v=async()=>{try{const _=await Ym.list();e(_.data.data||[])}catch(_){console.error(_)}};M.useEffect(()=>{v()},[]);const w=async _=>{var b,R;_.preventDefault(),a("");const x=Number(n);if(Number.isNaN(x)){a("Velocity must be numeric");return}try{await Ym.create(x,s),r("0"),await v()}catch(D){a(((R=(b=D==null?void 0:D.response)==null?void 0:b.data)==null?void 0:R.message)||"Failed to record")}},T=async _=>{var R,D;_.preventDefault(),m("");const x=Number(l),b=Number(h);if(Number.isNaN(x)||Number.isNaN(b)){m("Values must be numeric");return}try{await Promise.all([oP.create(x),aP.create(b)]),c("0.0"),d("0.0"),await v()}catch(L){m(((D=(R=L==null?void 0:L.response)==null?void 0:R.data)==null?void 0:D.message)||"Failed to record sensor data")}};return E.jsxs("div",{className:"space-y-6",children:[E.jsx("div",{className:"flex items-center justify-between",children:E.jsxs("div",{children:[E.jsx("h2",{className:"text-2xl font-semibold text-slate-900",children:"Velocity Analytics"}),E.jsx("p",{className:"text-sm text-slate-500",children:"Track readings and trends"})]})}),E.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[E.jsx("div",{className:"lg:col-span-2 rounded-lg border border-slate-200 bg-white p-4 shadow-sm",children:E.jsx(iP,{data:t.slice(0,100).reverse()})}),E.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-4 shadow-sm",children:[E.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-3",children:"Add reading"}),E.jsxs("form",{className:"space-y-3",onSubmit:w,children:[E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm text-slate-600 mb-1",children:"Velocity (m/s)"}),E.jsx("input",{value:n,onChange:_=>r(_.target.value),type:"number",step:"0.01",className:"w-full rounded-md border border-slate-200 px-3 py-2 focus:ring-2 focus:ring-sky-300"})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm text-slate-600 mb-1",children:"Source"}),E.jsxs("select",{value:s,onChange:_=>i(_.target.value),className:"w-full rounded-md border border-slate-200 px-3 py-2 focus:ring-2 focus:ring-sky-300",children:[E.jsx("option",{value:"sensor",children:"Sensor"}),E.jsx("option",{value:"camera",children:"Camera"}),E.jsx("option",{value:"upload",children:"Upload"})]})]}),o&&E.jsx("p",{className:"text-sm text-rose-600",children:o}),E.jsx("button",{type:"submit",className:"w-full bg-sky-600 text-white rounded-md py-2 font-medium hover:bg-sky-700",children:"Save reading"})]})]}),E.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-4 shadow-sm",children:[E.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-3",children:"Sensor fusion inputs"}),E.jsxs("form",{className:"space-y-3",onSubmit:T,children:[E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm text-slate-600 mb-1",children:"Water level (m)"}),E.jsx("input",{value:l,onChange:_=>c(_.target.value),type:"number",step:"0.01",className:"w-full rounded-md border border-slate-200 px-3 py-2 focus:ring-2 focus:ring-sky-300"})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm text-slate-600 mb-1",children:"Rainfall (mm/hr)"}),E.jsx("input",{value:h,onChange:_=>d(_.target.value),type:"number",step:"0.1",className:"w-full rounded-md border border-slate-200 px-3 py-2 focus:ring-2 focus:ring-sky-300"})]}),f&&E.jsx("p",{className:"text-sm text-rose-600",children:f}),E.jsx("button",{type:"submit",className:"w-full bg-emerald-600 text-white rounded-md py-2 font-medium hover:bg-emerald-700",children:"Save sensor data"})]})]})]}),E.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-4 shadow-sm",children:[E.jsxs("div",{className:"flex items-center justify-between mb-4",children:[E.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Reading log"}),E.jsxs("span",{className:"text-xs text-slate-500",children:["Latest ",t.length]})]}),E.jsx(Zo,{columns:[{header:"Timestamp",accessor:_=>new Date(_.timestamp).toLocaleString()},{header:"Velocity",accessor:_=>`${_.velocity} m/s`},{header:"Source",accessor:_=>_.source}],rows:t})]})]})},_B=()=>{const[t,e]=M.useState([]),[n,r]=M.useState("2.5"),[s,i]=M.useState("0"),[o,a]=M.useState("warning"),[l,c]=M.useState(""),h=async()=>{try{const f=await Xl.list();e(f.data.data||[])}catch(f){console.error(f)}};M.useEffect(()=>{h()},[]);const d=async f=>{var m,v;f.preventDefault(),c("");try{await Xl.create(Number(n),Number(s),o),await h()}catch(w){c(((v=(m=w==null?void 0:w.response)==null?void 0:m.data)==null?void 0:v.message)||"Failed to save alert")}};return E.jsxs("div",{className:"space-y-6",children:[E.jsx("div",{className:"flex items-center justify-between",children:E.jsxs("div",{children:[E.jsx("h2",{className:"text-2xl font-semibold text-slate-900",children:"Alerts"}),E.jsx("p",{className:"text-sm text-slate-500",children:"Threshold management and alert history"})]})}),E.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[E.jsxs("div",{className:"lg:col-span-1 rounded-lg border border-slate-200 bg-white p-4 shadow-sm",children:[E.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-3",children:"Set threshold"}),E.jsxs("form",{className:"space-y-3",onSubmit:d,children:[E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm text-slate-600 mb-1",children:"Velocity threshold (m/s)"}),E.jsx("input",{type:"number",step:"0.1",value:n,onChange:f=>r(f.target.value),className:"w-full rounded-md border border-slate-200 px-3 py-2 focus:ring-2 focus:ring-sky-300"})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm text-slate-600 mb-1",children:"Sample velocity (optional)"}),E.jsx("input",{type:"number",step:"0.1",value:s,onChange:f=>i(f.target.value),className:"w-full rounded-md border border-slate-200 px-3 py-2 focus:ring-2 focus:ring-sky-300"})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm text-slate-600 mb-1",children:"Status"}),E.jsxs("select",{value:o,onChange:f=>a(f.target.value),className:"w-full rounded-md border border-slate-200 px-3 py-2 focus:ring-2 focus:ring-sky-300",children:[E.jsx("option",{value:"normal",children:"Normal"}),E.jsx("option",{value:"warning",children:"Warning"}),E.jsx("option",{value:"danger",children:"Danger"})]})]}),l&&E.jsx("p",{className:"text-sm text-rose-600",children:l}),E.jsx("button",{type:"submit",className:"w-full bg-sky-600 text-white rounded-md py-2 font-medium hover:bg-sky-700",children:"Save alert"})]})]}),E.jsxs("div",{className:"lg:col-span-2 rounded-lg border border-slate-200 bg-white p-4 shadow-sm",children:[E.jsxs("div",{className:"flex items-center justify-between mb-4",children:[E.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"History"}),E.jsx("span",{className:"text-xs text-slate-500",children:"Recent entries"})]}),E.jsx(Zo,{columns:[{header:"Triggered",accessor:f=>new Date(f.triggeredAt).toLocaleString()},{header:"Velocity",accessor:f=>`${f.velocity} m/s`},{header:"Threshold",accessor:f=>`${f.threshold} m/s`},{header:"Status",accessor:f=>f.status}],rows:t})]})]})]})},vB=()=>{const[t,e]=M.useState([]),[n,r]=M.useState(!1),[s,i]=M.useState(!1),[o,a]=M.useState(""),l=async()=>{try{const d=await Bu.list();e(d.data.data||[])}catch(d){console.error(d)}};M.useEffect(()=>{l()},[]);const c=async d=>{var f,m;a(""),r(!0);try{await Bu.upload(d),await l()}catch(v){a(((m=(f=v==null?void 0:v.response)==null?void 0:f.data)==null?void 0:m.message)||"Upload failed")}finally{r(!1)}},h=async()=>{a(""),i(!0);try{const d="hf-internal-testing/fixtures_image_utils",f=`https://huggingface.co/api/datasets/${d}/tree/main`,m=await fetch(f).then(b=>{if(!b.ok)throw new Error("Failed to fetch dataset tree");return b.json()}),w=(Array.isArray(m)?m:[]).find(b=>b.type==="file"&&/\.(png|jpg|jpeg)$/i.test(b.path));if(!w)throw new Error("No image asset found in dataset");const T=`https://huggingface.co/datasets/${d}/resolve/main/${w.path}`,_=await fetch(T).then(b=>{if(!b.ok)throw new Error("Failed to fetch sample file");return b.blob()}),x=new File([_],w.path.split("/").pop()||"sample.png",{type:_.type});await Bu.upload(x),await l()}catch(d){a((d==null?void 0:d.message)||"Import failed")}finally{i(!1)}};return E.jsxs("div",{className:"space-y-6",children:[E.jsx("div",{className:"flex items-center justify-between",children:E.jsxs("div",{children:[E.jsx("h2",{className:"text-2xl font-semibold text-slate-900",children:"Datasets"}),E.jsx("p",{className:"text-sm text-slate-500",children:"Upload and manage training datasets"})]})}),E.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[E.jsxs("div",{className:"lg:col-span-1 space-y-3",children:[E.jsx(u_,{label:n?"Uploading...":"Upload CSV / ZIP / video",accept:".csv,text/csv,.zip,video/*",onChange:c}),o&&E.jsx("p",{className:"text-sm text-rose-600",children:o}),E.jsx("button",{disabled:s,onClick:h,className:"w-full rounded-md border-2 border-slate-900 bg-amber-200 text-slate-900 py-2 text-sm font-semibold hover:shadow-[4px_4px_0_#0f172a] disabled:opacity-50",children:s?"Importing":"Import HF sample dataset"}),E.jsxs("div",{className:"rounded-lg border-2 border-slate-900 bg-white p-3 shadow-[4px_4px_0_#0f172a] text-sm text-slate-800 space-y-1",children:[E.jsx("div",{className:"font-semibold text-slate-900",children:"Public resources"}),E.jsxs("ul",{className:"list-disc list-inside space-y-1 text-xs text-slate-700",children:[E.jsx("li",{children:E.jsx("a",{className:"underline",href:"https://github.com/neuromorphs/ATIS-data",target:"_blank",rel:"noreferrer",children:"ATIS neuromorphic water sequences"})}),E.jsx("li",{children:E.jsx("a",{className:"underline",href:"https://data.mendeley.com/datasets/7d24kz8x6c",target:"_blank",rel:"noreferrer",children:"Flooded river video set (Mendeley)"})}),E.jsx("li",{children:E.jsx("a",{className:"underline",href:"https://huggingface.co/datasets/hf-internal-testing/fixtures_image_utils",target:"_blank",rel:"noreferrer",children:"Hugging Face sample image fixtures (for testing loaders)"})})]}),E.jsx("p",{className:"text-xs text-slate-600",children:"Download externally, then upload here to keep everything in Firebase Storage."})]})]}),E.jsxs("div",{className:"lg:col-span-2 rounded-lg border border-slate-200 bg-white p-4 shadow-sm",children:[E.jsxs("div",{className:"flex items-center justify-between mb-4",children:[E.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Uploaded datasets"}),E.jsx("span",{className:"text-xs text-slate-500",children:"Stored in Firebase Storage"})]}),E.jsx(Zo,{columns:[{header:"Name",accessor:d=>d.name},{header:"Size",accessor:d=>d.size?`${(d.size/1024/1024).toFixed(2)} MB`:"n/a"},{header:"Added",accessor:d=>new Date(d.createdAt).toLocaleString()}],rows:t})]})]})]})},wB=()=>{var re,we,We;const[t,e]=M.useState("0"),[n,r]=M.useState("sensor"),[s,i]=M.useState(null),[o,a]=M.useState(!1),[l,c]=M.useState(""),[h,d]=M.useState([]),[f,m]=M.useState(!1),[v,w]=M.useState(""),[T,_]=M.useState(""),[x,b]=M.useState([]),[R,D]=M.useState(""),[L,I]=M.useState(""),[y,k]=M.useState(!1),P=async F=>{var G,J;F.preventDefault(),c(""),i(null);const Y=Number(t);if(Number.isNaN(Y)){c("Velocity must be numeric");return}a(!0);try{const ue=await $h.velocity(Y,n);i(ue.data.data)}catch(ue){c(((J=(G=ue==null?void 0:ue.response)==null?void 0:G.data)==null?void 0:J.message)||"Inference failed")}finally{a(!1)}},A=async()=>{try{const F=await ap.list();d(F.data.data||[])}catch(F){console.error(F)}},N=async()=>{try{const F=await Bu.list();b(F.data.data||[])}catch(F){console.error(F)}};M.useEffect(()=>{A(),N()},[]);const C=async F=>{var Y,G;if(c(""),F.length!==0){m(!0);try{F.length===1?await ap.upload(F[0],v||void 0,T||void 0):await ap.uploadBundle(F,v||void 0,T||void 0),w(""),_(""),await A()}catch(J){c(((G=(Y=J==null?void 0:J.response)==null?void 0:Y.data)==null?void 0:G.message)||"Model upload failed")}finally{m(!1)}}},le=async()=>{var Y,G;if(!R){I("Pick a dataset first.");return}const F=x.find(J=>J.id===R);if(!F){I("Dataset not found.");return}I(""),k(!0);try{const J=Math.max(.5,(F.size||5e5)/1e6*2.5);await $h.velocity(J,"dataset-analysis"),await Gm.create(`Dataset ${F.name} analyzed: est velocity ${J.toFixed(2)} m/s`,"simulated","dataset_report"),I("Report logged (inference + notification).")}catch(J){I(((G=(Y=J==null?void 0:J.response)==null?void 0:Y.data)==null?void 0:G.message)||"Analysis failed")}finally{k(!1)}};return E.jsxs("div",{className:"space-y-6",children:[E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsxs("div",{children:[E.jsx("h2",{className:"text-2xl font-semibold text-slate-900",children:"Model"}),E.jsx("p",{className:"text-sm text-slate-500",children:"Manage models and run inference (heuristic fallback)"})]}),E.jsx("span",{className:"text-xs text-slate-400",children:"// TODO: Replace with trained ONNX model"})]}),E.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[E.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-4 shadow-sm",children:[E.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-3",children:"Run inference"}),E.jsxs("form",{className:"space-y-3",onSubmit:P,children:[E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm text-slate-600 mb-1",children:"Velocity (m/s)"}),E.jsx("input",{type:"number",step:"0.01",value:t,onChange:F=>e(F.target.value),className:"w-full rounded-md border border-slate-200 px-3 py-2 focus:ring-2 focus:ring-sky-300"})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm text-slate-600 mb-1",children:"Source"}),E.jsxs("select",{value:n,onChange:F=>r(F.target.value),className:"w-full rounded-md border border-slate-200 px-3 py-2 focus:ring-2 focus:ring-sky-300",children:[E.jsx("option",{value:"sensor",children:"Sensor"}),E.jsx("option",{value:"camera",children:"Camera"}),E.jsx("option",{value:"upload",children:"Upload"})]})]}),l&&E.jsx("p",{className:"text-sm text-rose-600",children:l}),E.jsx("button",{type:"submit",disabled:o,className:"w-full bg-sky-600 text-white rounded-md py-2 font-medium hover:bg-sky-700 disabled:opacity-50",children:o?"Running...":"Run inference"})]})]}),E.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-4 shadow-sm space-y-3",children:[E.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Model status"}),E.jsxs("ul",{className:"space-y-1 text-sm text-slate-700",children:[E.jsxs("li",{children:[E.jsx("span",{className:"font-medium",children:"Active:"})," ",((re=h[0])==null?void 0:re.name)||"Heuristic"]}),E.jsxs("li",{children:[E.jsx("span",{className:"font-medium",children:"Version:"})," ",((we=h[0])==null?void 0:we.version)||"0.1.0 (heuristic)"]}),E.jsxs("li",{children:[E.jsx("span",{className:"font-medium",children:"Source:"})," ",(We=h[0])!=null&&We.sourceUrl?"Uploaded":"Heuristic rules"]})]}),s&&E.jsxs("div",{className:"rounded-md border border-slate-200 bg-slate-50 p-3 text-sm text-slate-800",children:[E.jsx("div",{className:"font-semibold text-slate-900 mb-1",children:"Latest inference"}),E.jsxs("div",{children:["Label: ",E.jsx("span",{className:"font-medium uppercase",children:s.label})]}),E.jsxs("div",{children:["Velocity: ",s.velocity," m/s (source: ",s.source,")"]}),E.jsxs("div",{children:["Score: ",(s.score*100).toFixed(1),"%"]}),E.jsxs("div",{children:["Thresholds: warn ",s.thresholds.warn," / danger ",s.thresholds.danger," m/s"]}),E.jsx("div",{className:"text-xs text-slate-500 mt-1",children:s.explanation})]})]})]}),E.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[E.jsxs("div",{className:"space-y-3 rounded-lg border border-slate-200 bg-white p-4 shadow-sm",children:[E.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Upload model artifact"}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm text-slate-600 mb-1",children:"Version (optional)"}),E.jsx("input",{value:v,onChange:F=>w(F.target.value),placeholder:"v1.0.0",className:"w-full rounded-md border border-slate-200 px-3 py-2 focus:ring-2 focus:ring-sky-300"})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm text-slate-600 mb-1",children:"Notes (optional)"}),E.jsx("textarea",{value:T,onChange:F=>_(F.target.value),rows:3,className:"w-full rounded-md border border-slate-200 px-3 py-2 focus:ring-2 focus:ring-sky-300"})]}),E.jsx(u_,{label:f?"Uploading...":"Upload model file or folder",accept:".onnx,.json,.bin,.zip,.tflite",multiple:!0,allowDirectory:!0,onChangeFiles:C})]}),E.jsxs("div",{className:"lg:col-span-2 rounded-lg border border-slate-200 bg-white p-4 shadow-sm",children:[E.jsxs("div",{className:"flex items-center justify-between mb-4",children:[E.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Model registry"}),E.jsx("span",{className:"text-xs text-slate-500",children:"Newest first"})]}),E.jsx(Zo,{columns:[{header:"Name",accessor:F=>F.name},{header:"Version",accessor:F=>F.version},{header:"Status",accessor:F=>F.status},{header:"Uploaded",accessor:F=>new Date(F.uploadedAt).toLocaleString()},{header:"Source",accessor:F=>F.sourceUrl?"Storage":"Heuristic"}],rows:h})]}),E.jsxs("div",{className:"rounded-lg border-2 border-slate-900 bg-white p-4 shadow-[4px_4px_0_#0f172a] space-y-2 text-sm text-slate-800",children:[E.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Public model references"}),E.jsx("p",{children:"Start with lightweight demos; download externally then upload:"}),E.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[E.jsx("li",{children:E.jsx("a",{className:"underline",href:"https://github.com/isl-org/MiDaS",target:"_blank",rel:"noreferrer",children:"MiDaS depth (for water surface cues)"})}),E.jsx("li",{children:E.jsx("a",{className:"underline",href:"https://github.com/google-research/google-research/tree/master/optical_flow",target:"_blank",rel:"noreferrer",children:"Lightweight optical flow demos"})}),E.jsx("li",{children:E.jsx("a",{className:"underline",href:"https://huggingface.co/spaces/akhaliq/raft-small-onnx",target:"_blank",rel:"noreferrer",children:"RAFT-small ONNX demo (optical flow)"})})]}),E.jsx("p",{className:"text-xs text-slate-600",children:"Tip: export to ONNX/TFJS, then upload to register in Firebase."})]})]}),E.jsxs("div",{className:"rounded-lg border-2 border-slate-900 bg-white p-4 shadow-[4px_4px_0_#0f172a] space-y-3",children:[E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Dataset-driven analysis"}),E.jsx("span",{className:"text-xs text-slate-500",children:"Logs inference + notification"})]}),E.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-3",children:[E.jsxs("div",{className:"lg:col-span-2",children:[E.jsx("label",{className:"block text-sm text-slate-600 mb-1",children:"Dataset"}),E.jsxs("select",{value:R,onChange:F=>D(F.target.value),className:"w-full rounded-md border border-slate-200 px-3 py-2 focus:ring-2 focus:ring-sky-300",children:[E.jsx("option",{value:"",children:"Select a dataset"}),x.map(F=>E.jsxs("option",{value:F.id,children:[F.name," ",F.size?`(${(F.size/1024/1024).toFixed(2)} MB)`:""]},F.id))]})]}),E.jsx("div",{className:"flex items-end",children:E.jsx("button",{onClick:le,disabled:y,className:"w-full rounded-md border-2 border-slate-900 bg-emerald-200 text-slate-900 py-2 text-sm font-semibold hover:shadow-[4px_4px_0_#0f172a] disabled:opacity-50",children:y?"Analyzing":"Run analysis"})})]}),L&&E.jsx("p",{className:"text-sm text-slate-700",children:L})]})]})},xB=()=>{const{login:t,register:e}=$y(),n=qg(),[r,s]=M.useState("login"),[i,o]=M.useState(""),[a,l]=M.useState(""),[c,h]=M.useState("user"),[d,f]=M.useState(""),[m,v]=M.useState(!1),w=async T=>{var _,x;T.preventDefault(),f(""),v(!0);try{r==="login"?await t(i,a):await e(i,a,c),n("/")}catch(b){f(((x=(_=b==null?void 0:b.response)==null?void 0:_.data)==null?void 0:x.message)||"Authentication failed")}finally{v(!1)}};return E.jsx("div",{className:"min-h-screen flex items-center justify-center px-4",style:{background:"repeating-linear-gradient(45deg, #fef4dd, #fef4dd 10px, #f9e0ff 10px, #f9e0ff 20px)"},children:E.jsxs("div",{className:"bg-white border-4 border-slate-900 shadow-[8px_8px_0_#0f172a] rounded-xl p-8 w-full max-w-md",children:[E.jsx("h1",{className:"text-2xl font-semibold text-slate-900 mb-1",children:"Water Velocity"}),E.jsx("p",{className:"text-sm text-slate-500 mb-6",children:"Secure dashboard access"}),E.jsxs("div",{className:"flex mb-6 border-2 border-slate-900 rounded-md overflow-hidden text-sm",children:[E.jsx("button",{className:`flex-1 py-2 font-semibold ${r==="login"?"bg-sky-200 text-slate-900":"bg-white"}`,onClick:()=>s("login"),children:"Login"}),E.jsx("button",{className:`flex-1 py-2 font-semibold ${r==="register"?"bg-sky-200 text-slate-900":"bg-white"}`,onClick:()=>s("register"),children:"Register"})]}),E.jsxs("form",{className:"space-y-4",onSubmit:w,children:[E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm text-slate-600 mb-1",children:"Email"}),E.jsx("input",{value:i,onChange:T=>o(T.target.value),type:"email",required:!0,className:"w-full rounded-md border border-slate-200 px-3 py-2 focus:ring-2 focus:ring-sky-300"})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm text-slate-600 mb-1",children:"Password"}),E.jsx("input",{value:a,onChange:T=>l(T.target.value),type:"password",required:!0,className:"w-full rounded-md border border-slate-200 px-3 py-2 focus:ring-2 focus:ring-sky-300"})]}),r==="register"&&E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm text-slate-600 mb-1",children:"Role"}),E.jsxs("select",{value:c,onChange:T=>h(T.target.value),className:"w-full rounded-md border border-slate-200 px-3 py-2 focus:ring-2 focus:ring-sky-300",children:[E.jsx("option",{value:"user",children:"User"}),E.jsx("option",{value:"admin",children:"Admin"})]})]}),d&&E.jsx("p",{className:"text-sm text-red-600",children:d}),E.jsx("button",{type:"submit",disabled:m,className:"w-full bg-sky-600 text-white rounded-md py-2 font-medium hover:bg-sky-700 disabled:opacity-50",children:m?"Working...":r==="login"?"Login":"Register"})]})]})})},EB=()=>{const[t,e]=M.useState([]),[n,r]=M.useState("Simulated alert to municipality"),[s,i]=M.useState("simulated"),[o,a]=M.useState(!1),[l,c]=M.useState(""),h=async()=>{try{const f=await Gm.list();e(f.data.data||[])}catch(f){console.error(f)}};M.useEffect(()=>{h()},[]);const d=async f=>{var m,v;f.preventDefault(),c(""),a(!0);try{await Gm.create(n,s,"manual"),await h()}catch(w){c(((v=(m=w==null?void 0:w.response)==null?void 0:m.data)==null?void 0:v.message)||"Failed to send")}finally{a(!1)}};return E.jsxs("div",{className:"space-y-6",children:[E.jsx("div",{className:"flex items-center justify-between",children:E.jsxs("div",{children:[E.jsx("h2",{className:"text-2xl font-semibold text-slate-900",children:"Notifications"}),E.jsx("p",{className:"text-sm text-slate-500",children:"Simulated municipality dispatch log"})]})}),E.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[E.jsxs("div",{className:"lg:col-span-1 rounded-lg border border-slate-200 bg-white p-4 shadow-sm",children:[E.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-3",children:"Simulate send"}),E.jsxs("form",{className:"space-y-3",onSubmit:d,children:[E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm text-slate-600 mb-1",children:"Message"}),E.jsx("textarea",{value:n,onChange:f=>r(f.target.value),className:"w-full rounded-md border border-slate-200 px-3 py-2 focus:ring-2 focus:ring-sky-300",rows:3})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm text-slate-600 mb-1",children:"Channel"}),E.jsxs("select",{value:s,onChange:f=>i(f.target.value),className:"w-full rounded-md border border-slate-200 px-3 py-2 focus:ring-2 focus:ring-sky-300",children:[E.jsx("option",{value:"simulated",children:"Simulated"}),E.jsx("option",{value:"webhook",children:"Webhook"}),E.jsx("option",{value:"email",children:"Email"}),E.jsx("option",{value:"sms",children:"SMS"})]})]}),l&&E.jsx("p",{className:"text-sm text-rose-600",children:l}),E.jsx("button",{type:"submit",disabled:o,className:"w-full bg-sky-600 text-white rounded-md py-2 font-medium hover:bg-sky-700 disabled:opacity-50",children:o?"Sending...":"Send simulated notification"})]})]}),E.jsxs("div",{className:"lg:col-span-2 rounded-lg border border-slate-200 bg-white p-4 shadow-sm",children:[E.jsxs("div",{className:"flex items-center justify-between mb-4",children:[E.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Dispatch history"}),E.jsx("span",{className:"text-xs text-slate-500",children:"Newest first"})]}),E.jsx(Zo,{columns:[{header:"Created",accessor:f=>new Date(f.createdAt).toLocaleString()},{header:"Type",accessor:f=>f.type},{header:"Channel",accessor:f=>f.channel},{header:"Delivered",accessor:f=>f.delivered?"Yes":"No"},{header:"Message",accessor:f=>f.message}],rows:t})]})]})]})},TB=t=>{const e=t*37%100;return{top:`${20+e%60}%`,left:`${10+e*3%80}%`}},bB=()=>{const[t,e]=M.useState([]),[n,r]=M.useState(!1),[s,i]=M.useState(""),o=async()=>{try{const c=await NE.list();e(c.data.data||[])}catch(c){console.error(c)}};M.useEffect(()=>{o()},[]);const a=async()=>{var c,h;i(""),r(!0);try{await NE.seed(),await o()}catch(d){i(((h=(c=d==null?void 0:d.response)==null?void 0:c.data)==null?void 0:h.message)||"Failed to seed")}finally{r(!1)}},l=M.useMemo(()=>{const c=t.length,h=t.filter(f=>f.status==="online").length,d=t.filter(f=>f.alertStatus==="danger").length;return{total:c,online:h,danger:d}},[t]);return E.jsxs("div",{className:"space-y-6",children:[E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsxs("div",{children:[E.jsx("h2",{className:"text-2xl font-semibold text-slate-900",children:"Sites & Health"}),E.jsx("p",{className:"text-sm text-slate-500",children:"Locations, status, and freshness"})]}),E.jsxs("div",{className:"space-x-2",children:[E.jsx("button",{onClick:o,className:"rounded-md border border-slate-300 px-3 py-2 text-sm hover:bg-slate-100",children:"Refresh"}),E.jsx("button",{onClick:a,disabled:n,className:"rounded-md border border-sky-500 px-3 py-2 text-sm text-white bg-sky-600 hover:bg-sky-700 disabled:opacity-50",children:n?"Seeding...":"Add sample site"})]})]}),s&&E.jsx("p",{className:"text-sm text-rose-600",children:s}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[E.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-4 shadow-sm",children:[E.jsx("div",{className:"text-sm text-slate-500",children:"Total sites"}),E.jsx("div",{className:"text-2xl font-semibold text-slate-900",children:l.total})]}),E.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-4 shadow-sm",children:[E.jsx("div",{className:"text-sm text-slate-500",children:"Online"}),E.jsx("div",{className:"text-2xl font-semibold text-slate-900",children:l.online})]}),E.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-4 shadow-sm",children:[E.jsx("div",{className:"text-sm text-slate-500",children:"Danger alerts"}),E.jsx("div",{className:"text-2xl font-semibold text-rose-600",children:l.danger})]})]}),E.jsxs("div",{className:"rounded-lg border border-slate-200 bg-gradient-to-br from-slate-800 via-slate-900 to-slate-800 p-4 shadow-sm text-white relative overflow-hidden",style:{minHeight:"320px"},children:[E.jsx("div",{className:"absolute inset-0 opacity-20",style:{backgroundImage:"radial-gradient(circle at 1px 1px, rgba(255,255,255,0.3) 1px, transparent 0)",backgroundSize:"24px 24px"}}),E.jsxs("div",{className:"relative z-10",children:[E.jsxs("div",{className:"flex items-center justify-between mb-4",children:[E.jsx("h3",{className:"text-lg font-semibold",children:"Map view (schematic)"}),E.jsx("span",{className:"text-xs text-slate-300",children:"Markers sized by velocity"})]}),E.jsxs("div",{className:"relative w-full",style:{height:"260px"},children:[t.map((c,h)=>{const d=TB(h+c.id.length),f=12+Math.min(20,(c.lastVelocity||0)*6),m=c.alertStatus==="danger"?"bg-rose-500":c.alertStatus==="warning"?"bg-amber-400":"bg-emerald-400";return E.jsx("div",{className:`absolute rounded-full border border-white/70 shadow-lg text-[10px] text-white flex items-center justify-center ${m}`,style:{width:`${f}px`,height:`${f}px`,top:d.top,left:d.left},title:`${c.name} | ${c.alertStatus}`},c.id)}),t.length===0&&E.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-slate-300 text-sm",children:"No sites yet. Add a sample site."})]})]})]}),E.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-4 shadow-sm",children:[E.jsxs("div",{className:"flex items-center justify-between mb-4",children:[E.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Site details"}),E.jsx("span",{className:"text-xs text-slate-500",children:"Most recent heartbeat first"})]}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:[t.map(c=>{var h,d,f;return E.jsxs("div",{className:"rounded-md border border-slate-200 p-3 bg-slate-50",children:[E.jsxs("div",{className:"flex items-center justify-between mb-1",children:[E.jsx("div",{className:"font-semibold text-slate-900",children:c.name}),E.jsx("span",{className:`text-xs px-2 py-1 rounded-md ${c.alertStatus==="danger"?"bg-rose-100 text-rose-700":c.alertStatus==="warning"?"bg-amber-100 text-amber-700":"bg-emerald-100 text-emerald-700"}`,children:c.alertStatus})]}),E.jsx("div",{className:"text-xs text-slate-600 mb-2",children:c.location}),E.jsxs("div",{className:"text-sm text-slate-800",children:["Velocity: ",((h=c.lastVelocity)==null?void 0:h.toFixed(2))??""," m/s"]}),E.jsxs("div",{className:"text-sm text-slate-800",children:["Water level: ",((d=c.lastWaterLevel)==null?void 0:d.toFixed(2))??""," m"]}),E.jsxs("div",{className:"text-sm text-slate-800",children:["Rain: ",((f=c.lastRainRate)==null?void 0:f.toFixed(1))??""," mm/hr"]}),E.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["Last heartbeat: ",c.lastHeartbeat?new Date(c.lastHeartbeat).toLocaleString():"n/a"]})]},c.id)}),t.length===0&&E.jsx("div",{className:"text-sm text-slate-500",children:"No sites yet."})]})]})]})},IB=()=>E.jsxs(aN,{children:[E.jsx(vn,{path:"/auth",element:E.jsx(xB,{})}),E.jsxs(vn,{element:E.jsx(cj,{}),children:[E.jsx(vn,{path:"/",element:E.jsx(mB,{})}),E.jsx(vn,{path:"/live",element:E.jsx(gB,{})}),E.jsx(vn,{path:"/velocity",element:E.jsx(yB,{})}),E.jsx(vn,{path:"/alerts",element:E.jsx(_B,{})}),E.jsx(vn,{path:"/notifications",element:E.jsx(EB,{})}),E.jsx(vn,{path:"/datasets",element:E.jsx(vB,{})}),E.jsx(vn,{path:"/model",element:E.jsx(wB,{})}),E.jsx(vn,{path:"/sites",element:E.jsx(bB,{})})]})]});lp.createRoot(document.getElementById("root")).render(E.jsx(WE.StrictMode,{children:E.jsx(mN,{children:E.jsx(oj,{children:E.jsx(IB,{})})})}));
